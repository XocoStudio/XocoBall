import{R as Pf,r as H,j as Te,S as Ft,B as mn,T as pn,A as Ai,C as Ni,v as _u}from"./index-CcZZIcwy.js";import{W as Jf,A as Qr,O as Di,E as Nu,i as qr,F as pr,G as wm,H as Um,J as Hm,b as jm,K as Uu,S as Gr,T as Bm,U as Ym,X as gf,C as Pa,g as Il,Y as Hu,V as de,a as ca,Z as Zm,_ as Xm,R as Ff,s as Ce,$ as Qm,a0 as qu,D as Gu,a1 as Hi,a2 as qm,c as xi,Q as _t,y as Lr,a3 as Gm,a4 as Na,x as hl,t as mr,a5 as dr,a6 as Pe,a7 as dn,a8 as pl,a9 as Lm,aa as Tu,ab as Ef,ac as ql,ad as Gl,ae as Vm,af as If,ag as Wf,ah as fa,ai as Ja,aj as Pl,L as _a,ak as Km,al as Pm,am as Jm,f as Fm,an as Vr,ao as Im,ap as Wm,o as Zn,aq as ju,ar as km,as as Jl,at as $m,au as ed,av as td,aw as ad,ax as nd,ay as ld,az as Sf,aA as Du,aB as id,aC as ud,aD as sd,aE as rd,aF as od,w as cd}from"./three-Fr4zUqLK.js";import{r as Kr,g as kf}from"./react-B--z-fyW.js";var vr={exports:{}},hn={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bf;function fd(){return bf||(bf=1,hn.ConcurrentRoot=1,hn.ContinuousEventPriority=8,hn.DefaultEventPriority=32,hn.DiscreteEventPriority=2,hn.IdleEventPriority=268435456,hn.LegacyRoot=0,hn.NoEventPriority=0),hn}var Mf;function hd(){return Mf||(Mf=1,vr.exports=fd()),vr.exports}var xu=hd(),yr={exports:{}},gr={},Er={exports:{}},Sr={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f;function pd(){if(_f)return Sr;_f=1;var u=Kr();function l(g,A){return g===A&&(g!==0||1/g===1/A)||g!==g&&A!==A}var o=typeof Object.is=="function"?Object.is:l,s=u.useState,c=u.useEffect,h=u.useLayoutEffect,y=u.useDebugValue;function d(g,A){var x=A(),F=s({inst:{value:x,getSnapshot:A}}),ne=F[0].inst,K=F[1];return h(function(){ne.value=x,ne.getSnapshot=A,v(ne)&&K({inst:ne})},[g,x,A]),c(function(){return v(ne)&&K({inst:ne}),g(function(){v(ne)&&K({inst:ne})})},[g]),y(x),x}function v(g){var A=g.getSnapshot;g=g.value;try{var x=A();return!o(g,x)}catch{return!0}}function M(g,A){return A()}var b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?M:d;return Sr.useSyncExternalStore=u.useSyncExternalStore!==void 0?u.useSyncExternalStore:b,Sr}var Tf;function md(){return Tf||(Tf=1,Er.exports=pd()),Er.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf;function dd(){if(zf)return gr;zf=1;var u=Kr(),l=md();function o(M,b){return M===b&&(M!==0||1/M===1/b)||M!==M&&b!==b}var s=typeof Object.is=="function"?Object.is:o,c=l.useSyncExternalStore,h=u.useRef,y=u.useEffect,d=u.useMemo,v=u.useDebugValue;return gr.useSyncExternalStoreWithSelector=function(M,b,g,A,x){var F=h(null);if(F.current===null){var ne={hasValue:!1,value:null};F.current=ne}else ne=F.current;F=d(function(){function D(w){if(!T){if(T=!0,W=w,w=A(w),x!==void 0&&ne.hasValue){var k=ne.value;if(x(k,w))return $=k}return $=w}if(k=$,s(W,w))return k;var Z=A(w);return x!==void 0&&x(k,Z)?(W=w,k):(W=w,$=Z)}var T=!1,W,$,J=g===void 0?null:g;return[function(){return D(b())},J===null?void 0:function(){return D(J())}]},[b,g,A,x]);var K=c(M,F[0],F[1]);return y(function(){ne.hasValue=!0,ne.value=K},[K]),v(K),K},gr}var Af;function vd(){return Af||(Af=1,yr.exports=dd()),yr.exports}var yd=vd();const gd=kf(yd),Of=u=>{let l;const o=new Set,s=(M,b)=>{const g=typeof M=="function"?M(l):M;if(!Object.is(g,l)){const A=l;l=b??(typeof g!="object"||g===null)?g:Object.assign({},l,g),o.forEach(x=>x(l,A))}},c=()=>l,d={setState:s,getState:c,getInitialState:()=>v,subscribe:M=>(o.add(M),()=>o.delete(M))},v=l=u(s,c,d);return d},Ed=(u=>u?Of(u):Of),{useSyncExternalStoreWithSelector:Sd}=gd,bd=u=>u;function Md(u,l=bd,o){const s=Sd(u.subscribe,u.getState,u.getInitialState,l,o);return Pf.useDebugValue(s),s}const Cf=(u,l)=>{const o=Ed(u),s=(c,h=l)=>Md(o,c,h);return Object.assign(s,o),s},$f=((u,l)=>u?Cf(u,l):Cf),_d=u=>typeof u=="object"&&typeof u.then=="function",ml=[];function eh(u,l,o=(s,c)=>s===c){if(u===l)return!0;if(!u||!l)return!1;const s=u.length;if(l.length!==s)return!1;for(let c=0;c<s;c++)if(!o(u[c],l[c]))return!1;return!0}function th(u,l=null,o=!1,s={}){l===null&&(l=[u]);for(const h of ml)if(eh(l,h.keys,h.equal)){if(o)return;if(Object.prototype.hasOwnProperty.call(h,"error"))throw h.error;if(Object.prototype.hasOwnProperty.call(h,"response"))return s.lifespan&&s.lifespan>0&&(h.timeout&&clearTimeout(h.timeout),h.timeout=setTimeout(h.remove,s.lifespan)),h.response;if(!o)throw h.promise}const c={keys:l,equal:s.equal,remove:()=>{const h=ml.indexOf(c);h!==-1&&ml.splice(h,1)},promise:(_d(u)?u:u(...l)).then(h=>{c.response=h,s.lifespan&&s.lifespan>0&&(c.timeout=setTimeout(c.remove,s.lifespan))}).catch(h=>c.error=h)};if(ml.push(c),!o)throw c.promise}const Td=(u,l,o)=>th(u,l,!1,o),zd=(u,l,o)=>void th(u,l,!0,o),Ad=u=>{if(u===void 0||u.length===0)ml.splice(0,ml.length);else{const l=ml.find(o=>eh(u,o.keys,o.equal));l&&l.remove()}};var br={exports:{}},Mr={exports:{}},_r={exports:{}},Tr={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf;function Od(){return Rf||(Rf=1,(function(u){function l(j,ie){var se=j.length;j.push(ie);e:for(;0<se;){var te=se-1>>>1,P=j[te];if(0<c(P,ie))j[te]=ie,j[se]=P,se=te;else break e}}function o(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var ie=j[0],se=j.pop();if(se!==ie){j[0]=se;e:for(var te=0,P=j.length,L=P>>>1;te<L;){var ae=2*(te+1)-1,be=j[ae],_=ae+1,Ne=j[_];if(0>c(be,se))_<P&&0>c(Ne,be)?(j[te]=Ne,j[_]=se,te=_):(j[te]=be,j[ae]=se,te=ae);else if(_<P&&0>c(Ne,se))j[te]=Ne,j[_]=se,te=_;else break e}}return ie}function c(j,ie){var se=j.sortIndex-ie.sortIndex;return se!==0?se:j.id-ie.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;u.unstable_now=function(){return h.now()}}else{var y=Date,d=y.now();u.unstable_now=function(){return y.now()-d}}var v=[],M=[],b=1,g=null,A=3,x=!1,F=!1,ne=!1,K=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function W(j){for(var ie=o(M);ie!==null;){if(ie.callback===null)s(M);else if(ie.startTime<=j)s(M),ie.sortIndex=ie.expirationTime,l(v,ie);else break;ie=o(M)}}function $(j){if(ne=!1,W(j),!F)if(o(v)!==null)F=!0,Q();else{var ie=o(M);ie!==null&&oe($,ie.startTime-j)}}var J=!1,w=-1,k=5,Z=-1;function G(){return!(u.unstable_now()-Z<k)}function I(){if(J){var j=u.unstable_now();Z=j;var ie=!0;try{e:{F=!1,ne&&(ne=!1,D(w),w=-1),x=!0;var se=A;try{t:{for(W(j),g=o(v);g!==null&&!(g.expirationTime>j&&G());){var te=g.callback;if(typeof te=="function"){g.callback=null,A=g.priorityLevel;var P=te(g.expirationTime<=j);if(j=u.unstable_now(),typeof P=="function"){g.callback=P,W(j),ie=!0;break t}g===o(v)&&s(v),W(j)}else s(v);g=o(v)}if(g!==null)ie=!0;else{var L=o(M);L!==null&&oe($,L.startTime-j),ie=!1}}break e}finally{g=null,A=se,x=!1}ie=void 0}}finally{ie?ye():J=!1}}}var ye;if(typeof T=="function")ye=function(){T(I)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,q=_e.port2;_e.port1.onmessage=I,ye=function(){q.postMessage(null)}}else ye=function(){K(I,0)};function Q(){J||(J=!0,ye())}function oe(j,ie){w=K(function(){j(u.unstable_now())},ie)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(j){j.callback=null},u.unstable_continueExecution=function(){F||x||(F=!0,Q())},u.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<j?Math.floor(1e3/j):5},u.unstable_getCurrentPriorityLevel=function(){return A},u.unstable_getFirstCallbackNode=function(){return o(v)},u.unstable_next=function(j){switch(A){case 1:case 2:case 3:var ie=3;break;default:ie=A}var se=A;A=ie;try{return j()}finally{A=se}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(j,ie){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var se=A;A=j;try{return ie()}finally{A=se}},u.unstable_scheduleCallback=function(j,ie,se){var te=u.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?te+se:te):se=te,j){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=se+P,j={id:b++,callback:ie,priorityLevel:j,startTime:se,expirationTime:P,sortIndex:-1},se>te?(j.sortIndex=se,l(M,j),o(v)===null&&j===o(M)&&(ne?(D(w),w=-1):ne=!0,oe($,se-te))):(j.sortIndex=P,l(v,j),F||x||(F=!0,Q())),j},u.unstable_shouldYield=G,u.unstable_wrapCallback=function(j){var ie=A;return function(){var se=A;A=ie;try{return j.apply(this,arguments)}finally{A=se}}}})(Tr)),Tr}var Nf;function ah(){return Nf||(Nf=1,_r.exports=Od()),_r.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df;function Cd(){return Df||(Df=1,(function(u){u.exports=function(l){function o(e,t,a,n){return new Ih(e,t,a,n)}function s(){}function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(e){return e===null||typeof e!="object"?null:(e=Bc&&e[Bc]||e["@@iterator"],typeof e=="function"?e:null)}function y(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ap?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _l:return"Fragment";case Ml:return"Portal";case Us:return"Profiler";case Uc:return"StrictMode";case js:return"Suspense";case Bs:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Cn:return(e.displayName||"Context")+".Provider";case Hc:return(e._context.displayName||"Context")+".Consumer";case Hs:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ys:return t=e.displayName||null,t!==null?t:y(e.type)||"Memo";case Rn:t=e._payload,e=e._init;try{return y(e(t))}catch{}}return null}function d(e){if(Zs===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Zs=t&&t[1]||"",Yc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zs+e+Yc}function v(e,t){if(!e||Xs)return"";Xs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(je){var Ee=je}Reflect.construct(e,[],ge)}else{try{ge.call()}catch(je){Ee=je}e.call(ge.prototype)}}else{try{throw Error()}catch(je){Ee=je}(ge=e())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(je){if(je&&Ee&&typeof je.stack=="string")return[je.stack,Ee.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),p=r[0],E=r[1];if(p&&E){var C=p.split(`
`),V=E.split(`
`);for(i=n=0;n<C.length&&!C[n].includes("DetermineComponentFrameRoot");)n++;for(;i<V.length&&!V[i].includes("DetermineComponentFrameRoot");)i++;if(n===C.length||i===V.length)for(n=C.length-1,i=V.length-1;1<=n&&0<=i&&C[n]!==V[i];)i--;for(;1<=n&&0<=i;n--,i--)if(C[n]!==V[i]){if(n!==1||i!==1)do if(n--,i--,0>i||C[n]!==V[i]){var pe=`
`+C[n].replace(" at new "," at ");return e.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",e.displayName)),pe}while(1<=n&&0<=i);break}}}finally{Xs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?d(a):""}function M(e){switch(e.tag){case 26:case 27:case 5:return d(e.type);case 16:return d("Lazy");case 13:return d("Suspense");case 19:return d("SuspenseList");case 0:case 15:return e=v(e.type,!1),e;case 11:return e=v(e.type.render,!1),e;case 1:return e=v(e.type,!0),e;default:return""}}function b(e){try{var t="";do t+=M(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function g(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function A(e){if(g(e)!==e)throw Error(c(188))}function x(e){var t=e.alternate;if(!t){if(t=g(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,n=t;;){var i=a.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===a)return A(i),e;if(r===n)return A(i),t;r=r.sibling}throw Error(c(188))}if(a.return!==n.return)a=i,n=r;else{for(var p=!1,E=i.child;E;){if(E===a){p=!0,a=i,n=r;break}if(E===n){p=!0,n=i,a=r;break}E=E.sibling}if(!p){for(E=r.child;E;){if(E===a){p=!0,a=r,n=i;break}if(E===n){p=!0,n=r,a=i;break}E=E.sibling}if(!p)throw Error(c(189))}}if(a.alternate!==n)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function F(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=F(e),t!==null)return t;e=e.sibling}return null}function ne(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(t=ne(e),t!==null))return t;e=e.sibling}return null}function K(e){return{current:e}}function D(e){0>zl||(e.current=Ks[zl],Ks[zl]=null,zl--)}function T(e,t){zl++,Ks[zl]=e.current,e.current=t}function W(e){return e>>>=0,e===0?32:31-(ym(e)/gm|0)|0}function $(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function J(e,t){var a=e.pendingLanes;if(a===0)return 0;var n=0,i=e.suspendedLanes,r=e.pingedLanes,p=e.warmLanes;e=e.finishedLanes!==0;var E=a&134217727;return E!==0?(a=E&~i,a!==0?n=$(a):(r&=E,r!==0?n=$(r):e||(p=E&~p,p!==0&&(n=$(p))))):(E=a&~i,E!==0?n=$(E):r!==0?n=$(r):e||(p=a&~p,p!==0&&(n=$(p)))),n===0?0:t!==0&&t!==n&&(t&i)===0&&(i=n&-n,p=t&-t,i>=p||i===32&&(p&4194176)!==0)?t:n}function w(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function k(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z(){var e=nu;return nu<<=1,(nu&4194176)===0&&(nu=128),e}function G(){var e=lu;return lu<<=1,(lu&62914560)===0&&(lu=4194304),e}function I(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ye(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _e(e,t,a,n,i,r){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,C=e.expirationTimes,V=e.hiddenUpdates;for(a=p&~a;0<a;){var pe=31-ia(a),ge=1<<pe;E[pe]=0,C[pe]=-1;var Ee=V[pe];if(Ee!==null)for(V[pe]=null,pe=0;pe<Ee.length;pe++){var je=Ee[pe];je!==null&&(je.lane&=-536870913)}a&=~ge}n!==0&&q(e,n,0),r!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=r&~(p&~t))}function q(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-ia(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&4194218}function Q(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-ia(a),i=1<<n;i&t|e[n]&t&&(e[n]|=t),a&=~i}}function oe(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function j(e){if(ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot(mi,e,void 0,(e.current.flags&128)===128)}catch{}}function ie(e){if(typeof _m=="function"&&Tm(e),ua&&typeof ua.setStrictMode=="function")try{ua.setStrictMode(mi,e)}catch{}}function se(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}function te(e,t){if(typeof e=="object"&&e!==null){var a=ff.get(e);return a!==void 0?a:(t={value:e,source:t,stack:b(t)},ff.set(e,t),t)}return{value:e,source:t,stack:b(t)}}function P(e,t){Ol[Cl++]=su,Ol[Cl++]=uu,uu=e,su=t}function L(e,t,a){va[ya++]=un,va[ya++]=sn,va[ya++]=al,al=e;var n=un;e=sn;var i=32-ia(n)-1;n&=~(1<<i),a+=1;var r=32-ia(t)+i;if(30<r){var p=i-i%5;r=(n&(1<<p)-1).toString(32),n>>=p,i-=p,un=1<<32-ia(t)+i|a<<i|n,sn=r+e}else un=1<<r|a<<i|n,sn=e}function ae(e){e.return!==null&&(P(e,1),L(e,1,0))}function be(e){for(;e===uu;)uu=Ol[--Cl],Ol[Cl]=null,su=Ol[--Cl],Ol[Cl]=null;for(;e===al;)al=va[--ya],va[ya]=null,sn=va[--ya],va[ya]=null,un=va[--ya],va[ya]=null}function _(e,t){T(Dn,t),T(di,e),T(Dt,null),e=ip(t),D(Dt),T(Dt,e)}function Ne(){D(Dt),D(di),D(Dn)}function Ae(e){e.memoizedState!==null&&T(ru,e);var t=Dt.current,a=up(t,e.type);t!==a&&(T(di,e),T(Dt,a))}function Ke(e){di.current===e&&(D(Dt),D(di)),ru.current===e&&(D(ru),ln?tl._currentValue=Tl:tl._currentValue2=Tl)}function rt(e){var t=Error(c(418,""));throw Ta(te(t,e)),Fs}function zt(e,t){if(!ma)throw Error(c(175));$p(e.stateNode,e.type,e.memoizedProps,t,e)||rt(e)}function xa(e){for(qt=e.return;qt;)switch(qt.tag){case 3:case 27:qa=!0;return;case 5:case 13:qa=!1;return;default:qt=qt.return}}function wa(e){if(!ma||e!==qt)return!1;if(!Ge)return xa(e),Ge=!0,!1;var t=!1;if(Bt?e.tag!==3&&e.tag!==27&&(e.tag!==5||$c(e.type)&&!au(e.type,e.memoizedProps))&&(t=!0):e.tag!==3&&(e.tag!==5||$c(e.type)&&!au(e.type,e.memoizedProps))&&(t=!0),t&&Yt&&rt(e),xa(e),e.tag===13){if(!ma)throw Error(c(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Yt=am(e)}else Yt=qt?Wc(e.stateNode):null;return!0}function Ua(){ma&&(Yt=qt=null,Ge=!1)}function Ta(e){Ca===null?Ca=[e]:Ca.push(e)}function Ha(){for(var e=Rl,t=Is=Rl=0;t<e;){var a=ga[t];ga[t++]=null;var n=ga[t];ga[t++]=null;var i=ga[t];ga[t++]=null;var r=ga[t];if(ga[t++]=null,n!==null&&i!==null){var p=n.pending;p===null?i.next=i:(i.next=p.next,p.next=i),n.pending=i}r!==0&&Gn(a,i,r)}}function Fa(e,t,a,n){ga[Rl++]=e,ga[Rl++]=t,ga[Rl++]=a,ga[Rl++]=n,Is|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function qn(e,t,a,n){return Fa(e,t,a,n),Ia(e)}function It(e,t){return Fa(e,null,null,t),Ia(e)}function Gn(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var i=!1,r=e.return;r!==null;)r.childLanes|=a,n=r.alternate,n!==null&&(n.childLanes|=a),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(i=!0)),e=r,r=r.return;i&&t!==null&&e.tag===3&&(r=e.stateNode,i=31-ia(a),r=r.hiddenUpdates,e=r[i],e===null?r[i]=[t]:e.push(t),t.lane=a|536870912)}function Ia(e){if(50<Ti)throw Ti=0,hr=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}function Lt(e){e!==Nl&&e.next===null&&(Nl===null?ou=Nl=e:Nl=Nl.next=e),cu=!0,Ws||(Ws=!0,ei(vl))}function ja(e,t){if(!ks&&cu){ks=!0;do for(var a=!1,n=ou;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var r=0;else{var p=n.suspendedLanes,E=n.pingedLanes;r=(1<<31-ia(42|e)+1)-1,r&=i&~(p&~E),r=r&201326677?r&201326677|1:r?r|2:0}r!==0&&(a=!0,vn(n,r))}else r=Qe,r=J(n,n===it?r:0),(r&3)===0||w(n,r)||(a=!0,vn(n,r));n=n.next}while(a);ks=!1}}function vl(){cu=Ws=!1;var e=0;Dl!==0&&(mp()&&(e=Dl),Dl=0);for(var t=Oa(),a=null,n=ou;n!==null;){var i=n.next,r=Wa(n,t);r===0?(n.next=null,a===null?ou=i:a.next=i,i===null&&(Nl=a)):(a=n,(e!==0||(r&3)!==0)&&(cu=!0)),n=i}ja(e)}function Wa(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var p=31-ia(r),E=1<<p,C=i[p];C===-1?((E&a)===0||(E&n)!==0)&&(i[p]=k(E,t)):C<=t&&(e.expiredLanes|=E),r&=~E}if(t=it,a=Qe,a=J(e,e===t?a:0),n=e.callbackNode,a===0||e===t&&ut===2||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Ps(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||w(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&Ps(n),oe(a)){case 2:case 8:a=bm;break;case 32:a=Js;break;case 268435456:a=Mm;break;default:a=Js}return n=Ba.bind(null,e),a=iu(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&Ps(n),e.callbackPriority=2,e.callbackNode=null,2}function Ba(e,t){var a=e.callbackNode;if(kn()&&e.callbackNode!==a)return null;var n=Qe;return n=J(e,e===it?n:0),n===0?null:(pc(e,n,t),Wa(e,Oa()),e.callbackNode!=null&&e.callbackNode===a?Ba.bind(null,e):null)}function vn(e,t){if(kn())return null;pc(e,t,!0)}function ei(e){Sp?bp(function(){(tt&6)!==0?iu(cf,e):e()}):iu(cf,e)}function yn(){return Dl===0&&(Dl=Z()),Dl}function gn(e,t){if(vi===null){var a=vi=[];$s=0,xl=yn(),wl={status:"pending",value:void 0,then:function(n){a.push(n)}}}return $s++,t.then(ka,ka),t}function ka(){if(--$s===0&&vi!==null){wl!==null&&(wl.status="fulfilled");var e=vi;vi=null,xl=0,wl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ti(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}function En(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ln(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function lt(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(tt&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=Ia(e),Gn(e,null,a),t}return Fa(e,n,t,a),Ia(e)}function ha(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194176)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Q(e,a)}}function z(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};r===null?i=r=p:r=r.next=p,a=a.next}while(a!==null);r===null?i=r=t:r=r.next=t}else i=r=t;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function ue(){if(er){var e=wl;if(e!==null)throw e}}function Se(e,t,a,n){er=!1;var i=e.updateQueue;xn=!1;var r=i.firstBaseUpdate,p=i.lastBaseUpdate,E=i.shared.pending;if(E!==null){i.shared.pending=null;var C=E,V=C.next;C.next=null,p===null?r=V:p.next=V,p=C;var pe=e.alternate;pe!==null&&(pe=pe.updateQueue,E=pe.lastBaseUpdate,E!==p&&(E===null?pe.firstBaseUpdate=V:E.next=V,pe.lastBaseUpdate=C))}if(r!==null){var ge=i.baseState;p=0,pe=V=C=null,E=r;do{var Ee=E.lane&-536870913,je=Ee!==E.lane;if(je?(Qe&Ee)===Ee:(n&Ee)===Ee){Ee!==0&&Ee===xl&&(er=!0),pe!==null&&(pe=pe.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ba=e,zi=E;Ee=t;var fl=a;switch(zi.tag){case 1:if(ba=zi.payload,typeof ba=="function"){ge=ba.call(fl,ge,Ee);break e}ge=ba;break e;case 3:ba.flags=ba.flags&-65537|128;case 0:if(ba=zi.payload,Ee=typeof ba=="function"?ba.call(fl,ge,Ee):ba,Ee==null)break e;ge=ws({},ge,Ee);break e;case 2:xn=!0}}Ee=E.callback,Ee!==null&&(e.flags|=64,je&&(e.flags|=8192),je=i.callbacks,je===null?i.callbacks=[Ee]:je.push(Ee))}else je={lane:Ee,tag:E.tag,payload:E.payload,callback:E.callback,next:null},pe===null?(V=pe=je,C=ge):pe=pe.next=je,p|=Ee;if(E=E.next,E===null){if(E=i.shared.pending,E===null)break;je=E,E=je.next,je.next=null,i.lastBaseUpdate=je,i.shared.pending=null}}while(!0);pe===null&&(C=ge),i.baseState=C,i.firstBaseUpdate=V,i.lastBaseUpdate=pe,r===null&&(i.shared.lanes=0),Hn|=p,e.lanes=p,e.memoizedState=ge}}function Xe(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function he(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Xe(a[e],t)}function Et(e,t){if(sa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!zm.call(t,i)||!sa(e[i],t[i]))return!1}return!0}function Wt(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vn(){}function Kn(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Vn,Vn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===yi?Error(c(483)):e;default:if(typeof t.status=="string")t.then(Vn,Vn);else{if(e=it,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=n}},function(n){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===yi?Error(c(483)):e}throw Ul=t,yi}}function Vt(){if(Ul===null)throw Error(c(459));var e=Ul;return Ul=null,e}function wt(e){var t=gi;return gi+=1,Hl===null&&(Hl=[]),Kn(Hl,e,t)}function kt(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function pa(e,t){throw t.$$typeof===$h?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ya(e){var t=e._init;return t(e._payload)}function $a(e){function t(R,O){if(e){var U=R.deletions;U===null?(R.deletions=[O],R.flags|=16):U.push(O)}}function a(R,O){if(!e)return null;for(;O!==null;)t(R,O),O=O.sibling;return null}function n(R){for(var O=new Map;R!==null;)R.key!==null?O.set(R.key,R):O.set(R.index,R),R=R.sibling;return O}function i(R,O){return R=On(R,O),R.index=0,R.sibling=null,R}function r(R,O,U){return R.index=U,e?(U=R.alternate,U!==null?(U=U.index,U<O?(R.flags|=33554434,O):U):(R.flags|=33554434,O)):(R.flags|=1048576,O)}function p(R){return e&&R.alternate===null&&(R.flags|=33554434),R}function E(R,O,U,ce){return O===null||O.tag!==6?(O=Ns(U,R.mode,ce),O.return=R,O):(O=i(O,U),O.return=R,O)}function C(R,O,U,ce){var Oe=U.type;return Oe===_l?pe(R,O,U.props.children,ce,U.key):O!==null&&(O.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Rn&&Ya(Oe)===O.type)?(O=i(O,U.props),kt(O,U),O.return=R,O):(O=$i(U.type,U.key,U.props,null,R.mode,ce),kt(O,U),O.return=R,O)}function V(R,O,U,ce){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Ds(U,R.mode,ce),O.return=R,O):(O=i(O,U.children||[]),O.return=R,O)}function pe(R,O,U,ce,Oe){return O===null||O.tag!==7?(O=$n(U,R.mode,ce,Oe),O.return=R,O):(O=i(O,U),O.return=R,O)}function ge(R,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ns(""+O,R.mode,U),O.return=R,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case eu:return U=$i(O.type,O.key,O.props,null,R.mode,U),kt(U,O),U.return=R,U;case Ml:return O=Ds(O,R.mode,U),O.return=R,O;case Rn:var ce=O._init;return O=ce(O._payload),ge(R,O,U)}if(tu(O)||h(O))return O=$n(O,R.mode,U,null),O.return=R,O;if(typeof O.then=="function")return ge(R,wt(O),U);if(O.$$typeof===Cn)return ge(R,Pi(R,O),U);pa(R,O)}return null}function Ee(R,O,U,ce){var Oe=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return Oe!==null?null:E(R,O,""+U,ce);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case eu:return U.key===Oe?C(R,O,U,ce):null;case Ml:return U.key===Oe?V(R,O,U,ce):null;case Rn:return Oe=U._init,U=Oe(U._payload),Ee(R,O,U,ce)}if(tu(U)||h(U))return Oe!==null?null:pe(R,O,U,ce,null);if(typeof U.then=="function")return Ee(R,O,wt(U),ce);if(U.$$typeof===Cn)return Ee(R,O,Pi(R,U),ce);pa(R,U)}return null}function je(R,O,U,ce,Oe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return R=R.get(U)||null,E(O,R,""+ce,Oe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case eu:return R=R.get(ce.key===null?U:ce.key)||null,C(O,R,ce,Oe);case Ml:return R=R.get(ce.key===null?U:ce.key)||null,V(O,R,ce,Oe);case Rn:var ot=ce._init;return ce=ot(ce._payload),je(R,O,U,ce,Oe)}if(tu(ce)||h(ce))return R=R.get(U)||null,pe(O,R,ce,Oe,null);if(typeof ce.then=="function")return je(R,O,U,wt(ce),Oe);if(ce.$$typeof===Cn)return je(R,O,U,Pi(O,ce),Oe);pa(O,ce)}return null}function ba(R,O,U,ce){for(var Oe=null,ot=null,De=O,Le=O=0,Rt=null;De!==null&&Le<U.length;Le++){De.index>Le?(Rt=De,De=null):Rt=De.sibling;var Ve=Ee(R,De,U[Le],ce);if(Ve===null){De===null&&(De=Rt);break}e&&De&&Ve.alternate===null&&t(R,De),O=r(Ve,O,Le),ot===null?Oe=Ve:ot.sibling=Ve,ot=Ve,De=Rt}if(Le===U.length)return a(R,De),Ge&&P(R,Le),Oe;if(De===null){for(;Le<U.length;Le++)De=ge(R,U[Le],ce),De!==null&&(O=r(De,O,Le),ot===null?Oe=De:ot.sibling=De,ot=De);return Ge&&P(R,Le),Oe}for(De=n(De);Le<U.length;Le++)Rt=je(De,R,Le,U[Le],ce),Rt!==null&&(e&&Rt.alternate!==null&&De.delete(Rt.key===null?Le:Rt.key),O=r(Rt,O,Le),ot===null?Oe=Rt:ot.sibling=Rt,ot=Rt);return e&&De.forEach(function(Bn){return t(R,Bn)}),Ge&&P(R,Le),Oe}function zi(R,O,U,ce){if(U==null)throw Error(c(151));for(var Oe=null,ot=null,De=O,Le=O=0,Rt=null,Ve=U.next();De!==null&&!Ve.done;Le++,Ve=U.next()){De.index>Le?(Rt=De,De=null):Rt=De.sibling;var Bn=Ee(R,De,Ve.value,ce);if(Bn===null){De===null&&(De=Rt);break}e&&De&&Bn.alternate===null&&t(R,De),O=r(Bn,O,Le),ot===null?Oe=Bn:ot.sibling=Bn,ot=Bn,De=Rt}if(Ve.done)return a(R,De),Ge&&P(R,Le),Oe;if(De===null){for(;!Ve.done;Le++,Ve=U.next())Ve=ge(R,Ve.value,ce),Ve!==null&&(O=r(Ve,O,Le),ot===null?Oe=Ve:ot.sibling=Ve,ot=Ve);return Ge&&P(R,Le),Oe}for(De=n(De);!Ve.done;Le++,Ve=U.next())Ve=je(De,R,Le,Ve.value,ce),Ve!==null&&(e&&Ve.alternate!==null&&De.delete(Ve.key===null?Le:Ve.key),O=r(Ve,O,Le),ot===null?Oe=Ve:ot.sibling=Ve,ot=Ve);return e&&De.forEach(function(xm){return t(R,xm)}),Ge&&P(R,Le),Oe}function fl(R,O,U,ce){if(typeof U=="object"&&U!==null&&U.type===_l&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case eu:e:{for(var Oe=U.key;O!==null;){if(O.key===Oe){if(Oe=U.type,Oe===_l){if(O.tag===7){a(R,O.sibling),ce=i(O,U.props.children),ce.return=R,R=ce;break e}}else if(O.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Rn&&Ya(Oe)===O.type){a(R,O.sibling),ce=i(O,U.props),kt(ce,U),ce.return=R,R=ce;break e}a(R,O);break}else t(R,O);O=O.sibling}U.type===_l?(ce=$n(U.props.children,R.mode,ce,U.key),ce.return=R,R=ce):(ce=$i(U.type,U.key,U.props,null,R.mode,ce),kt(ce,U),ce.return=R,R=ce)}return p(R);case Ml:e:{for(Oe=U.key;O!==null;){if(O.key===Oe)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(R,O.sibling),ce=i(O,U.children||[]),ce.return=R,R=ce;break e}else{a(R,O);break}else t(R,O);O=O.sibling}ce=Ds(U,R.mode,ce),ce.return=R,R=ce}return p(R);case Rn:return Oe=U._init,U=Oe(U._payload),fl(R,O,U,ce)}if(tu(U))return ba(R,O,U,ce);if(h(U)){if(Oe=h(U),typeof Oe!="function")throw Error(c(150));return U=Oe.call(U),zi(R,O,U,ce)}if(typeof U.then=="function")return fl(R,O,wt(U),ce);if(U.$$typeof===Cn)return fl(R,O,Pi(R,U),ce);pa(R,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(R,O.sibling),ce=i(O,U),ce.return=R,R=ce):(a(R,O),ce=Ns(U,R.mode,ce),ce.return=R,R=ce),p(R)):a(R,O)}return function(R,O,U,ce){try{gi=0;var Oe=fl(R,O,U,ce);return Hl=null,Oe}catch(De){if(De===yi)throw De;var ot=o(29,De,null,R.mode);return ot.lanes=ce,ot.return=R,ot}finally{}}}function Qi(e,t){e=fn,T(hu,e),T(jl,t),fn=e|t.baseLanes}function ai(){T(hu,fn),T(jl,jl.current)}function Sn(){fn=hu.current,D(jl),D(hu)}function Za(e){var t=e.alternate;T(Tt,Tt.current&1),T(Ea,e),Ga===null&&(t===null||jl.current!==null||t.memoizedState!==null)&&(Ga=e)}function bn(e){if(e.tag===22){if(T(Tt,Tt.current),T(Ea,e),Ga===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ga=e)}}else Kt()}function Kt(){T(Tt,Tt.current),T(Ea,Ea.current)}function we(e){D(Ea),Ga===e&&(Ga=null),D(Tt)}function Pn(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gs(a)||Ls(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ht(){throw Error(c(321))}function f(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!sa(e[a],t[a]))return!1;return!0}function m(e,t,a,n,i,r){return wn=r,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ue.H=e===null||e.memoizedState===null?il:Un,ll=!1,r=a(n,i),ll=!1,Bl&&(r=N(t,a,n,i)),S(e),r}function S(e){Ue.H=La;var t=et!==null&&et.next!==null;if(wn=0,bt=et=Be=null,pu=!1,Ei=0,Yl=null,t)throw Error(c(300));e===null||Ot||(e=e.dependencies,e!==null&&Ki(e)&&(Ot=!0))}function N(e,t,a,n){Be=e;var i=0;do{if(Bl&&(Yl=null),Ei=0,Bl=!1,25<=i)throw Error(c(301));if(i+=1,bt=et=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Ue.H=ul,r=t(a,n)}while(Bl);return r}function Y(){var e=Ue.H,t=e.useState()[0];return t=typeof t.then=="function"?ve(t):t,e=e.useState()[0],(et!==null?et.memoizedState:null)!==e&&(Be.flags|=1024),t}function B(){var e=mu!==0;return mu=0,e}function fe(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function le(e){if(pu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pu=!1}wn=0,bt=et=Be=null,Bl=!1,Ei=mu=0,Yl=null}function re(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Be.memoizedState=bt=e:bt=bt.next=e,bt}function ee(){if(et===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=bt===null?Be.memoizedState:bt.next;if(t!==null)bt=t,et=e;else{if(e===null)throw Be.alternate===null?Error(c(467)):Error(c(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},bt===null?Be.memoizedState=bt=e:bt=bt.next=e}return bt}function ve(e){var t=Ei;return Ei+=1,Yl===null&&(Yl=[]),e=Kn(Yl,e,t),t=Be,(bt===null?t.memoizedState:bt.next)===null&&(t=t.alternate,Ue.H=t===null||t.memoizedState===null?il:Un),e}function me(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ve(e);if(e.$$typeof===Cn)return Ht(e)}throw Error(c(438,String(e)))}function at(e){var t=null,a=Be.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=Be.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=ar(),Be.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=tp;return t.index++,a}function Me(e,t){return typeof t=="function"?t(e):t}function ze(e){var t=ee();return xe(t,et,e)}function xe(e,t,a){var n=e.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=a;var i=e.baseQueue,r=n.pending;if(r!==null){if(i!==null){var p=i.next;i.next=r.next,r.next=p}t.baseQueue=i=r,n.pending=null}if(r=e.baseState,i===null)e.memoizedState=r;else{t=i.next;var E=p=null,C=null,V=t,pe=!1;do{var ge=V.lane&-536870913;if(ge!==V.lane?(Qe&ge)===ge:(wn&ge)===ge){var Ee=V.revertLane;if(Ee===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ge===xl&&(pe=!0);else if((wn&Ee)===Ee){V=V.next,Ee===xl&&(pe=!0);continue}else ge={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},C===null?(E=C=ge,p=r):C=C.next=ge,Be.lanes|=Ee,Hn|=Ee;ge=V.action,ll&&a(r,ge),r=V.hasEagerState?V.eagerState:a(r,ge)}else Ee={lane:ge,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},C===null?(E=C=Ee,p=r):C=C.next=Ee,Be.lanes|=ge,Hn|=ge;V=V.next}while(V!==null&&V!==t);if(C===null?p=r:C.next=E,!sa(r,e.memoizedState)&&(Ot=!0,pe&&(a=wl,a!==null)))throw a;e.memoizedState=r,e.baseState=p,e.baseQueue=C,n.lastRenderedState=r}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function He(e){var t=ee(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,r=t.memoizedState;if(i!==null){a.pending=null;var p=i=i.next;do r=e(r,p.action),p=p.next;while(p!==i);sa(r,t.memoizedState)||(Ot=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),a.lastRenderedState=r}return[r,n]}function Je(e,t,a){var n=Be,i=ee(),r=Ge;if(r){if(a===void 0)throw Error(c(407));a=a()}else a=t();var p=!sa((et||i).memoizedState,a);if(p&&(i.memoizedState=a,Ot=!0),i=i.queue,Ku(At.bind(null,n,i,e),[e]),i.getSnapshot!==t||p||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,yl(9,mt.bind(null,n,i,a,t),{destroy:void 0},null),it===null)throw Error(c(349));r||(wn&60)!==0||Ie(n,t,a)}return a}function Ie(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Be.updateQueue,t===null?(t=ar(),Be.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function mt(e,t,a,n){t.value=a,t.getSnapshot=n,We(t)&&$t(e)}function At(e,t,a){return a(function(){We(t)&&$t(e)})}function We(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!sa(e,a)}catch{return!0}}function $t(e){var t=It(e,2);t!==null&&Qt(t,e,2)}function ke(e){var t=re();if(typeof e=="function"){var a=e;if(e=a(),ll){ie(!0);try{a()}finally{ie(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:e},t}function gt(e,t,a,n){return e.baseState=a,xe(e,et,typeof n=="function"?n:Me)}function za(e,t,a,n,i){if(Li(e))throw Error(c(485));if(e=t.action,e!==null){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){r.listeners.push(p)}};Ue.T!==null?a(!0):r.isTransition=!1,n(r),a=t.pending,a===null?(r.next=t.pending=r,Mn(t,r)):(r.next=a.next,t.pending=a.next=r)}}function Mn(e,t){var a=t.action,n=t.payload,i=e.state;if(t.isTransition){var r=Ue.T,p={};Ue.T=p;try{var E=a(i,n),C=Ue.S;C!==null&&C(p,E),Zt(e,t,E)}catch(V){St(e,t,V)}finally{Ue.T=r}}else try{r=a(i,n),Zt(e,t,r)}catch(V){St(e,t,V)}}function Zt(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Fe(e,t,n)},function(n){return St(e,t,n)}):Fe(e,t,a)}function Fe(e,t,a){t.status="fulfilled",t.value=a,nt(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Mn(e,a)))}function St(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,nt(t),t=t.next;while(t!==n)}e.action=null}function nt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qe(e,t){return t}function Xt(e,t){if(Ge){var a=it.formState;if(a!==null){e:{var n=Be;if(Ge){if(Yt){var i=Kp(Yt,qa);if(i){Yt=Wc(i),n=Pp(i);break e}}rt(n)}n=!1}n&&(t=a[0])}}a=re(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:t},a.queue=n,a=Mo.bind(null,Be,n),n.dispatch=a,n=ke(!1);var r=Iu.bind(null,Be,!1,n.queue);return n=re(),i={state:t,dispatch:null,action:e,pending:null},n.queue=i,a=za.bind(null,Be,i,r,a),i.dispatch=a,n.memoizedState=e,[t,a,!1]}function Xa(e){var t=ee();return Ut(t,et,e)}function Ut(e,t,a){t=xe(e,t,qe)[0],e=ze(Me)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?ve(t):t;var n=ee(),i=n.queue,r=i.dispatch;return a!==n.memoizedState&&(Be.flags|=2048,yl(9,Qa.bind(null,i,a),{destroy:void 0},null)),[t,r,e]}function Qa(e,t){e.action=t}function so(e){var t=ee(),a=et;if(a!==null)return Ut(t,a,e);ee(),t=t.memoizedState,a=ee();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function yl(e,t,a,n){return e={tag:e,create:t,inst:a,deps:n,next:null},t=Be.updateQueue,t===null&&(t=ar(),Be.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function ro(){return ee().memoizedState}function qi(e,t,a,n){var i=re();Be.flags|=e,i.memoizedState=yl(1|t,a,{destroy:void 0},n===void 0?null:n)}function Gi(e,t,a,n){var i=ee();n=n===void 0?null:n;var r=i.memoizedState.inst;et!==null&&n!==null&&f(n,et.memoizedState.deps)?i.memoizedState=yl(t,a,r,n):(Be.flags|=e,i.memoizedState=yl(1|t,a,r,n))}function oo(e,t){qi(8390656,8,e,t)}function Ku(e,t){Gi(2048,8,e,t)}function co(e,t){return Gi(4,2,e,t)}function fo(e,t){return Gi(4,4,e,t)}function ho(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function po(e,t,a){a=a!=null?a.concat([e]):null,Gi(4,4,ho.bind(null,t,e),a)}function Pu(){}function mo(e,t){var a=ee();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&f(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function vo(e,t){var a=ee();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&f(t,n[1]))return n[0];if(n=e(),ll){ie(!0);try{e()}finally{ie(!1)}}return a.memoizedState=[n,t],n}function Ju(e,t,a){return a===void 0||(wn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=hc(),Be.lanes|=e,Hn|=e,a)}function yo(e,t,a,n){return sa(a,t)?a:jl.current!==null?(e=Ju(e,a,n),sa(e,t)||(Ot=!0),e):(wn&42)===0?(Ot=!0,e.memoizedState=a):(e=hc(),Be.lanes|=e,Hn|=e,t)}function go(e,t,a,n,i){var r=el();Jt(r!==0&&8>r?r:8);var p=Ue.T,E={};Ue.T=E,Iu(e,!1,t,a);try{var C=i(),V=Ue.S;if(V!==null&&V(E,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var pe=ti(C,n);ni(e,t,pe,na(e))}else ni(e,t,n,na(e))}catch(ge){ni(e,t,{then:function(){},status:"rejected",reason:ge},na())}finally{Jt(r),Ue.T=p}}function Eo(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Tl,baseState:Tl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:Tl},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Fu(){return Ht(tl)}function So(){return ee().memoizedState}function bo(){return ee().memoizedState}function wh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=na();e=xt(a);var n=lt(t,e,a);n!==null&&(Qt(n,t,a),ha(n,t,a)),t={cache:os()},e.payload=t;return}t=t.return}}function Uh(e,t,a){var n=na();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Li(e)?_o(t,a):(a=qn(e,t,a,n),a!==null&&(Qt(a,e,n),To(a,t,n)))}function Mo(e,t,a){var n=na();ni(e,t,a,n)}function ni(e,t,a,n){var i={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Li(e))_o(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var p=t.lastRenderedState,E=r(p,a);if(i.hasEagerState=!0,i.eagerState=E,sa(E,p))return Fa(e,t,i,0),it===null&&Ha(),!1}catch{}finally{}if(a=qn(e,t,i,n),a!==null)return Qt(a,e,n),To(a,t,n),!0}return!1}function Iu(e,t,a,n){if(n={lane:2,revertLane:yn(),action:n,hasEagerState:!1,eagerState:null,next:null},Li(e)){if(t)throw Error(c(479))}else t=qn(e,a,n,2),t!==null&&Qt(t,e,2)}function Li(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function _o(e,t){Bl=pu=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function To(e,t,a){if((a&4194176)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,Q(e,a)}}function Wu(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:ws({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}function zo(e,t,a,n,i,r,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,r,p):t.prototype&&t.prototype.isPureReactComponent?!Et(a,n)||!Et(i,r):!0}function Ao(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&nr.enqueueReplaceState(t,t.state,null)}function Jn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=ws({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function Vi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Oo(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ku(e,t,a){return a=xt(a),a.tag=3,a.payload={element:null},a.callback=function(){Vi(e,t)},a}function Co(e){return e=xt(e),e.tag=3,e}function Ro(e,t,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var r=n.value;e.payload=function(){return i(r)},e.callback=function(){Oo(t,a,n)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Oo(t,a,n),typeof i!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var E=n.stack;this.componentDidCatch(n.value,{componentStack:E!==null?E:""})})}function Hh(e,t,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&ii(t,a,i,!0),a=Ea.current,a!==null){switch(a.tag){case 13:return Ga===null?As():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===fu?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),Cs(e,n,i)),!1;case 22:return a.flags|=65536,n===fu?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),Cs(e,n,i)),!1}throw Error(c(435,a.tag))}return Cs(e,n,i),As(),!1}if(Ge)return t=Ea.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==Fs&&(e=Error(c(422),{cause:n}),Ta(te(e,a)))):(n!==Fs&&(t=Error(c(423),{cause:n}),Ta(te(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=te(n,a),i=ku(e.stateNode,n,i),z(e,i),yt!==4&&(yt=2)),!1;var r=Error(c(520),{cause:n});if(r=te(r,a),bi===null?bi=[r]:bi.push(r),yt!==4&&(yt=2),t===null)return!0;n=te(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=ku(a.stateNode,n,e),z(a,e),!1;case 1:if(t=a.type,r=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))))return a.flags|=65536,i&=-i,a.lanes|=i,i=Co(i),Ro(i,e,a,n),z(a,i),!1}a=a.return}while(a!==null);return!1}function Nt(e,t,a,n){t.child=e===null?hf(t,null,a,n):nl(t,e.child,a,n)}function No(e,t,a,n,i){a=a.render;var r=t.ref;if("ref"in n){var p={};for(var E in n)E!=="ref"&&(p[E]=n[E])}else p=n;return Fn(t),n=m(e,t,a,p,r,i),E=B(),e!==null&&!Ot?(fe(e,t,i),en(e,t,i)):(Ge&&E&&ae(t),t.flags|=1,Nt(e,t,n,i),t.child)}function Do(e,t,a,n,i){if(e===null){var r=a.type;return typeof r=="function"&&!Rs(r)&&r.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=r,xo(e,t,r,n,i)):(e=$i(a.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!us(e,i)){var p=r.memoizedProps;if(a=a.compare,a=a!==null?a:Et,a(p,n)&&e.ref===t.ref)return en(e,t,i)}return t.flags|=1,e=On(r,n),e.ref=t.ref,e.return=t,t.child=e}function xo(e,t,a,n,i){if(e!==null){var r=e.memoizedProps;if(Et(r,n)&&e.ref===t.ref)if(Ot=!1,t.pendingProps=n=r,us(e,i))(e.flags&131072)!==0&&(Ot=!0);else return t.lanes=e.lanes,en(e,t,i)}return $u(e,t,a,n,i)}function wo(e,t,a){var n=t.pendingProps,i=n.children,r=(t.stateNode._pendingVisibility&2)!==0,p=e!==null?e.memoizedState:null;if(li(e,t),n.mode==="hidden"||r){if((t.flags&128)!==0){if(n=p!==null?p.baseLanes|a:a,e!==null){for(i=t.child=e.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;t.childLanes=r&~n}else t.childLanes=0,t.child=null;return Uo(e,t,n,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ji(t,p!==null?p.cachePool:null),p!==null?Qi(t,p):ai(),bn(t);else return t.lanes=t.childLanes=536870912,Uo(e,t,p!==null?p.baseLanes|a:a,a)}else p!==null?(Ji(t,p.cachePool),Qi(t,p),Kt(),t.memoizedState=null):(e!==null&&Ji(t,null),ai(),Kt());return Nt(e,t,i,a),t.child}function Uo(e,t,a,n){var i=cs();return i=i===null?null:{parent:ln?dt._currentValue:dt._currentValue2,pool:i},t.memoizedState={baseLanes:a,cachePool:i},e!==null&&Ji(t,null),ai(),bn(t),e!==null&&ii(e,t,n,!0),null}function li(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=2097664)}}function $u(e,t,a,n,i){return Fn(t),a=m(e,t,a,n,void 0,i),n=B(),e!==null&&!Ot?(fe(e,t,i),en(e,t,i)):(Ge&&n&&ae(t),t.flags|=1,Nt(e,t,a,i),t.child)}function Ho(e,t,a,n,i,r){return Fn(t),t.updateQueue=null,a=N(t,n,a,i),S(e),n=B(),e!==null&&!Ot?(fe(e,t,r),en(e,t,r)):(Ge&&n&&ae(t),t.flags|=1,Nt(e,t,a,r),t.child)}function jo(e,t,a,n,i){if(Fn(t),t.stateNode===null){var r=Al,p=a.contextType;typeof p=="object"&&p!==null&&(r=Ht(p)),r=new a(n,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=nr,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=n,r.state=t.memoizedState,r.refs={},En(t),p=a.contextType,r.context=typeof p=="object"&&p!==null?Ht(p):Al,r.state=t.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Wu(t,a,p,n),r.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(p=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),p!==r.state&&nr.enqueueReplaceState(r,r.state,null),Se(t,n,r,i),ue(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){r=t.stateNode;var E=t.memoizedProps,C=Jn(a,E);r.props=C;var V=r.context,pe=a.contextType;p=Al,typeof pe=="object"&&pe!==null&&(p=Ht(pe));var ge=a.getDerivedStateFromProps;pe=typeof ge=="function"||typeof r.getSnapshotBeforeUpdate=="function",E=t.pendingProps!==E,pe||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(E||V!==p)&&Ao(t,r,n,p),xn=!1;var Ee=t.memoizedState;r.state=Ee,Se(t,n,r,i),ue(),V=t.memoizedState,E||Ee!==V||xn?(typeof ge=="function"&&(Wu(t,a,ge,n),V=t.memoizedState),(C=xn||zo(t,a,C,n,Ee,V,p))?(pe||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=V),r.props=n,r.state=V,r.context=p,n=C):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,Ln(e,t),p=t.memoizedProps,pe=Jn(a,p),r.props=pe,ge=t.pendingProps,Ee=r.context,V=a.contextType,C=Al,typeof V=="object"&&V!==null&&(C=Ht(V)),E=a.getDerivedStateFromProps,(V=typeof E=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(p!==ge||Ee!==C)&&Ao(t,r,n,C),xn=!1,Ee=t.memoizedState,r.state=Ee,Se(t,n,r,i),ue();var je=t.memoizedState;p!==ge||Ee!==je||xn||e!==null&&e.dependencies!==null&&Ki(e.dependencies)?(typeof E=="function"&&(Wu(t,a,E,n),je=t.memoizedState),(pe=xn||zo(t,a,pe,n,Ee,je,C)||e!==null&&e.dependencies!==null&&Ki(e.dependencies))?(V||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(n,je,C),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(n,je,C)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||p===e.memoizedProps&&Ee===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&Ee===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=je),r.props=n,r.state=je,r.context=C,n=pe):(typeof r.componentDidUpdate!="function"||p===e.memoizedProps&&Ee===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&Ee===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,li(e,t),n=(t.flags&128)!==0,r||n?(r=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&n?(t.child=nl(t,e.child,null,i),t.child=nl(t,null,a,i)):Nt(e,t,a,i),t.memoizedState=r.state,e=t.child):e=en(e,t,i),e}function Bo(e,t,a,n){return Ua(),t.flags|=256,Nt(e,t,a,n),t.child}function es(e){return{baseLanes:e,cachePool:Go()}}function ts(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Sa),e}function Yo(e,t,a){var n=t.pendingProps,i=!1,r=(t.flags&128)!==0,p;if((p=r)||(p=e!==null&&e.memoizedState===null?!1:(Tt.current&2)!==0),p&&(i=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ge){if(i?Za(t):Kt(),Ge){var E=Yt,C;(C=E)&&(E=kp(E,qa),E!==null?(t.memoizedState={dehydrated:E,treeContext:al!==null?{id:un,overflow:sn}:null,retryLane:536870912},C=o(18,null,null,0),C.stateNode=E,C.return=t,t.child=C,qt=t,Yt=null,C=!0):C=!1),C||rt(t)}if(E=t.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ls(E)?t.lanes=16:t.lanes=536870912,null;we(t)}return E=n.children,n=n.fallback,i?(Kt(),i=t.mode,E=ns({mode:"hidden",children:E},i),n=$n(n,i,a,null),E.return=t,n.return=t,E.sibling=n,t.child=E,i=t.child,i.memoizedState=es(a),i.childLanes=ts(e,p,a),t.memoizedState=lr,n):(Za(t),as(t,E))}if(C=e.memoizedState,C!==null&&(E=C.dehydrated,E!==null)){if(r)t.flags&256?(Za(t),t.flags&=-257,t=ls(e,t,a)):t.memoizedState!==null?(Kt(),t.child=e.child,t.flags|=128,t=null):(Kt(),i=n.fallback,E=t.mode,n=ns({mode:"visible",children:n.children},E),i=$n(i,E,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,nl(t,e.child,null,a),n=t.child,n.memoizedState=es(a),n.childLanes=ts(e,p,a),t.memoizedState=lr,t=i);else if(Za(t),Ls(E))p=Lp(E).digest,n=Error(c(419)),n.stack="",n.digest=p,Ta({value:n,source:null,stack:null}),t=ls(e,t,a);else if(Ot||ii(e,t,a,!1),p=(a&e.childLanes)!==0,Ot||p){if(p=it,p!==null){if(n=a&-a,(n&42)!==0)n=1;else switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=64;break;case 268435456:n=134217728;break;default:n=0}if(n=(n&(p.suspendedLanes|a))!==0?0:n,n!==0&&n!==C.retryLane)throw C.retryLane=n,It(e,n),Qt(p,e,n),mf}Gs(E)||As(),t=ls(e,t,a)}else Gs(E)?(t.flags|=128,t.child=e.child,t=Ph.bind(null,e),Vp(E,t),t=null):(e=C.treeContext,ma&&(Yt=Fp(E),qt=t,Ge=!0,Ca=null,qa=!1,e!==null&&(va[ya++]=un,va[ya++]=sn,va[ya++]=al,un=e.id,sn=e.overflow,al=t)),t=as(t,n.children),t.flags|=4096);return t}return i?(Kt(),i=n.fallback,E=t.mode,C=e.child,r=C.sibling,n=On(C,{mode:"hidden",children:n.children}),n.subtreeFlags=C.subtreeFlags&31457280,r!==null?i=On(r,i):(i=$n(i,E,a,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,E=e.child.memoizedState,E===null?E=es(a):(C=E.cachePool,C!==null?(r=ln?dt._currentValue:dt._currentValue2,C=C.parent!==r?{parent:r,pool:r}:C):C=Go(),E={baseLanes:E.baseLanes|a,cachePool:C}),i.memoizedState=E,i.childLanes=ts(e,p,a),t.memoizedState=lr,n):(Za(t),a=e.child,e=a.sibling,a=On(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=a,t.memoizedState=null,a)}function as(e,t){return t=ns({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ns(e,t){return Cc(e,t,0,null)}function ls(e,t,a){return nl(t,e.child,null,a),e=as(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zo(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ss(e.return,t,a)}function is(e,t,a,n,i){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=a,r.tailMode=i)}function Xo(e,t,a){var n=t.pendingProps,i=n.revealOrder,r=n.tail;if(Nt(e,t,n.children,a),n=Tt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zo(e,a,t);else if(e.tag===19)Zo(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(T(Tt,n),i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&Pn(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),is(t,!1,i,a,r);break;case"backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Pn(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}is(t,!0,a,null,r);break;case"together":is(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function en(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Hn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ii(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=On(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=On(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function us(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ki(e)))}function jh(e,t,a){switch(t.tag){case 3:_(t,t.stateNode.containerInfo),_n(t,dt,e.memoizedState.cache),Ua();break;case 27:case 5:Ae(t);break;case 4:_(t,t.stateNode.containerInfo);break;case 10:_n(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Za(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Yo(e,t,a):(Za(t),e=en(e,t,a),e!==null?e.sibling:null);Za(t);break;case 19:var i=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(ii(e,t,a,!1),n=(a&t.childLanes)!==0),i){if(n)return Xo(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),T(Tt,Tt.current),n)break;return null;case 22:case 23:return t.lanes=0,wo(e,t,a);case 24:_n(t,dt,e.memoizedState.cache)}return en(e,t,a)}function Qo(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ot=!0;else{if(!us(e,a)&&(t.flags&128)===0)return Ot=!1,jh(e,t,a);Ot=(e.flags&131072)!==0}else Ot=!1,Ge&&(t.flags&1048576)!==0&&L(t,su,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,i=n._init;if(n=i(n._payload),t.type=n,typeof n=="function")Rs(n)?(e=Jn(n,e),t.tag=1,t=jo(null,t,n,e,a)):(t.tag=0,t=$u(null,t,n,e,a));else{if(n!=null){if(i=n.$$typeof,i===Hs){t.tag=11,t=No(null,t,n,e,a);break e}else if(i===Ys){t.tag=14,t=Do(null,t,n,e,a);break e}}throw t=y(n)||n,Error(c(306,t,""))}}return t;case 0:return $u(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,i=Jn(n,t.pendingProps),jo(e,t,n,i,a);case 3:e:{if(_(t,t.stateNode.containerInfo),e===null)throw Error(c(387));var r=t.pendingProps;i=t.memoizedState,n=i.element,Ln(e,t),Se(t,r,null,a);var p=t.memoizedState;if(r=p.cache,_n(t,dt,r),r!==i.cache&&rs(t,[dt],a,!0),ue(),r=p.element,ma&&i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Bo(e,t,r,a);break e}else if(r!==n){n=te(Error(c(424)),t),Ta(n),t=Bo(e,t,r,a);break e}else for(ma&&(Yt=Jp(t.stateNode.containerInfo),qt=t,Ge=!0,Ca=null,qa=!0),a=hf(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ua(),r===n){t=en(e,t,a);break e}Nt(e,t,r,a)}t=t.child}return t;case 26:if(da)return li(e,t),e===null?(a=tf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ge||(t.stateNode=cm(t.type,t.pendingProps,Dn.current,t)):t.memoizedState=tf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(Bt)return Ae(t),e===null&&Bt&&Ge&&(n=t.stateNode=rf(t.type,t.pendingProps,Dn.current,Dt.current,!1),qt=t,qa=!0,Yt=kc(n)),n=t.pendingProps.children,e!==null||Ge?Nt(e,t,n,a):t.child=nl(t,null,n,a),li(e,t),t.child;case 5:return e===null&&Ge&&(sm(t.type,t.pendingProps,Dt.current),(i=n=Yt)&&(n=Ip(n,t.type,t.pendingProps,qa),n!==null?(t.stateNode=n,qt=t,Yt=kc(n),qa=!1,i=!0):i=!1),i||rt(t)),Ae(t),i=t.type,r=t.pendingProps,p=e!==null?e.memoizedProps:null,n=r.children,au(i,r)?n=null:p!==null&&au(i,p)&&(t.flags|=32),t.memoizedState!==null&&(i=m(e,t,Y,null,null,a),ln?tl._currentValue=i:tl._currentValue2=i),li(e,t),Nt(e,t,n,a),t.child;case 6:return e===null&&Ge&&(rm(t.pendingProps,Dt.current),(e=a=Yt)&&(a=Wp(a,t.pendingProps,qa),a!==null?(t.stateNode=a,qt=t,Yt=null,e=!0):e=!1),e||rt(t)),null;case 13:return Yo(e,t,a);case 4:return _(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=nl(t,null,n,a):Nt(e,t,n,a),t.child;case 11:return No(e,t,t.type,t.pendingProps,a);case 7:return Nt(e,t,t.pendingProps,a),t.child;case 8:return Nt(e,t,t.pendingProps.children,a),t.child;case 12:return Nt(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,_n(t,t.type,n.value),Nt(e,t,n.children,a),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,Fn(t),i=Ht(i),n=n(i),t.flags|=1,Nt(e,t,n,a),t.child;case 14:return Do(e,t,t.type,t.pendingProps,a);case 15:return xo(e,t,t.type,t.pendingProps,a);case 19:return Xo(e,t,a);case 22:return wo(e,t,a);case 24:return Fn(t),n=Ht(dt),e===null?(i=cs(),i===null&&(i=it,r=os(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=a),i=r),t.memoizedState={parent:n,cache:i},En(t),_n(t,dt,i)):((e.lanes&a)!==0&&(Ln(e,t),Se(t,null,null,a),ue()),i=e.memoizedState,r=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),_n(t,dt,n)):(n=r.cache,_n(t,dt,n),n!==i.cache&&rs(t,[dt],a,!0))),Nt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function _n(e,t,a){ln?(T(du,t._currentValue),t._currentValue=a):(T(du,t._currentValue2),t._currentValue2=a)}function tn(e){var t=du.current;ln?e._currentValue=t:e._currentValue2=t,D(du)}function ss(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function rs(e,t,a,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var r=i.dependencies;if(r!==null){var p=i.child;r=r.firstContext;e:for(;r!==null;){var E=r;r=i;for(var C=0;C<t.length;C++)if(E.context===t[C]){r.lanes|=a,E=r.alternate,E!==null&&(E.lanes|=a),ss(r.return,a,e),n||(p=null);break e}r=E.next}}else if(i.tag===18){if(p=i.return,p===null)throw Error(c(341));p.lanes|=a,r=p.alternate,r!==null&&(r.lanes|=a),ss(p,a,e),p=null}else p=i.child;if(p!==null)p.return=i;else for(p=i;p!==null;){if(p===e){p=null;break}if(i=p.sibling,i!==null){i.return=p.return,p=i;break}p=p.return}i=p}}function ii(e,t,a,n){e=null;for(var i=t,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var p=i.alternate;if(p===null)throw Error(c(387));if(p=p.memoizedProps,p!==null){var E=i.type;sa(i.pendingProps.value,p.value)||(e!==null?e.push(E):e=[E])}}else if(i===ru.current){if(p=i.alternate,p===null)throw Error(c(387));p.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(tl):e=[tl])}i=i.return}e!==null&&rs(t,e,a,n),t.flags|=262144}function Ki(e){for(e=e.firstContext;e!==null;){var t=e.context;if(!sa(ln?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Fn(e){sl=e,rn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return qo(sl,e)}function Pi(e,t){return sl===null&&Fn(e),qo(e,t)}function qo(e,t){var a=ln?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:a,next:null},rn===null){if(e===null)throw Error(c(308));rn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else rn=rn.next=t;return a}function os(){return{controller:new Om,data:new Map,refCount:0}}function ui(e){e.refCount--,e.refCount===0&&Cm(Rm,function(){e.controller.abort()})}function cs(){var e=rl.current;return e!==null?e:it.pooledCache}function Ji(e,t){t===null?T(rl,rl.current):T(rl,t.pool)}function Go(){var e=cs();return e===null?null:{parent:ln?dt._currentValue:dt._currentValue2,pool:e}}function ea(e){e.flags|=4}function Lo(e,t){if(e!==null&&e.child===t.child)return!1;if((t.flags&16)!==0)return!0;for(e=t.child;e!==null;){if((e.flags&13878)!==0||(e.subtreeFlags&13878)!==0)return!0;e=e.sibling}return!1}function fs(e,t,a,n){if(jt)for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)Qs(e,a.stateNode);else if(!(a.tag===4||Bt&&a.tag===27)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}else if(Nn)for(var i=t.child;i!==null;){if(i.tag===5){var r=i.stateNode;a&&n&&(r=Fc(r,i.type,i.memoizedProps)),Qs(e,r)}else if(i.tag===6)r=i.stateNode,a&&n&&(r=Ic(r,i.memoizedProps)),Qs(e,r);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)r=i.child,r!==null&&(r.return=i),fs(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Vo(e,t,a,n){if(Nn)for(var i=t.child;i!==null;){if(i.tag===5){var r=i.stateNode;a&&n&&(r=Fc(r,i.type,i.memoizedProps)),Pc(e,r)}else if(i.tag===6)r=i.stateNode,a&&n&&(r=Ic(r,i.memoizedProps)),Pc(e,r);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)r=i.child,r!==null&&(r.return=i),Vo(e,i,!(i.memoizedProps!==null&&i.memoizedProps.mode==="manual"),!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Ko(e,t){if(Nn&&Lo(e,t)){e=t.stateNode;var a=e.containerInfo,n=Kc();Vo(n,t,!1,!1),e.pendingChildren=n,ea(t),Gp(a,n)}}function hs(e,t,a,n){if(jt)e.memoizedProps!==n&&ea(t);else if(Nn){var i=e.stateNode,r=e.memoizedProps;if((e=Lo(e,t))||r!==n){var p=Dt.current;r=qp(i,a,r,n,!e,null),r===i?t.stateNode=i:(Xc(r,a,n,p)&&ea(t),t.stateNode=r,e?fs(r,t,!1,!1):ea(t))}else t.stateNode=i}}function ps(e,t,a){if(vp(t,a)){if(e.flags|=16777216,!Gc(t,a))if(yc())e.flags|=8192;else throw Ul=fu,tr}else e.flags&=-16777217}function Po(e,t){if(hm(t)){if(e.flags|=16777216,!sf(t))if(yc())e.flags|=8192;else throw Ul=fu,tr}else e.flags&=-16777217}function Fi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?G():536870912,e.lanes|=t,Ql|=t)}function si(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&31457280,n|=i.flags&31457280,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function Bh(e,t,a){var n=t.pendingProps;switch(be(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return pt(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),tn(dt),Ne(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(wa(t)?ea(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ca!==null&&(Ts(Ca),Ca=null))),Ko(e,t),pt(t),null;case 26:if(da){a=t.type;var i=t.memoizedState;return e===null?(ea(t),i!==null?(pt(t),Po(t,i)):(pt(t),ps(t,a,n))):i?i!==e.memoizedState?(ea(t),pt(t),Po(t,i)):(pt(t),t.flags&=-16777217):(jt?e.memoizedProps!==n&&ea(t):hs(e,t,a,n),pt(t),ps(t,a,n)),null}case 27:if(Bt){if(Ke(t),a=Dn.current,i=t.type,e!==null&&t.stateNode!=null)jt?e.memoizedProps!==n&&ea(t):hs(e,t,i,n);else{if(!n){if(t.stateNode===null)throw Error(c(166));return pt(t),null}e=Dt.current,wa(t)?zt(t,e):(e=rf(i,n,a,e,!0),t.stateNode=e,ea(t))}return pt(t),null}case 5:if(Ke(t),a=t.type,e!==null&&t.stateNode!=null)hs(e,t,a,n);else{if(!n){if(t.stateNode===null)throw Error(c(166));return pt(t),null}e=Dt.current,wa(t)?zt(t,e):(i=op(a,n,Dn.current,e,t),fs(i,t,!1,!1),t.stateNode=i,Xc(i,a,n,e)&&ea(t))}return pt(t),ps(t,t.type,t.pendingProps),null;case 6:if(e&&t.stateNode!=null)a=e.memoizedProps,jt?a!==n&&ea(t):Nn&&(a!==n?(t.stateNode=Qc(n,Dn.current,Dt.current,t),ea(t)):t.stateNode=e.stateNode);else{if(typeof n!="string"&&t.stateNode===null)throw Error(c(166));if(e=Dn.current,a=Dt.current,wa(t)){if(!ma)throw Error(c(176));if(e=t.stateNode,a=t.memoizedProps,n=null,i=qt,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}em(e,a,t,n)||rt(t)}else t.stateNode=Qc(n,e,a,t)}return pt(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=wa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(c(318));if(!ma)throw Error(c(344));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(c(317));tm(i,t)}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pt(t),i=!1}else Ca!==null&&(Ts(Ca),Ca=null),i=!0;if(!i)return t.flags&256?(we(t),t):(we(t),null)}if(we(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=n!==null,e=e!==null&&e.memoizedState!==null,a){n=t.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool);var r=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==i&&(n.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Fi(t,t.updateQueue),pt(t),null;case 4:return Ne(),Ko(e,t),e===null&&hp(t.stateNode.containerInfo),pt(t),null;case 10:return tn(t.type),pt(t),null;case 19:if(D(Tt),i=t.memoizedState,i===null)return pt(t),null;if(n=(t.flags&128)!==0,r=i.rendering,r===null)if(n)si(i,!1);else{if(yt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Pn(e),r!==null){for(t.flags|=128,si(i,!1),e=r.updateQueue,t.updateQueue=e,Fi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Oc(a,e),a=a.sibling;return T(Tt,Tt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Oa()>Mi&&(t.flags|=128,n=!0,si(i,!1),t.lanes=4194304)}else{if(!n)if(e=Pn(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Fi(t,e),si(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!Ge)return pt(t),null}else 2*Oa()-i.renderingStartTime>Mi&&a!==536870912&&(t.flags|=128,n=!0,si(i,!1),t.lanes=4194304);i.isBackwards?(r.sibling=t.child,t.child=r):(e=i.last,e!==null?e.sibling=r:t.child=r,i.last=r)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Oa(),t.sibling=null,e=Tt.current,T(Tt,n?e&1|2:e&1),t):(pt(t),null);case 22:case 23:return we(t),Sn(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),a=t.updateQueue,a!==null&&Fi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&D(rl),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),tn(dt),pt(t),null;case 25:return null}throw Error(c(156,t.tag))}function Yh(e,t){switch(be(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return tn(dt),Ne(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ke(t),null;case 13:if(we(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return D(Tt),null;case 4:return Ne(),null;case 10:return tn(t.type),null;case 22:case 23:return we(t),Sn(),e!==null&&D(rl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return tn(dt),null;case 25:return null;default:return null}}function Jo(e,t){switch(be(t),t.tag){case 3:tn(dt),Ne();break;case 26:case 27:case 5:Ke(t);break;case 4:Ne();break;case 13:we(t);break;case 19:D(Tt);break;case 10:tn(t.type);break;case 22:case 23:we(t),Sn(),e!==null&&D(rl);break;case 24:tn(dt)}}function ri(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){n=void 0;var r=a.create,p=a.inst;n=r(),p.destroy=n}a=a.next}while(a!==i)}}catch(E){$e(t,t.return,E)}}function Tn(e,t,a){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){var p=n.inst,E=p.destroy;if(E!==void 0){p.destroy=void 0,i=t;var C=a;try{E()}catch(V){$e(i,C,V)}}}n=n.next}while(n!==r)}}catch(V){$e(t,t.return,V)}}function Fo(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{he(t,a)}catch(n){$e(e,e.return,n)}}}function Io(e,t,a){a.props=Jn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){$e(e,t,n)}}function In(e,t){try{var a=e.ref;if(a!==null){var n=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=fi(n);break;default:i=n}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(r){$e(e,t,r)}}function ta(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){$e(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){$e(e,t,i)}else a.current=null}function Wo(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{Dp(n,t,a,e)}catch(i){$e(e,e.return,i)}}function ko(e,t,a){try{xp(e.stateNode,e.type,a,t,e)}catch(n){$e(e,e.return,n)}}function $o(e){return e.tag===5||e.tag===3||(da?e.tag===26:!1)||(Bt?e.tag===27:!1)||e.tag===4}function ms(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$o(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&(!Bt||e.tag!==27)&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ds(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?Up(a,e,t):Rp(a,e);else if(!(n===4||Bt&&n===27)&&(e=e.child,e!==null))for(ds(e,t,a),e=e.sibling;e!==null;)ds(e,t,a),e=e.sibling}function Ii(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?wp(a,e,t):Cp(a,e);else if(!(n===4||Bt&&n===27)&&(e=e.child,e!==null))for(Ii(e,t,a),e=e.sibling;e!==null;)Ii(e,t,a),e=e.sibling}function ec(e,t,a){e=e.containerInfo;try{Jc(e,a)}catch(n){$e(t,t.return,n)}}function Zh(e,t){for(sp(e.containerInfo),Ct=t;Ct!==null;)if(e=Ct,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ct=t;else for(;Ct!==null;){e=Ct;var a=e.alternate;switch(t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&a!==null){t=void 0;var n=e,i=a.memoizedProps;a=a.memoizedState;var r=n.stateNode;try{var p=Jn(n.type,i,n.elementType===n.type);t=r.getSnapshotBeforeUpdate(p,a),r.__reactInternalSnapshotBeforeUpdate=t}catch(E){$e(n,n.return,E)}}break;case 3:(t&1024)!==0&&jt&&Qp(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(c(163))}if(t=e.sibling,t!==null){t.return=e.return,Ct=t;break}Ct=e.return}return p=yf,yf=!1,p}function tc(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:an(e,a),n&4&&ri(5,a);break;case 1:if(an(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(E){$e(a,a.return,E)}else{var i=Jn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(E){$e(a,a.return,E)}}n&64&&Fo(a),n&512&&In(a,a.return);break;case 3:if(an(e,a),n&64&&(n=a.updateQueue,n!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=fi(a.child.stateNode);break;case 1:e=a.child.stateNode}try{he(n,e)}catch(E){$e(a,a.return,E)}}break;case 26:if(da){an(e,a),n&512&&In(a,a.return);break}case 27:case 5:an(e,a),t===null&&n&4&&Wo(a),n&512&&In(a,a.return);break;case 12:an(e,a);break;case 13:an(e,a),n&4&&nc(e,a);break;case 22:if(i=a.memoizedState!==null||on,!i){t=t!==null&&t.memoizedState!==null||vt;var r=on,p=vt;on=i,(vt=t)&&!p?zn(e,a,(a.subtreeFlags&8772)!==0):an(e,a),on=r,vt=p}n&512&&(a.memoizedProps.mode==="manual"?In(a,a.return):ta(a,a.return));break;default:an(e,a)}}function ac(e){var t=e.alternate;t!==null&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&dp(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Aa(e,t,a){for(a=a.child;a!==null;)vs(e,t,a),a=a.sibling}function vs(e,t,a){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(mi,a)}catch{}switch(a.tag){case 26:if(da){vt||ta(a,t),Aa(e,t,a),a.memoizedState?nf(a.memoizedState):a.stateNode&&uf(a.stateNode);break}case 27:if(Bt){vt||ta(a,t);var n=Mt,i=ra;Mt=a.stateNode,Aa(e,t,a),vm(a.stateNode),Mt=n,ra=i;break}case 5:vt||ta(a,t);case 6:if(jt){if(n=Mt,i=ra,Mt=null,Aa(e,t,a),Mt=n,ra=i,Mt!==null)if(ra)try{jp(Mt,a.stateNode)}catch(r){$e(a,t,r)}else try{Hp(Mt,a.stateNode)}catch(r){$e(a,t,r)}}else Aa(e,t,a);break;case 18:jt&&Mt!==null&&(ra?um(Mt,a.stateNode):im(Mt,a.stateNode));break;case 4:jt?(n=Mt,i=ra,Mt=a.stateNode.containerInfo,ra=!0,Aa(e,t,a),Mt=n,ra=i):(Nn&&ec(a.stateNode,a,Kc()),Aa(e,t,a));break;case 0:case 11:case 14:case 15:vt||Tn(2,a,t),vt||Tn(4,a,t),Aa(e,t,a);break;case 1:vt||(ta(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Io(a,t,n)),Aa(e,t,a);break;case 21:Aa(e,t,a);break;case 22:vt||ta(a,t),vt=(n=vt)||a.memoizedState!==null,Aa(e,t,a),vt=n;break;default:Aa(e,t,a)}}function nc(e,t){if(ma&&t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{lm(e)}catch(a){$e(t,t.return,a)}}function Xh(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new vf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new vf),t;default:throw Error(c(435,e.tag))}}function ys(e,t){var a=Xh(e);t.forEach(function(n){var i=Jh.bind(null,e,n);a.has(n)||(a.add(n),n.then(i,i))})}function Pt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],r=e,p=t;if(jt){var E=p;e:for(;E!==null;){switch(E.tag){case 27:case 5:Mt=E.stateNode,ra=!1;break e;case 3:Mt=E.stateNode.containerInfo,ra=!0;break e;case 4:Mt=E.stateNode.containerInfo,ra=!0;break e}E=E.return}if(Mt===null)throw Error(c(160));vs(r,p,i),Mt=null,ra=!1}else vs(r,p,i);r=i.alternate,r!==null&&(r.return=null),i.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)lc(t,e),t=t.sibling}function lc(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pt(t,e),aa(e),n&4&&(Tn(3,e,e.return),ri(3,e),Tn(5,e,e.return));break;case 1:Pt(t,e),aa(e),n&512&&(vt||a===null||ta(a,a.return)),n&64&&on&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:if(da){var i=Ra;Pt(t,e),aa(e),n&512&&(vt||a===null||ta(a,a.return)),n&4&&(n=a!==null?a.memoizedState:null,t=e.memoizedState,a===null?t===null?e.stateNode===null?e.stateNode=om(i,e.type,e.memoizedProps,e):lf(i,e.type,e.stateNode):e.stateNode=af(i,t,e.memoizedProps):n!==t?(n===null?a.stateNode!==null&&uf(a.stateNode):nf(n),t===null?lf(i,e.type,e.stateNode):af(i,t,e.memoizedProps)):t===null&&e.stateNode!==null&&ko(e,e.memoizedProps,a.memoizedProps));break}case 27:if(Bt&&n&4&&e.alternate===null){i=e.stateNode;var r=e.memoizedProps;try{mm(i),dm(e.type,r,i,e)}catch(pe){$e(e,e.return,pe)}}case 5:if(Pt(t,e),aa(e),n&512&&(vt||a===null||ta(a,a.return)),jt){if(e.flags&32){t=e.stateNode;try{Vc(t)}catch(pe){$e(e,e.return,pe)}}n&4&&e.stateNode!=null&&(t=e.memoizedProps,ko(e,t,a!==null?a.memoizedProps:t)),n&1024&&(ir=!0)}break;case 6:if(Pt(t,e),aa(e),n&4&&jt){if(e.stateNode===null)throw Error(c(162));n=e.memoizedProps,a=a!==null?a.memoizedProps:n,t=e.stateNode;try{Np(t,a,n)}catch(pe){$e(e,e.return,pe)}}break;case 3:if(da?(fm(),i=Ra,Ra=Vs(t.containerInfo),Pt(t,e),Ra=i):Pt(t,e),aa(e),n&4){if(jt&&ma&&a!==null&&a.memoizedState.isDehydrated)try{nm(t.containerInfo)}catch(pe){$e(e,e.return,pe)}if(Nn){n=t.containerInfo,a=t.pendingChildren;try{Jc(n,a)}catch(pe){$e(e,e.return,pe)}}}ir&&(ir=!1,ic(e));break;case 4:da?(a=Ra,Ra=Vs(e.stateNode.containerInfo),Pt(t,e),aa(e),Ra=a):(Pt(t,e),aa(e)),n&4&&Nn&&ec(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:Pt(t,e),aa(e);break;case 13:Pt(t,e),aa(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(or=Oa()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ys(e,n)));break;case 22:n&512&&(vt||a===null||ta(a,a.return)),i=e.memoizedState!==null;var p=a!==null&&a.memoizedState!==null,E=on,C=vt;if(on=E||i,vt=C||p,Pt(t,e),vt=C,on=E,aa(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,n&8192&&(t._visibility=i?t._visibility&-2:t._visibility|1,i&&(t=on||vt,a===null||p||t||gl(e)),jt&&(e.memoizedProps===null||e.memoizedProps.mode!=="manual"))){e:if(a=null,jt)for(t=e;;){if(t.tag===5||da&&t.tag===26||Bt&&t.tag===27){if(a===null){p=a=t;try{r=p.stateNode,i?Bp(r):Zp(p.stateNode,p.memoizedProps)}catch(pe){$e(p,p.return,pe)}}}else if(t.tag===6){if(a===null){p=t;try{var V=p.stateNode;i?Yp(V):Xp(V,p.memoizedProps)}catch(pe){$e(p,p.return,pe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,ys(e,a))));break;case 19:Pt(t,e),aa(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,ys(e,n)));break;case 21:break;default:Pt(t,e),aa(e)}}function aa(e){var t=e.flags;if(t&2){try{if(jt&&(!Bt||e.tag!==27)){e:{for(var a=e.return;a!==null;){if($o(a)){var n=a;break e}a=a.return}throw Error(c(160))}switch(n.tag){case 27:if(Bt){var i=n.stateNode,r=ms(e);Ii(e,r,i);break}case 5:var p=n.stateNode;n.flags&32&&(Vc(p),n.flags&=-33);var E=ms(e);Ii(e,E,p);break;case 3:case 4:var C=n.stateNode.containerInfo,V=ms(e);ds(e,V,C);break;default:throw Error(c(161))}}}catch(pe){$e(e,e.return,pe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ic(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ic(t),t.tag===5&&t.flags&1024&&Ep(t.stateNode),e=e.sibling}}function an(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)tc(e,t.alternate,t),t=t.sibling}function gl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Tn(4,t,t.return),gl(t);break;case 1:ta(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Io(t,t.return,a),gl(t);break;case 26:case 27:case 5:ta(t,t.return),gl(t);break;case 22:ta(t,t.return),t.memoizedState===null&&gl(t);break;default:gl(t)}e=e.sibling}}function zn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,i=e,r=t,p=r.flags;switch(r.tag){case 0:case 11:case 15:zn(i,r,a),ri(4,r);break;case 1:if(zn(i,r,a),n=r,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(V){$e(n,n.return,V)}if(n=r,i=n.updateQueue,i!==null){var E=n.stateNode;try{var C=i.shared.hiddenCallbacks;if(C!==null)for(i.shared.hiddenCallbacks=null,i=0;i<C.length;i++)Xe(C[i],E)}catch(V){$e(n,n.return,V)}}a&&p&64&&Fo(r),In(r,r.return);break;case 26:case 27:case 5:zn(i,r,a),a&&n===null&&p&4&&Wo(r),In(r,r.return);break;case 12:zn(i,r,a);break;case 13:zn(i,r,a),a&&p&4&&nc(i,r);break;case 22:r.memoizedState===null&&zn(i,r,a),In(r,r.return);break;default:zn(i,r,a)}t=t.sibling}}function gs(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ui(a))}function Es(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ui(e))}function An(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)uc(e,t,a,n),t=t.sibling}function uc(e,t,a,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:An(e,t,a,n),i&2048&&ri(9,t);break;case 3:An(e,t,a,n),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ui(e)));break;case 12:if(i&2048){An(e,t,a,n),e=t.stateNode;try{var r=t.memoizedProps,p=r.id,E=r.onPostCommit;typeof E=="function"&&E(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){$e(t,t.return,C)}}else An(e,t,a,n);break;case 23:break;case 22:r=t.stateNode,t.memoizedState!==null?r._visibility&4?An(e,t,a,n):oi(e,t):r._visibility&4?An(e,t,a,n):(r._visibility|=4,El(e,t,a,n,(t.subtreeFlags&10256)!==0)),i&2048&&gs(t.alternate,t);break;case 24:An(e,t,a,n),i&2048&&Es(t.alternate,t);break;default:An(e,t,a,n)}}function El(e,t,a,n,i){for(i=i&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,p=t,E=a,C=n,V=p.flags;switch(p.tag){case 0:case 11:case 15:El(r,p,E,C,i),ri(8,p);break;case 23:break;case 22:var pe=p.stateNode;p.memoizedState!==null?pe._visibility&4?El(r,p,E,C,i):oi(r,p):(pe._visibility|=4,El(r,p,E,C,i)),i&&V&2048&&gs(p.alternate,p);break;case 24:El(r,p,E,C,i),i&&V&2048&&Es(p.alternate,p);break;default:El(r,p,E,C,i)}t=t.sibling}}function oi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,i=n.flags;switch(n.tag){case 22:oi(a,n),i&2048&&gs(n.alternate,n);break;case 24:oi(a,n),i&2048&&Es(n.alternate,n);break;default:oi(a,n)}t=t.sibling}}function Wn(e){if(e.subtreeFlags&Zl)for(e=e.child;e!==null;)sc(e),e=e.sibling}function sc(e){switch(e.tag){case 26:Wn(e),e.flags&Zl&&(e.memoizedState!==null?pm(Ra,e.memoizedState,e.memoizedProps):Lc(e.type,e.memoizedProps));break;case 5:Wn(e),e.flags&Zl&&Lc(e.type,e.memoizedProps);break;case 3:case 4:if(da){var t=Ra;Ra=Vs(e.stateNode.containerInfo),Wn(e),Ra=t}else Wn(e);break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Zl,Zl=16777216,Wn(e),Zl=t):Wn(e));break;default:Wn(e)}}function rc(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ci(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Ct=n,cc(n,e)}rc(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)oc(e),e=e.sibling}function oc(e){switch(e.tag){case 0:case 11:case 15:ci(e),e.flags&2048&&Tn(9,e,e.return);break;case 3:ci(e);break;case 12:ci(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,Wi(e)):ci(e);break;default:ci(e)}}function Wi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Ct=n,cc(n,e)}rc(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Tn(8,t,t.return),Wi(t);break;case 22:a=t.stateNode,a._visibility&4&&(a._visibility&=-5,Wi(t));break;default:Wi(t)}e=e.sibling}}function cc(e,t){for(;Ct!==null;){var a=Ct;switch(a.tag){case 0:case 11:case 15:Tn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:ui(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Ct=n;else e:for(a=e;Ct!==null;){n=Ct;var i=n.sibling,r=n.return;if(ac(n),n===a){Ct=null;break e}if(i!==null){i.return=r,Ct=i;break e}Ct=r}}}function Ss(e){var t=qc(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(c(364));return t}if(e=Mp(e),e===null)throw Error(c(362));return e.stateNode.current}function bs(e,t){var a=e.tag;switch(t.$$typeof){case vu:if(e.type===t.value)return!0;break;case yu:e:{for(t=t.value,e=[e,0],a=0;a<e.length;){var n=e[a++],i=n.tag,r=e[a++],p=t[r];if(i!==5&&i!==26&&i!==27||!pi(n)){for(;p!=null&&bs(n,p);)r++,p=t[r];if(r===t.length){t=!0;break e}else for(n=n.child;n!==null;)e.push(n,r),n=n.sibling}}t=!1}return t;case gu:if((a===5||a===26||a===27)&&zp(e.stateNode,t.value))return!0;break;case Su:if((a===5||a===6||a===26||a===27)&&(e=Tp(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case Eu:if((a===5||a===26||a===27)&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function Ms(e){switch(e.$$typeof){case vu:return"<"+(y(e.value)||"Unknown")+">";case yu:return":has("+(Ms(e)||"")+")";case gu:return'[role="'+e.value+'"]';case Su:return'"'+e.value+'"';case Eu:return'[data-testname="'+e.value+'"]';default:throw Error(c(365))}}function fc(e,t){var a=[];e=[e,0];for(var n=0;n<e.length;){var i=e[n++],r=i.tag,p=e[n++],E=t[p];if(r!==5&&r!==26&&r!==27||!pi(i)){for(;E!=null&&bs(i,E);)p++,E=t[p];if(p===t.length)a.push(i);else for(i=i.child;i!==null;)e.push(i,p),i=i.sibling}}return a}function _s(e,t){if(!hi)throw Error(c(363));e=Ss(e),e=fc(e,t),t=[],e=Array.from(e);for(var a=0;a<e.length;){var n=e[a++],i=n.tag;if(i===5||i===26||i===27)pi(n)||t.push(n.stateNode);else for(n=n.child;n!==null;)e.push(n),n=n.sibling}return t}function na(){if((tt&2)!==0&&Qe!==0)return Qe&-Qe;if(Ue.T!==null){var e=xl;return e!==0?e:yn()}return pp()}function hc(){Sa===0&&(Sa=(Qe&536870912)===0||Ge?Z():536870912);var e=Ea.current;return e!==null&&(e.flags|=32),Sa}function Qt(e,t,a){(e===it&&ut===2||e.cancelPendingCommit!==null)&&(Sl(e,0),nn(e,Qe,Sa,!1)),ye(e,a),((tt&2)===0||e!==it)&&(e===it&&((tt&2)===0&&(ol|=a),yt===4&&nn(e,Qe,Sa,!1)),Lt(e))}function pc(e,t,a){if((tt&6)!==0)throw Error(c(327));var n=!a&&(t&60)===0&&(t&e.expiredLanes)===0||w(e,t),i=n?Gh(e,t):Os(e,t,!0),r=n;do{if(i===0){Xl&&!n&&nn(e,t,0,!1);break}else if(i===6)nn(e,t,0,!cn);else{if(a=e.current.alternate,r&&!Qh(a)){i=Os(e,t,!1),r=!1;continue}if(i===2){if(r=t,e.errorRecoveryDisabledLanes&r)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var E=e;i=bi;var C=ma&&E.current.memoizedState.isDehydrated;if(C&&(Sl(E,p).flags|=256),p=Os(E,p,!1),p!==2){if(ur&&!C){E.errorRecoveryDisabledLanes|=r,ol|=r,i=4;break e}r=Va,Va=i,r!==null&&Ts(r)}i=p}if(r=!1,i!==2)continue}}if(i===1){Sl(e,0),nn(e,t,0,!0);break}e:{switch(n=e,i){case 0:case 1:throw Error(c(345));case 4:if((t&4194176)===t){nn(n,t,Sa,!cn);break e}break;case 2:Va=null;break;case 3:case 5:break;default:throw Error(c(329))}if(n.finishedWork=a,n.finishedLanes=t,(t&62914560)===t&&(r=or+300-Oa(),10<r)){if(nn(n,t,Sa,!cn),J(n,0)!==0)break e;n.timeoutHandle=cp(mc.bind(null,n,a,Va,bu,rr,t,Sa,ol,Ql,cn,2,-0,0),r);break e}mc(n,a,Va,bu,rr,t,Sa,ol,Ql,cn,0,-0,0)}}break}while(!0);Lt(e)}function Ts(e){Va===null?Va=e:Va.push.apply(Va,e)}function mc(e,t,a,n,i,r,p,E,C,V,pe,ge,Ee){var je=t.subtreeFlags;if((je&8192||(je&16785408)===16785408)&&(yp(),sc(t),t=gp(),t!==null)){e.cancelPendingCommit=t(_c.bind(null,e,a,n,i,p,E,C,1,ge,Ee)),nn(e,r,p,!V);return}_c(e,a,n,i,p,E,C,pe,ge,Ee)}function Qh(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],r=i.getSnapshot;i=i.value;try{if(!sa(r(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(e,t,a,n){t&=~sr,t&=~ol,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var r=31-ia(i),p=1<<r;n[r]=-1,i&=~p}a!==0&&q(e,a,t)}function dc(){return(tt&6)===0?(ja(0),!1):!0}function zs(){if(Ze!==null){if(ut===0)var e=Ze.return;else e=Ze,rn=sl=null,le(e),Hl=null,gi=0,e=Ze;for(;e!==null;)Jo(e.alternate,e),e=e.return;Ze=null}}function Sl(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;a!==qs&&(e.timeoutHandle=qs,fp(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),zs(),it=e,Ze=a=On(e.current,null),Qe=t,ut=0,oa=null,cn=!1,Xl=w(e,t),ur=!1,Ql=Sa=sr=ol=Hn=yt=0,Va=bi=null,rr=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var i=31-ia(n),r=1<<i;t|=e[i],n&=~r}return fn=t,Ha(),a}function vc(e,t){Be=null,Ue.H=La,t===yi?(t=Vt(),ut=3):t===tr?(t=Vt(),ut=4):ut=t===mf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,oa=t,Ze===null&&(yt=1,Vi(e,te(t,e.current)))}function yc(){var e=Ea.current;return e===null?!0:(Qe&4194176)===Qe?Ga===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?e===Ga:!1}function gc(){var e=Ue.H;return Ue.H=La,e===null?La:e}function Ec(){var e=Ue.A;return Ue.A=Nm,e}function As(){yt=4,cn||(Qe&4194176)!==Qe&&Ea.current!==null||(Xl=!0),(Hn&134217727)===0&&(ol&134217727)===0||it===null||nn(it,Qe,Sa,!1)}function Os(e,t,a){var n=tt;tt|=2;var i=gc(),r=Ec();(it!==e||Qe!==t)&&(bu=null,Sl(e,t)),t=!1;var p=yt;e:do try{if(ut!==0&&Ze!==null){var E=Ze,C=oa;switch(ut){case 8:zs(),p=6;break e;case 3:case 2:case 6:Ea.current===null&&(t=!0);var V=ut;if(ut=0,oa=null,bl(e,E,C,V),a&&Xl){p=0;break e}break;default:V=ut,ut=0,oa=null,bl(e,E,C,V)}}qh(),p=yt;break}catch(pe){vc(e,pe)}while(!0);return t&&e.shellSuspendCounter++,rn=sl=null,tt=n,Ue.H=i,Ue.A=r,Ze===null&&(it=null,Qe=0,Ha()),p}function qh(){for(;Ze!==null;)Sc(Ze)}function Gh(e,t){var a=tt;tt|=2;var n=gc(),i=Ec();it!==e||Qe!==t?(bu=null,Mi=Oa()+500,Sl(e,t)):Xl=w(e,t);e:do try{if(ut!==0&&Ze!==null){t=Ze;var r=oa;t:switch(ut){case 1:ut=0,oa=null,bl(e,t,r,1);break;case 2:if(Wt(r)){ut=0,oa=null,bc(t);break}t=function(){ut===2&&it===e&&(ut=7),Lt(e)},r.then(t,t);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Wt(r)?(ut=0,oa=null,bc(t)):(ut=0,oa=null,bl(e,t,r,7));break;case 5:var p=null;switch(Ze.tag){case 26:p=Ze.memoizedState;case 5:case 27:var E=Ze,C=E.type,V=E.pendingProps;if(p?sf(p):Gc(C,V)){ut=0,oa=null;var pe=E.sibling;if(pe!==null)Ze=pe;else{var ge=E.return;ge!==null?(Ze=ge,ki(ge)):Ze=null}break t}}ut=0,oa=null,bl(e,t,r,5);break;case 6:ut=0,oa=null,bl(e,t,r,6);break;case 8:zs(),yt=6;break e;default:throw Error(c(462))}}Lh();break}catch(Ee){vc(e,Ee)}while(!0);return rn=sl=null,Ue.H=n,Ue.A=i,tt=a,Ze!==null?0:(it=null,Qe=0,Ha(),yt)}function Lh(){for(;Ze!==null&&!Em();)Sc(Ze)}function Sc(e){var t=Qo(e.alternate,e,fn);e.memoizedProps=e.pendingProps,t===null?ki(e):Ze=t}function bc(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Ho(a,t,t.pendingProps,t.type,void 0,Qe);break;case 11:t=Ho(a,t,t.pendingProps,t.type.render,t.ref,Qe);break;case 5:le(t);default:Jo(a,t),t=Ze=Oc(t,fn),t=Qo(a,t,fn)}e.memoizedProps=e.pendingProps,t===null?ki(e):Ze=t}function bl(e,t,a,n){rn=sl=null,le(t),Hl=null,gi=0;var i=t.return;try{if(Hh(e,i,t,a,Qe)){yt=1,Vi(e,te(a,e.current)),Ze=null;return}}catch(r){if(i!==null)throw Ze=i,r;yt=1,Vi(e,te(a,e.current)),Ze=null;return}t.flags&32768?(Ge||n===1?e=!0:Xl||(Qe&536870912)!==0?e=!1:(cn=e=!0,(n===2||n===3||n===6)&&(n=Ea.current,n!==null&&n.tag===13&&(n.flags|=16384))),Mc(t,e)):ki(t)}function ki(e){var t=e;do{if((t.flags&32768)!==0){Mc(t,cn);return}e=t.return;var a=Bh(t.alternate,t,fn);if(a!==null){Ze=a;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);yt===0&&(yt=5)}function Mc(e,t){do{var a=Yh(e.alternate,e);if(a!==null){a.flags&=32767,Ze=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ze=e;return}Ze=e=a}while(e!==null);yt=6,Ze=null}function _c(e,t,a,n,i,r,p,E,C,V){var pe=Ue.T,ge=el();try{Jt(2),Ue.T=null,Vh(e,t,a,n,ge,i,r,p,E,C,V)}finally{Ue.T=pe,Jt(ge)}}function Vh(e,t,a,n,i,r,p,E){do kn();while(cl!==null);if((tt&6)!==0)throw Error(c(327));var C=e.finishedWork;if(n=e.finishedLanes,C===null)return null;if(e.finishedWork=null,e.finishedLanes=0,C===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var V=C.lanes|C.childLanes;if(V|=Is,_e(e,n,V,r,p,E),e===it&&(Ze=it=null,Qe=0),(C.subtreeFlags&10256)===0&&(C.flags&10256)===0||Mu||(Mu=!0,cr=V,fr=a,Fh(Js,function(){return kn(),null})),a=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||a?(a=Ue.T,Ue.T=null,r=el(),Jt(2),p=tt,tt|=4,Zh(e,C),lc(C,e),rp(e.containerInfo),e.current=C,tc(e,C.alternate,C),Sm(),tt=p,Jt(r),Ue.T=a):e.current=C,Mu?(Mu=!1,cl=e,_i=n):Tc(e,V),V=e.pendingLanes,V===0&&(jn=null),j(C.stateNode),Lt(e),t!==null)for(i=e.onRecoverableError,C=0;C<t.length;C++)V=t[C],i(V.value,{componentStack:V.stack});return(_i&3)!==0&&kn(),V=e.pendingLanes,(n&4194218)!==0&&(V&42)!==0?e===hr?Ti++:(Ti=0,hr=e):Ti=0,ja(0),null}function Tc(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ui(t)))}function kn(){if(cl!==null){var e=cl,t=cr;cr=0;var a=oe(_i),n=32>a?32:a;a=Ue.T;var i=el();try{if(Jt(n),Ue.T=null,cl===null)var r=!1;else{n=fr,fr=null;var p=cl,E=_i;if(cl=null,_i=0,(tt&6)!==0)throw Error(c(331));var C=tt;if(tt|=4,oc(p.current),uc(p,p.current,E,n),tt=C,ja(0,!1),ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot(mi,p)}catch{}r=!0}return r}finally{Jt(i),Ue.T=a,Tc(e,t)}}return!1}function zc(e,t,a){t=te(a,t),t=ku(e.stateNode,t,2),e=lt(e,t,2),e!==null&&(ye(e,2),Lt(e))}function $e(e,t,a){if(e.tag===3)zc(e,e,a);else for(;t!==null;){if(t.tag===3){zc(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jn===null||!jn.has(n))){e=te(a,e),a=Co(2),n=lt(t,a,2),n!==null&&(Ro(a,n,t,e),ye(n,2),Lt(n));break}}t=t.return}}function Cs(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Dm;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(a)||(ur=!0,i.add(a),e=Kh.bind(null,e,t,a),t.then(e,e))}function Kh(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,it===e&&(Qe&a)===a&&(yt===4||yt===3&&(Qe&62914560)===Qe&&300>Oa()-or?(tt&2)===0&&Sl(e,0):sr|=a,Ql===Qe&&(Ql=0)),Lt(e)}function Ac(e,t){t===0&&(t=G()),e=It(e,t),e!==null&&(ye(e,t),Lt(e))}function Ph(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Ac(e,a)}function Jh(e,t){var a=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(c(314))}n!==null&&n.delete(t),Ac(e,a)}function Fh(e,t){return iu(e,t)}function Ih(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function On(e,t){var a=e.alternate;return a===null?(a=o(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&31457280,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Oc(e,t){e.flags&=31457282;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $i(e,t,a,n,i,r){var p=0;if(n=e,typeof e=="function")Rs(e)&&(p=1);else if(typeof e=="string")p=da&&Bt?ef(e,a,Dt.current)?26:of(e)?27:5:da?ef(e,a,Dt.current)?26:5:Bt&&of(e)?27:5;else e:switch(e){case _l:return $n(a.children,i,r,t);case Uc:p=8,i|=24;break;case Us:return e=o(12,a,t,i|2),e.elementType=Us,e.lanes=r,e;case js:return e=o(13,a,t,i),e.elementType=js,e.lanes=r,e;case Bs:return e=o(19,a,t,i),e.elementType=Bs,e.lanes=r,e;case jc:return Cc(a,i,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ep:case Cn:p=10;break e;case Hc:p=9;break e;case Hs:p=11;break e;case Ys:p=14;break e;case Rn:p=16,n=null;break e}p=29,a=Error(c(130,e===null?"null":typeof e,"")),n=null}return t=o(p,a,t,i),t.elementType=e,t.type=n,t.lanes=r,t}function $n(e,t,a,n){return e=o(7,e,n,t),e.lanes=a,e}function Cc(e,t,a,n){e=o(22,e,n,t),e.elementType=jc,e.lanes=a;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var r=i._current;if(r===null)throw Error(c(456));if((i._pendingVisibility&2)===0){var p=It(r,2);p!==null&&(i._pendingVisibility|=2,Qt(p,r,2))}},attach:function(){var r=i._current;if(r===null)throw Error(c(456));if((i._pendingVisibility&2)!==0){var p=It(r,2);p!==null&&(i._pendingVisibility&=-3,Qt(p,r,2))}}};return e.stateNode=i,e}function Ns(e,t,a){return e=o(6,e,null,t),e.lanes=a,e}function Ds(e,t,a){return t=o(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wh(e,t,a,n,i,r,p,E){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=qs,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Rc(e,t,a,n,i,r,p,E,C,V,pe,ge){return e=new Wh(e,t,a,p,E,C,V,ge),t=1,r===!0&&(t|=24),r=o(3,null,null,t),e.current=r,r.stateNode=e,t=os(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:a,cache:t},En(r),e}function Nc(e){return e?(e=Al,e):Al}function Dc(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=x(t),e=e!==null?F(e):null,e===null?null:fi(e.stateNode)}function xc(e,t,a,n,i,r){i=Nc(i),n.context===null?n.context=i:n.pendingContext=i,n=xt(t),n.payload={element:a},r=r===void 0?null:r,r!==null&&(n.callback=r),a=lt(e,n,t),a!==null&&(Qt(a,e,t),ha(a,e,t))}function wc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function xs(e,t){wc(e,t),(e=e.alternate)&&wc(e,t)}var Ye={},kh=Kr(),la=ah(),ws=Object.assign,$h=Symbol.for("react.element"),eu=Symbol.for("react.transitional.element"),Ml=Symbol.for("react.portal"),_l=Symbol.for("react.fragment"),Uc=Symbol.for("react.strict_mode"),Us=Symbol.for("react.profiler"),ep=Symbol.for("react.provider"),Hc=Symbol.for("react.consumer"),Cn=Symbol.for("react.context"),Hs=Symbol.for("react.forward_ref"),js=Symbol.for("react.suspense"),Bs=Symbol.for("react.suspense_list"),Ys=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),jc=Symbol.for("react.offscreen"),tp=Symbol.for("react.memo_cache_sentinel"),Bc=Symbol.iterator,ap=Symbol.for("react.client.reference"),Ue=kh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Zs,Yc,Xs=!1,tu=Array.isArray,np=l.rendererVersion,lp=l.rendererPackageName,Zc=l.extraDevToolsConfig,fi=l.getPublicInstance,ip=l.getRootHostContext,up=l.getChildHostContext,sp=l.prepareForCommit,rp=l.resetAfterCommit,op=l.createInstance,Qs=l.appendInitialChild,Xc=l.finalizeInitialChildren,au=l.shouldSetTextContent,Qc=l.createTextInstance,cp=l.scheduleTimeout,fp=l.cancelTimeout,qs=l.noTimeout,ln=l.isPrimaryRenderer;l.warnsIfNotActing;var jt=l.supportsMutation,Nn=l.supportsPersistence,ma=l.supportsHydration,qc=l.getInstanceFromNode;l.beforeActiveInstanceBlur,l.afterActiveInstanceBlur;var hp=l.preparePortalMount;l.prepareScopeUpdate,l.getInstanceFromScope;var Jt=l.setCurrentUpdatePriority,el=l.getCurrentUpdatePriority,pp=l.resolveUpdatePriority;l.resolveEventType,l.resolveEventTimeStamp;var mp=l.shouldAttemptEagerTransition,dp=l.detachDeletedInstance;l.requestPostPaintCallback;var vp=l.maySuspendCommit,Gc=l.preloadInstance,yp=l.startSuspendingCommit,Lc=l.suspendInstance,gp=l.waitForCommitToBeReady,Tl=l.NotPendingTransition,tl=l.HostTransitionContext,Ep=l.resetFormInstance;l.bindToConsole;var Sp=l.supportsMicrotasks,bp=l.scheduleMicrotask,hi=l.supportsTestSelectors,Mp=l.findFiberRoot,_p=l.getBoundingRect,Tp=l.getTextContent,pi=l.isHiddenSubtree,zp=l.matchAccessibilityRole,Ap=l.setFocusIfFocusable,Op=l.setupIntersectionObserver,Cp=l.appendChild,Rp=l.appendChildToContainer,Np=l.commitTextUpdate,Dp=l.commitMount,xp=l.commitUpdate,wp=l.insertBefore,Up=l.insertInContainerBefore,Hp=l.removeChild,jp=l.removeChildFromContainer,Vc=l.resetTextContent,Bp=l.hideInstance,Yp=l.hideTextInstance,Zp=l.unhideInstance,Xp=l.unhideTextInstance,Qp=l.clearContainer,qp=l.cloneInstance,Kc=l.createContainerChildSet,Pc=l.appendChildToContainerChildSet,Gp=l.finalizeContainerChildren,Jc=l.replaceContainerChildren,Fc=l.cloneHiddenInstance,Ic=l.cloneHiddenTextInstance,Gs=l.isSuspenseInstancePending,Ls=l.isSuspenseInstanceFallback,Lp=l.getSuspenseInstanceFallbackErrorDetails,Vp=l.registerSuspenseInstanceRetry,Kp=l.canHydrateFormStateMarker,Pp=l.isFormStateMarkerMatching,Wc=l.getNextHydratableSibling,kc=l.getFirstHydratableChild,Jp=l.getFirstHydratableChildWithinContainer,Fp=l.getFirstHydratableChildWithinSuspenseInstance,Ip=l.canHydrateInstance,Wp=l.canHydrateTextInstance,kp=l.canHydrateSuspenseInstance,$p=l.hydrateInstance,em=l.hydrateTextInstance,tm=l.hydrateSuspenseInstance,am=l.getNextHydratableInstanceAfterSuspenseInstance,nm=l.commitHydratedContainer,lm=l.commitHydratedSuspenseInstance,im=l.clearSuspenseBoundary,um=l.clearSuspenseBoundaryFromContainer,$c=l.shouldDeleteUnhydratedTailInstances;l.diffHydratedPropsForDevWarnings,l.diffHydratedTextForDevWarnings,l.describeHydratableInstanceForDevWarnings;var sm=l.validateHydratableInstance,rm=l.validateHydratableTextInstance,da=l.supportsResources,ef=l.isHostHoistableType,Vs=l.getHoistableRoot,tf=l.getResource,af=l.acquireResource,nf=l.releaseResource,om=l.hydrateHoistable,lf=l.mountHoistable,uf=l.unmountHoistable,cm=l.createHoistableInstance,fm=l.prepareToCommitHoistables,hm=l.mayResourceSuspendCommit,sf=l.preloadResource,pm=l.suspendResource,Bt=l.supportsSingletons,rf=l.resolveSingletonInstance,mm=l.clearSingleton,dm=l.acquireSingletonInstance,vm=l.releaseSingletonInstance,of=l.isHostSingletonType,Ks=[],zl=-1,Al={},ia=Math.clz32?Math.clz32:W,ym=Math.log,gm=Math.LN2,nu=128,lu=4194304,iu=la.unstable_scheduleCallback,Ps=la.unstable_cancelCallback,Em=la.unstable_shouldYield,Sm=la.unstable_requestPaint,Oa=la.unstable_now,cf=la.unstable_ImmediatePriority,bm=la.unstable_UserBlockingPriority,Js=la.unstable_NormalPriority,Mm=la.unstable_IdlePriority,_m=la.log,Tm=la.unstable_setDisableYieldValue,mi=null,ua=null,sa=typeof Object.is=="function"?Object.is:se,ff=new WeakMap,Ol=[],Cl=0,uu=null,su=0,va=[],ya=0,al=null,un=1,sn="",Dt=K(null),di=K(null),Dn=K(null),ru=K(null),qt=null,Yt=null,Ge=!1,Ca=null,qa=!1,Fs=Error(c(519)),ga=[],Rl=0,Is=0,ou=null,Nl=null,Ws=!1,cu=!1,ks=!1,Dl=0,vi=null,$s=0,xl=0,wl=null,xn=!1,er=!1,zm=Object.prototype.hasOwnProperty,yi=Error(c(460)),tr=Error(c(474)),fu={then:function(){}},Ul=null,Hl=null,gi=0,nl=$a(!0),hf=$a(!1),jl=K(null),hu=K(0),Ea=K(null),Ga=null,Tt=K(0),wn=0,Be=null,et=null,bt=null,pu=!1,Bl=!1,ll=!1,mu=0,Ei=0,Yl=null,Am=0,ar=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},La={readContext:Ht,use:me,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht};La.useCacheRefresh=ht,La.useMemoCache=ht,La.useHostTransitionStatus=ht,La.useFormState=ht,La.useActionState=ht,La.useOptimistic=ht;var il={readContext:Ht,use:me,useCallback:function(e,t){return re().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:oo,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,qi(4194308,4,ho.bind(null,t,e),a)},useLayoutEffect:function(e,t){return qi(4194308,4,e,t)},useInsertionEffect:function(e,t){qi(4,2,e,t)},useMemo:function(e,t){var a=re();t=t===void 0?null:t;var n=e();if(ll){ie(!0);try{e()}finally{ie(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=re();if(a!==void 0){var i=a(t);if(ll){ie(!0);try{a(t)}finally{ie(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Uh.bind(null,Be,e),[n.memoizedState,e]},useRef:function(e){var t=re();return e={current:e},t.memoizedState=e},useState:function(e){e=ke(e);var t=e.queue,a=Mo.bind(null,Be,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Pu,useDeferredValue:function(e,t){var a=re();return Ju(a,e,t)},useTransition:function(){var e=ke(!1);return e=go.bind(null,Be,e.queue,!0,!1),re().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=Be,i=re();if(Ge){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),it===null)throw Error(c(349));(Qe&60)!==0||Ie(n,t,a)}i.memoizedState=a;var r={value:a,getSnapshot:t};return i.queue=r,oo(At.bind(null,n,r,e),[e]),n.flags|=2048,yl(9,mt.bind(null,n,r,a,t),{destroy:void 0},null),a},useId:function(){var e=re(),t=it.identifierPrefix;if(Ge){var a=sn,n=un;a=(n&~(1<<32-ia(n)-1)).toString(32)+a,t=":"+t+"R"+a,a=mu++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=Am++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return re().memoizedState=wh.bind(null,Be)}};il.useMemoCache=at,il.useHostTransitionStatus=Fu,il.useFormState=Xt,il.useActionState=Xt,il.useOptimistic=function(e){var t=re();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Iu.bind(null,Be,!0,a),a.dispatch=t,[e,t]};var Un={readContext:Ht,use:me,useCallback:mo,useContext:Ht,useEffect:Ku,useImperativeHandle:po,useInsertionEffect:co,useLayoutEffect:fo,useMemo:vo,useReducer:ze,useRef:ro,useState:function(){return ze(Me)},useDebugValue:Pu,useDeferredValue:function(e,t){var a=ee();return yo(a,et.memoizedState,e,t)},useTransition:function(){var e=ze(Me)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:ve(e),t]},useSyncExternalStore:Je,useId:So};Un.useCacheRefresh=bo,Un.useMemoCache=at,Un.useHostTransitionStatus=Fu,Un.useFormState=Xa,Un.useActionState=Xa,Un.useOptimistic=function(e,t){var a=ee();return gt(a,et,e,t)};var ul={readContext:Ht,use:me,useCallback:mo,useContext:Ht,useEffect:Ku,useImperativeHandle:po,useInsertionEffect:co,useLayoutEffect:fo,useMemo:vo,useReducer:He,useRef:ro,useState:function(){return He(Me)},useDebugValue:Pu,useDeferredValue:function(e,t){var a=ee();return et===null?Ju(a,e,t):yo(a,et.memoizedState,e,t)},useTransition:function(){var e=He(Me)[0],t=ee().memoizedState;return[typeof e=="boolean"?e:ve(e),t]},useSyncExternalStore:Je,useId:So};ul.useCacheRefresh=bo,ul.useMemoCache=at,ul.useHostTransitionStatus=Fu,ul.useFormState=so,ul.useActionState=so,ul.useOptimistic=function(e,t){var a=ee();return et!==null?gt(a,et,e,t):(a.baseState=e,[e,a.queue.dispatch])};var nr={isMounted:function(e){return(e=e._reactInternals)?g(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var n=na(),i=xt(n);i.payload=t,a!=null&&(i.callback=a),t=lt(e,i,n),t!==null&&(Qt(t,e,n),ha(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=na(),i=xt(n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=lt(e,i,n),t!==null&&(Qt(t,e,n),ha(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=na(),n=xt(a);n.tag=2,t!=null&&(n.callback=t),t=lt(e,n,a),t!==null&&(Qt(t,e,a),ha(t,e,a))}},pf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},mf=Error(c(461)),Ot=!1,lr={dehydrated:null,treeContext:null,retryLane:0},du=K(null),sl=null,rn=null,Om=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Cm=la.unstable_scheduleCallback,Rm=la.unstable_NormalPriority,dt={$$typeof:Cn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},df=Ue.S;Ue.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&gn(e,t),df!==null&&df(e,t)};var rl=K(null),on=!1,vt=!1,ir=!1,vf=typeof WeakSet=="function"?WeakSet:Set,Ct=null,yf=!1,Mt=null,ra=!1,Ra=null,Zl=8192,Nm={getCacheForType:function(e){var t=Ht(dt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},vu=0,yu=1,gu=2,Eu=3,Su=4;if(typeof Symbol=="function"&&Symbol.for){var Si=Symbol.for;vu=Si("selector.component"),yu=Si("selector.has_pseudo_class"),gu=Si("selector.role"),Eu=Si("selector.test_id"),Su=Si("selector.text")}var Dm=typeof WeakMap=="function"?WeakMap:Map,tt=0,it=null,Ze=null,Qe=0,ut=0,oa=null,cn=!1,Xl=!1,ur=!1,fn=0,yt=0,Hn=0,ol=0,sr=0,Sa=0,Ql=0,bi=null,Va=null,rr=!1,or=0,Mi=1/0,bu=null,jn=null,Mu=!1,cl=null,_i=0,cr=0,fr=null,Ti=0,hr=null;return Ye.attemptContinuousHydration=function(e){if(e.tag===13){var t=It(e,67108864);t!==null&&Qt(t,e,67108864),xs(e,67108864)}},Ye.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=na(),a=It(e,t);a!==null&&Qt(a,e,t),xs(e,t)}},Ye.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var t=$(e.pendingLanes);if(t!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var a=1<<31-ia(t);e.entanglements[1]|=a,t&=~a}Lt(e),(tt&6)===0&&(Mi=Oa()+500,ja(0))}}break;case 13:t=It(e,2),t!==null&&Qt(t,e,2),dc(),xs(e,2)}},Ye.batchedUpdates=function(e,t){return e(t)},Ye.createComponentSelector=function(e){return{$$typeof:vu,value:e}},Ye.createContainer=function(e,t,a,n,i,r,p,E,C,V){return Rc(e,t,!1,null,a,n,r,p,E,C,V,null)},Ye.createHasPseudoClassSelector=function(e){return{$$typeof:yu,value:e}},Ye.createHydrationContainer=function(e,t,a,n,i,r,p,E,C,V,pe,ge,Ee){return e=Rc(a,n,!0,e,i,r,E,C,V,pe,ge,Ee),e.context=Nc(null),a=e.current,n=na(),i=xt(n),i.callback=t??null,lt(a,i,n),e.current.lanes=n,ye(e,n),Lt(e),e},Ye.createPortal=function(e,t,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ml,key:n==null?null:""+n,children:e,containerInfo:t,implementation:a}},Ye.createRoleSelector=function(e){return{$$typeof:gu,value:e}},Ye.createTestNameSelector=function(e){return{$$typeof:Eu,value:e}},Ye.createTextSelector=function(e){return{$$typeof:Su,value:e}},Ye.defaultOnCaughtError=function(e){console.error(e)},Ye.defaultOnRecoverableError=function(e){pf(e)},Ye.defaultOnUncaughtError=function(e){pf(e)},Ye.deferredUpdates=function(e){var t=Ue.T,a=el();try{return Jt(32),Ue.T=null,e()}finally{Jt(a),Ue.T=t}},Ye.discreteUpdates=function(e,t,a,n,i){var r=Ue.T,p=el();try{return Jt(2),Ue.T=null,e(t,a,n,i)}finally{Jt(p),Ue.T=r,tt===0&&(Mi=Oa()+500)}},Ye.findAllNodes=_s,Ye.findBoundingRects=function(e,t){if(!hi)throw Error(c(363));t=_s(e,t),e=[];for(var a=0;a<t.length;a++)e.push(_p(t[a]));for(t=e.length-1;0<t;t--){a=e[t];for(var n=a.x,i=n+a.width,r=a.y,p=r+a.height,E=t-1;0<=E;E--)if(t!==E){var C=e[E],V=C.x,pe=V+C.width,ge=C.y,Ee=ge+C.height;if(n>=V&&r>=ge&&i<=pe&&p<=Ee){e.splice(t,1);break}else if(n!==V||a.width!==C.width||Ee<r||ge>p){if(!(r!==ge||a.height!==C.height||pe<n||V>i)){V>n&&(C.width+=V-n,C.x=n),pe<i&&(C.width=i-V),e.splice(t,1);break}}else{ge>r&&(C.height+=ge-r,C.y=r),Ee<p&&(C.height=p-ge),e.splice(t,1);break}}}return e},Ye.findHostInstance=Dc,Ye.findHostInstanceWithNoPortals=function(e){return e=x(e),e=e!==null?ne(e):null,e===null?null:fi(e.stateNode)},Ye.findHostInstanceWithWarning=function(e){return Dc(e)},Ye.flushPassiveEffects=kn,Ye.flushSyncFromReconciler=function(e){var t=tt;tt|=1;var a=Ue.T,n=el();try{if(Jt(2),Ue.T=null,e)return e()}finally{Jt(n),Ue.T=a,tt=t,(tt&6)===0&&ja(0)}},Ye.flushSyncWork=dc,Ye.focusWithin=function(e,t){if(!hi)throw Error(c(363));for(e=Ss(e),t=fc(e,t),t=Array.from(t),e=0;e<t.length;){var a=t[e++],n=a.tag;if(!pi(a)){if((n===5||n===26||n===27)&&Ap(a.stateNode))return!0;for(a=a.child;a!==null;)t.push(a),a=a.sibling}}return!1},Ye.getFindAllNodesFailureDescription=function(e,t){if(!hi)throw Error(c(363));var a=0,n=[];e=[Ss(e),0];for(var i=0;i<e.length;){var r=e[i++],p=r.tag,E=e[i++],C=t[E];if((p!==5&&p!==26&&p!==27||!pi(r))&&(bs(r,C)&&(n.push(Ms(C)),E++,E>a&&(a=E)),E<t.length))for(r=r.child;r!==null;)e.push(r,E),r=r.sibling}if(a<t.length){for(e=[];a<t.length;a++)e.push(Ms(t[a]));return`findAllNodes was able to match part of the selector:
  `+(n.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},Ye.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return fi(e.child.stateNode);default:return e.child.stateNode}},Ye.injectIntoDevTools=function(){var e={bundleType:0,version:np,rendererPackageName:lp,currentDispatcherRef:Ue,findFiberByHostInstance:qc,reconcilerVersion:"19.0.0"};if(Zc!==null&&(e.rendererConfig=Zc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{mi=t.inject(e),ua=t}catch{}e=!!t.checkDCE}}return e},Ye.isAlreadyRendering=function(){return!1},Ye.observeVisibleRects=function(e,t,a,n){if(!hi)throw Error(c(363));e=_s(e,t);var i=Op(e,a,n).disconnect;return{disconnect:function(){i()}}},Ye.shouldError=function(){return null},Ye.shouldSuspend=function(){return!1},Ye.startHostTransition=function(e,t,a,n){if(e.tag!==5)throw Error(c(476));var i=Eo(e).queue;go(e,i,t,Tl,a===null?s:function(){var r=Eo(e).next.queue;return ni(e,r,{},na()),a(n)})},Ye.updateContainer=function(e,t,a,n){var i=t.current,r=na();return xc(i,r,e,t,a,n),r},Ye.updateContainerSync=function(e,t,a,n){return t.tag===0&&kn(),xc(t.current,2,e,t,a,n),2},Ye},u.exports.default=u.exports,Object.defineProperty(u.exports,"__esModule",{value:!0})})(Mr)),Mr.exports}var xf;function Rd(){return xf||(xf=1,br.exports=Cd()),br.exports}var Nd=Rd();const Dd=kf(Nd);var wf=ah();function Pr(u,l,o){if(!u)return;if(o(u)===!0)return u;let s=l?u.return:u.child;for(;s;){const c=Pr(s,l,o);if(c)return c;s=l?null:s.sibling}}function nh(u){try{return Object.defineProperties(u,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return u}}const Jr=nh(H.createContext(null));class lh extends H.Component{render(){return H.createElement(Jr.Provider,{value:this._reactInternals},this.props.children)}}function ih(){const u=H.useContext(Jr);if(u===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const l=H.useId();return H.useMemo(()=>{for(const o of[u,u?.alternate]){if(!o)continue;const s=Pr(o,!1,c=>{let h=c.memoizedState;for(;h;){if(h.memoizedState===l)return!0;h=h.next}});if(s)return s}},[u,l])}const xd=Symbol.for("react.context"),wd=u=>u!==null&&typeof u=="object"&&"$$typeof"in u&&u.$$typeof===xd;function Ud(){const u=ih(),[l]=H.useState(()=>new Map);l.clear();let o=u;for(;o;){const s=o.type;wd(s)&&s!==Jr&&!l.has(s)&&l.set(s,H.use(nh(s))),o=o.return}return l}function Hd(){const u=Ud();return H.useMemo(()=>Array.from(u.keys()).reduce((l,o)=>s=>H.createElement(l,null,H.createElement(o.Provider,{...s,value:u.get(o)})),l=>H.createElement(lh,{...l})),[u])}function uh(u){let l=u.root;for(;l.getState().previousRoot;)l=l.getState().previousRoot;return l}const sh=u=>u&&u.isOrthographicCamera,jd=u=>u&&u.hasOwnProperty("current"),Bd=u=>u!=null&&(typeof u=="string"||typeof u=="number"||u.isColor),Yi=((u,l)=>typeof window<"u"&&(((u=window.document)==null?void 0:u.createElement)||((l=window.navigator)==null?void 0:l.product)==="ReactNative"))()?H.useLayoutEffect:H.useEffect;function Fr(u){const l=H.useRef(u);return Yi(()=>void(l.current=u),[u]),l}function Yd(){const u=ih(),l=Hd();return H.useMemo(()=>({children:o})=>{const c=!!Pr(u,!0,h=>h.type===H.StrictMode)?H.StrictMode:H.Fragment;return Te.jsx(c,{children:Te.jsx(l,{children:o})})},[u,l])}function Zd({set:u}){return Yi(()=>(u(new Promise(()=>null)),()=>u(!1)),[u]),null}const Xd=(u=>(u=class extends H.Component{constructor(...o){super(...o),this.state={error:!1}}componentDidCatch(o){this.props.set(o)}render(){return this.state.error?null:this.props.children}},u.getDerivedStateFromError=()=>({error:!0}),u))();function rh(u){var l;const o=typeof window<"u"?(l=window.devicePixelRatio)!=null?l:2:1;return Array.isArray(u)?Math.min(Math.max(u[0],o),u[1]):u}function Ll(u){var l;return(l=u.__r3f)==null?void 0:l.root.getState()}const ft={obj:u=>u===Object(u)&&!ft.arr(u)&&typeof u!="function",fun:u=>typeof u=="function",str:u=>typeof u=="string",num:u=>typeof u=="number",boo:u=>typeof u=="boolean",und:u=>u===void 0,nul:u=>u===null,arr:u=>Array.isArray(u),equ(u,l,{arrays:o="shallow",objects:s="reference",strict:c=!0}={}){if(typeof u!=typeof l||!!u!=!!l)return!1;if(ft.str(u)||ft.num(u)||ft.boo(u))return u===l;const h=ft.obj(u);if(h&&s==="reference")return u===l;const y=ft.arr(u);if(y&&o==="reference")return u===l;if((y||h)&&u===l)return!0;let d;for(d in u)if(!(d in l))return!1;if(h&&o==="shallow"&&s==="shallow"){for(d in c?l:u)if(!ft.equ(u[d],l[d],{strict:c,objects:"reference"}))return!1}else for(d in c?l:u)if(u[d]!==l[d])return!1;if(ft.und(d)){if(y&&u.length===0&&l.length===0||h&&Object.keys(u).length===0&&Object.keys(l).length===0)return!0;if(u!==l)return!1}return!0}};function Qd(u){const l={nodes:{},materials:{},meshes:{}};return u&&u.traverse(o=>{o.name&&(l.nodes[o.name]=o),o.material&&!l.materials[o.material.name]&&(l.materials[o.material.name]=o.material),o.isMesh&&!l.meshes[o.name]&&(l.meshes[o.name]=o)}),l}function qd(u){u.type!=="Scene"&&(u.dispose==null||u.dispose());for(const l in u){const o=u[l];o?.type!=="Scene"&&(o==null||o.dispose==null||o.dispose())}}const oh=["children","key","ref"];function Gd(u){const l={};for(const o in u)oh.includes(o)||(l[o]=u[o]);return l}function Bu(u,l,o,s){const c=u;let h=c?.__r3f;return h||(h={root:l,type:o,parent:null,children:[],props:Gd(s),object:c,eventCount:0,handlers:{},isHidden:!1},c&&(c.__r3f=h)),h}function ji(u,l){if(!l.includes("-"))return{root:u,key:l,target:u[l]};if(l in u)return{root:u,key:l,target:u[l]};let o=u;const s=l.split("-");for(const c of s){if(typeof o!="object"||o===null){if(o!==void 0){const h=s.slice(s.indexOf(c)).join("-");return{root:o,key:h,target:void 0}}return{root:u,key:l,target:void 0}}l=c,u=o,o=o[l]}return{root:u,key:l,target:o}}const Uf=/-\d+$/;function Yu(u,l){if(ft.str(l.props.attach)){if(Uf.test(l.props.attach)){const c=l.props.attach.replace(Uf,""),{root:h,key:y}=ji(u.object,c);Array.isArray(h[y])||(h[y]=[])}const{root:o,key:s}=ji(u.object,l.props.attach);l.previousAttach=o[s],o[s]=l.object}else ft.fun(l.props.attach)&&(l.previousAttach=l.props.attach(u.object,l.object))}function Zu(u,l){if(ft.str(l.props.attach)){const{root:o,key:s}=ji(u.object,l.props.attach),c=l.previousAttach;c===void 0?delete o[s]:o[s]=c}else l.previousAttach==null||l.previousAttach(u.object,l.object);delete l.previousAttach}const Ur=[...oh,"args","dispose","attach","object","onUpdate","dispose"],Hf=new Map;function Ld(u){let l=Hf.get(u.constructor);try{l||(l=new u.constructor,Hf.set(u.constructor,l))}catch{}return l}function Vd(u,l){const o={};for(const s in l)if(!Ur.includes(s)&&!ft.equ(l[s],u.props[s])){o[s]=l[s];for(const c in l)c.startsWith(`${s}-`)&&(o[c]=l[c])}for(const s in u.props){if(Ur.includes(s)||l.hasOwnProperty(s))continue;const{root:c,key:h}=ji(u.object,s);if(c.constructor&&c.constructor.length===0){const y=Ld(c);ft.und(y)||(o[h]=y[h])}else o[h]=0}return o}const Kd=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Pd=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ka(u,l){var o;const s=u.__r3f,c=s&&uh(s).getState(),h=s?.eventCount;for(const d in l){let v=l[d];if(Ur.includes(d))continue;if(s&&Pd.test(d)){typeof v=="function"?s.handlers[d]=v:delete s.handlers[d],s.eventCount=Object.keys(s.handlers).length;continue}if(v===void 0)continue;let{root:M,key:b,target:g}=ji(u,d);if(g===void 0&&(typeof M!="object"||M===null))throw Error(`R3F: Cannot set "${d}". Ensure it is an object before setting "${b}".`);if(g instanceof gf&&v instanceof gf)g.mask=v.mask;else if(g instanceof Pa&&Bd(v))g.set(v);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&v!=null&&v.constructor&&g.constructor===v.constructor)g.copy(v);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(v))typeof g.fromArray=="function"?g.fromArray(v):g.set(...v);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof v=="number")typeof g.setScalar=="function"?g.setScalar(v):g.set(v);else{var y;M[b]=v,c&&!c.linear&&Kd.includes(b)&&(y=M[b])!=null&&y.isTexture&&M[b].format===Il&&M[b].type===Hu&&(M[b].colorSpace=Gr)}}if(s!=null&&s.parent&&c!=null&&c.internal&&(o=s.object)!=null&&o.isObject3D&&h!==s.eventCount){const d=s.object,v=c.internal.interaction.indexOf(d);v>-1&&c.internal.interaction.splice(v,1),s.eventCount&&d.raycast!==null&&c.internal.interaction.push(d)}return s&&s.props.attach===void 0&&(s.object.isBufferGeometry?s.props.attach="geometry":s.object.isMaterial&&(s.props.attach="material")),s&&$l(s),u}function $l(u){var l;if(!u.parent)return;u.props.onUpdate==null||u.props.onUpdate(u.object);const o=(l=u.root)==null||l.getState==null?void 0:l.getState();o&&o.internal.frames===0&&o.invalidate()}function ch(u,l){u.manual||(sh(u)?(u.left=l.width/-2,u.right=l.width/2,u.top=l.height/2,u.bottom=l.height/-2):u.aspect=l.width/l.height,u.updateProjectionMatrix())}const Gt=u=>u?.isObject3D;function zu(u){return(u.eventObject||u.object).uuid+"/"+u.index+u.instanceId}function fh(u,l,o,s){const c=o.get(l);c&&(o.delete(l),o.size===0&&(u.delete(s),c.target.releasePointerCapture(s)))}function Jd(u,l){const{internal:o}=u.getState();o.interaction=o.interaction.filter(s=>s!==l),o.initialHits=o.initialHits.filter(s=>s!==l),o.hovered.forEach((s,c)=>{(s.eventObject===l||s.object===l)&&o.hovered.delete(c)}),o.capturedMap.forEach((s,c)=>{fh(o.capturedMap,l,s,c)})}function Fd(u){function l(v){const{internal:M}=u.getState(),b=v.offsetX-M.initialClick[0],g=v.offsetY-M.initialClick[1];return Math.round(Math.sqrt(b*b+g*g))}function o(v){return v.filter(M=>["Move","Over","Enter","Out","Leave"].some(b=>{var g;return(g=M.__r3f)==null?void 0:g.handlers["onPointer"+b]}))}function s(v,M){const b=u.getState(),g=new Set,A=[],x=M?M(b.internal.interaction):b.internal.interaction;for(let D=0;D<x.length;D++){const T=Ll(x[D]);T&&(T.raycaster.camera=void 0)}b.previousRoot||b.events.compute==null||b.events.compute(v,b);function F(D){const T=Ll(D);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var W;T.events.compute==null||T.events.compute(v,T,(W=T.previousRoot)==null?void 0:W.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(D,!0):[]}let ne=x.flatMap(F).sort((D,T)=>{const W=Ll(D.object),$=Ll(T.object);return!W||!$?D.distance-T.distance:$.events.priority-W.events.priority||D.distance-T.distance}).filter(D=>{const T=zu(D);return g.has(T)?!1:(g.add(T),!0)});b.events.filter&&(ne=b.events.filter(ne,b));for(const D of ne){let T=D.object;for(;T;){var K;(K=T.__r3f)!=null&&K.eventCount&&A.push({...D,eventObject:T}),T=T.parent}}if("pointerId"in v&&b.internal.capturedMap.has(v.pointerId))for(let D of b.internal.capturedMap.get(v.pointerId).values())g.has(zu(D.intersection))||A.push(D.intersection);return A}function c(v,M,b,g){if(v.length){const A={stopped:!1};for(const x of v){let F=Ll(x.object);if(F||x.object.traverseAncestors(ne=>{const K=Ll(ne);if(K)return F=K,!1}),F){const{raycaster:ne,pointer:K,camera:D,internal:T}=F,W=new de(K.x,K.y,0).unproject(D),$=G=>{var I,ye;return(I=(ye=T.capturedMap.get(G))==null?void 0:ye.has(x.eventObject))!=null?I:!1},J=G=>{const I={intersection:x,target:M.target};T.capturedMap.has(G)?T.capturedMap.get(G).set(x.eventObject,I):T.capturedMap.set(G,new Map([[x.eventObject,I]])),M.target.setPointerCapture(G)},w=G=>{const I=T.capturedMap.get(G);I&&fh(T.capturedMap,x.eventObject,I,G)};let k={};for(let G in M){let I=M[G];typeof I!="function"&&(k[G]=I)}let Z={...x,...k,pointer:K,intersections:v,stopped:A.stopped,delta:b,unprojectedPoint:W,ray:ne.ray,camera:D,stopPropagation(){const G="pointerId"in M&&T.capturedMap.get(M.pointerId);if((!G||G.has(x.eventObject))&&(Z.stopped=A.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(I=>I.eventObject===x.eventObject))){const I=v.slice(0,v.indexOf(x));h([...I,x])}},target:{hasPointerCapture:$,setPointerCapture:J,releasePointerCapture:w},currentTarget:{hasPointerCapture:$,setPointerCapture:J,releasePointerCapture:w},nativeEvent:M};if(g(Z),A.stopped===!0)break}}}return v}function h(v){const{internal:M}=u.getState();for(const b of M.hovered.values())if(!v.length||!v.find(g=>g.object===b.object&&g.index===b.index&&g.instanceId===b.instanceId)){const A=b.eventObject.__r3f;if(M.hovered.delete(zu(b)),A!=null&&A.eventCount){const x=A.handlers,F={...b,intersections:v};x.onPointerOut==null||x.onPointerOut(F),x.onPointerLeave==null||x.onPointerLeave(F)}}}function y(v,M){for(let b=0;b<M.length;b++){const g=M[b].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(v)}}function d(v){switch(v){case"onPointerLeave":case"onPointerCancel":return()=>h([]);case"onLostPointerCapture":return M=>{const{internal:b}=u.getState();"pointerId"in M&&b.capturedMap.has(M.pointerId)&&requestAnimationFrame(()=>{b.capturedMap.has(M.pointerId)&&(b.capturedMap.delete(M.pointerId),h([]))})}}return function(b){const{onPointerMissed:g,internal:A}=u.getState();A.lastEvent.current=b;const x=v==="onPointerMove",F=v==="onClick"||v==="onContextMenu"||v==="onDoubleClick",K=s(b,x?o:void 0),D=F?l(b):0;v==="onPointerDown"&&(A.initialClick=[b.offsetX,b.offsetY],A.initialHits=K.map(W=>W.eventObject)),F&&!K.length&&D<=2&&(y(b,A.interaction),g&&g(b)),x&&h(K);function T(W){const $=W.eventObject,J=$.__r3f;if(!(J!=null&&J.eventCount))return;const w=J.handlers;if(x){if(w.onPointerOver||w.onPointerEnter||w.onPointerOut||w.onPointerLeave){const k=zu(W),Z=A.hovered.get(k);Z?Z.stopped&&W.stopPropagation():(A.hovered.set(k,W),w.onPointerOver==null||w.onPointerOver(W),w.onPointerEnter==null||w.onPointerEnter(W))}w.onPointerMove==null||w.onPointerMove(W)}else{const k=w[v];k?(!F||A.initialHits.includes($))&&(y(b,A.interaction.filter(Z=>!A.initialHits.includes(Z))),k(W)):F&&A.initialHits.includes($)&&y(b,A.interaction.filter(Z=>!A.initialHits.includes(Z)))}}c(K,b,D,T)}}return{handlePointer:d}}const jf=u=>!!(u!=null&&u.render),Ir=H.createContext(null),Id=(u,l)=>{const o=$f((d,v)=>{const M=new de,b=new de,g=new de;function A(D=v().camera,T=b,W=v().size){const{width:$,height:J,top:w,left:k}=W,Z=$/J;T.isVector3?g.copy(T):g.set(...T);const G=D.getWorldPosition(M).distanceTo(g);if(sh(D))return{width:$/D.zoom,height:J/D.zoom,top:w,left:k,factor:1,distance:G,aspect:Z};{const I=D.fov*Math.PI/180,ye=2*Math.tan(I/2)*G,_e=ye*($/J);return{width:_e,height:ye,top:w,left:k,factor:$/_e,distance:G,aspect:Z}}}let x;const F=D=>d(T=>({performance:{...T.performance,current:D}})),ne=new ca;return{set:d,get:v,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(D=1)=>u(v(),D),advance:(D,T)=>l(D,T,v()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Zm,pointer:ne,mouse:ne,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const D=v();x&&clearTimeout(x),D.performance.current!==D.performance.min&&F(D.performance.min),x=setTimeout(()=>F(v().performance.max),D.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:A},setEvents:D=>d(T=>({...T,events:{...T.events,...D}})),setSize:(D,T,W=0,$=0)=>{const J=v().camera,w={width:D,height:T,top:W,left:$};d(k=>({size:w,viewport:{...k.viewport,...A(J,b,w)}}))},setDpr:D=>d(T=>{const W=rh(D);return{viewport:{...T.viewport,dpr:W,initialDpr:T.viewport.initialDpr||W}}}),setFrameloop:(D="always")=>{const T=v().clock;T.stop(),T.elapsedTime=0,D!=="never"&&(T.start(),T.elapsedTime=0),d(()=>({frameloop:D}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:H.createRef(),active:!1,frames:0,priority:0,subscribe:(D,T,W)=>{const $=v().internal;return $.priority=$.priority+(T>0?1:0),$.subscribers.push({ref:D,priority:T,store:W}),$.subscribers=$.subscribers.sort((J,w)=>J.priority-w.priority),()=>{const J=v().internal;J!=null&&J.subscribers&&(J.priority=J.priority-(T>0?1:0),J.subscribers=J.subscribers.filter(w=>w.ref!==D))}}}}}),s=o.getState();let c=s.size,h=s.viewport.dpr,y=s.camera;return o.subscribe(()=>{const{camera:d,size:v,viewport:M,gl:b,set:g}=o.getState();if(v.width!==c.width||v.height!==c.height||M.dpr!==h){c=v,h=M.dpr,ch(d,v),M.dpr>0&&b.setPixelRatio(M.dpr);const A=typeof HTMLCanvasElement<"u"&&b.domElement instanceof HTMLCanvasElement;b.setSize(v.width,v.height,A)}d!==y&&(y=d,g(A=>({viewport:{...A.viewport,...A.viewport.getCurrentViewport(d)}})))}),o.subscribe(d=>u(d)),o};function Wr(){const u=H.useContext(Ir);if(!u)throw new Error("R3F: Hooks can only be used within the Canvas component!");return u}function st(u=o=>o,l){return Wr()(u,l)}function Zi(u,l=0){const o=Wr(),s=o.getState().internal.subscribe,c=Fr(u);return Yi(()=>s(c,l,o),[l,s,o]),null}const Bf=new WeakMap,Wd=u=>{var l;return typeof u=="function"&&(u==null||(l=u.prototype)==null?void 0:l.constructor)===u};function hh(u,l){return function(o,...s){let c;return Wd(o)?(c=Bf.get(o),c||(c=new o,Bf.set(o,c))):c=o,u&&u(c),Promise.all(s.map(h=>new Promise((y,d)=>c.load(h,v=>{Gt(v?.scene)&&Object.assign(v,Qd(v.scene)),y(v)},l,v=>d(new Error(`Could not load ${h}: ${v?.message}`))))))}}function Wl(u,l,o,s){const c=Array.isArray(l)?l:[l],h=Td(hh(o,s),[u,...c],{equal:ft.equ});return Array.isArray(l)?h:h[0]}Wl.preload=function(u,l,o){const s=Array.isArray(l)?l:[l];return zd(hh(o),[u,...s])};Wl.clear=function(u,l){const o=Array.isArray(l)?l:[l];return Ad([u,...o])};var kd={version:"9.4.2"};function $d(u){const l=Dd(u);return l.injectIntoDevTools(),l}const ph=0,kl={},ev=/^three(?=[A-Z])/,Lu=u=>`${u[0].toUpperCase()}${u.slice(1)}`;let tv=0;const av=u=>typeof u=="function";function kr(u){if(av(u)){const l=`${tv++}`;return kl[l]=u,l}else Object.assign(kl,u)}function mh(u,l){const o=Lu(u),s=kl[o];if(u!=="primitive"&&!s)throw new Error(`R3F: ${o} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(u==="primitive"&&!l.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(l.args!==void 0&&!Array.isArray(l.args))throw new Error("R3F: The args prop must be an array!")}function nv(u,l,o){var s;return u=Lu(u)in kl?u:u.replace(ev,""),mh(u,l),u==="primitive"&&(s=l.object)!=null&&s.__r3f&&delete l.object.__r3f,Bu(l.object,o,u,l)}function lv(u){if(!u.isHidden){var l;u.props.attach&&(l=u.parent)!=null&&l.object?Zu(u.parent,u):Gt(u.object)&&(u.object.visible=!1),u.isHidden=!0,$l(u)}}function dh(u){if(u.isHidden){var l;u.props.attach&&(l=u.parent)!=null&&l.object?Yu(u.parent,u):Gt(u.object)&&u.props.visible!==!1&&(u.object.visible=!0),u.isHidden=!1,$l(u)}}function $r(u,l,o){const s=l.root.getState();if(!(!u.parent&&u.object!==s.scene)){if(!l.object){var c,h;const y=kl[Lu(l.type)];l.object=(c=l.props.object)!=null?c:new y(...(h=l.props.args)!=null?h:[]),l.object.__r3f=l}if(Ka(l.object,l.props),l.props.attach)Yu(u,l);else if(Gt(l.object)&&Gt(u.object)){const y=u.object.children.indexOf(o?.object);if(o&&y!==-1){const d=u.object.children.indexOf(l.object);if(d!==-1){u.object.children.splice(d,1);const v=d<y?y-1:y;u.object.children.splice(v,0,l.object)}else l.object.parent=u.object,u.object.children.splice(y,0,l.object),l.object.dispatchEvent({type:"added"}),u.object.dispatchEvent({type:"childadded",child:l.object})}else u.object.add(l.object)}for(const y of l.children)$r(l,y);$l(l)}}function zr(u,l){l&&(l.parent=u,u.children.push(l),$r(u,l))}function Yf(u,l,o){if(!l||!o)return;l.parent=u;const s=u.children.indexOf(o);s!==-1?u.children.splice(s,0,l):u.children.push(l),$r(u,l,o)}function vh(u){if(typeof u.dispose=="function"){const l=()=>{try{u.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?l():wf.unstable_scheduleCallback(wf.unstable_IdlePriority,l)}}function Hr(u,l,o){if(!l)return;l.parent=null;const s=u.children.indexOf(l);s!==-1&&u.children.splice(s,1),l.props.attach?Zu(u,l):Gt(l.object)&&Gt(u.object)&&(u.object.remove(l.object),Jd(uh(l),l.object));const c=l.props.dispose!==null&&o!==!1;for(let h=l.children.length-1;h>=0;h--){const y=l.children[h];Hr(l,y,c)}l.children.length=0,delete l.object.__r3f,c&&l.type!=="primitive"&&l.object.type!=="Scene"&&vh(l.object),o===void 0&&$l(l)}function iv(u,l){for(const o of[u,u.alternate])if(o!==null)if(typeof o.ref=="function"){o.refCleanup==null||o.refCleanup();const s=o.ref(l);typeof s=="function"&&(o.refCleanup=s)}else o.ref&&(o.ref.current=l)}const wu=[];function uv(){for(const[o]of wu){const s=o.parent;if(s){o.props.attach?Zu(s,o):Gt(o.object)&&Gt(s.object)&&s.object.remove(o.object);for(const c of o.children)c.props.attach?Zu(o,c):Gt(c.object)&&Gt(o.object)&&o.object.remove(c.object)}o.isHidden&&dh(o),o.object.__r3f&&delete o.object.__r3f,o.type!=="primitive"&&vh(o.object)}for(const[o,s,c]of wu){o.props=s;const h=o.parent;if(h){var u,l;const y=kl[Lu(o.type)];o.object=(u=o.props.object)!=null?u:new y(...(l=o.props.args)!=null?l:[]),o.object.__r3f=o,iv(c,o.object),Ka(o.object,o.props),o.props.attach?Yu(h,o):Gt(o.object)&&Gt(h.object)&&h.object.add(o.object);for(const d of o.children)d.props.attach?Yu(o,d):Gt(d.object)&&Gt(o.object)&&o.object.add(d.object);$l(o)}}wu.length=0}const Ar=()=>{},Zf={};let Au=ph;const sv=0,rv=4,Xu=$d({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:nv,removeChild:Hr,appendChild:zr,appendInitialChild:zr,insertBefore:Yf,appendChildToContainer(u,l){const o=u.getState().scene.__r3f;!l||!o||zr(o,l)},removeChildFromContainer(u,l){const o=u.getState().scene.__r3f;!l||!o||Hr(o,l)},insertInContainerBefore(u,l,o){const s=u.getState().scene.__r3f;!l||!o||!s||Yf(s,l,o)},getRootHostContext:()=>Zf,getChildHostContext:()=>Zf,commitUpdate(u,l,o,s,c){var h,y,d;mh(l,s);let v=!1;if((u.type==="primitive"&&o.object!==s.object||((h=s.args)==null?void 0:h.length)!==((y=o.args)==null?void 0:y.length)||(d=s.args)!=null&&d.some((b,g)=>{var A;return b!==((A=o.args)==null?void 0:A[g])}))&&(v=!0),v)wu.push([u,{...s},c]);else{const b=Vd(u,s);Object.keys(b).length&&(Object.assign(u.props,b),Ka(u.object,b))}(c.sibling===null||(c.flags&rv)===sv)&&uv()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:u=>u?.object,prepareForCommit:()=>null,preparePortalMount:u=>Bu(u.getState().scene,u,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:lv,unhideInstance:dh,createTextInstance:Ar,hideTextInstance:Ar,unhideTextInstance:Ar,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:H.createContext(null),setCurrentUpdatePriority(u){Au=u},getCurrentUpdatePriority(){return Au},resolveUpdatePriority(){var u;if(Au!==ph)return Au;switch(typeof window<"u"&&((u=window.event)==null?void 0:u.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return xu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return xu.ContinuousEventPriority;default:return xu.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:kd.version}),dl=new Map,Vl={objects:"shallow",strict:!1};function ov(u,l){if(!l&&typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement&&u.parentElement){const{width:o,height:s,top:c,left:h}=u.parentElement.getBoundingClientRect();return{width:o,height:s,top:c,left:h}}else if(!l&&typeof OffscreenCanvas<"u"&&u instanceof OffscreenCanvas)return{width:u.width,height:u.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...l}}function cv(u){const l=dl.get(u),o=l?.fiber,s=l?.store;l&&console.warn("R3F.createRoot should only be called once!");const c=typeof reportError=="function"?reportError:console.error,h=s||Id(Yr,Qf),y=o||Xu.createContainer(h,xu.ConcurrentRoot,null,!1,null,"",c,c,c,null);l||dl.set(u,{fiber:y,store:h});let d,v,M=!1,b=null;return{async configure(g={}){let A;b=new Promise(L=>A=L);let{gl:x,size:F,scene:ne,events:K,onCreated:D,shadows:T=!1,linear:W=!1,flat:$=!1,legacy:J=!1,orthographic:w=!1,frameloop:k="always",dpr:Z=[1,2],performance:G,raycaster:I,camera:ye,onPointerMissed:_e}=g,q=h.getState(),Q=q.gl;if(!q.gl){const L={canvas:u,powerPreference:"high-performance",antialias:!0,alpha:!0},ae=typeof x=="function"?await x(L):x;jf(ae)?Q=ae:Q=new Jf({...L,...x}),q.set({gl:Q})}let oe=q.raycaster;oe||q.set({raycaster:oe=new Qr});const{params:j,...ie}=I||{};if(ft.equ(ie,oe,Vl)||Ka(oe,{...ie}),ft.equ(j,oe.params,Vl)||Ka(oe,{params:{...oe.params,...j}}),!q.camera||q.camera===v&&!ft.equ(v,ye,Vl)){v=ye;const L=ye?.isCamera,ae=L?ye:w?new Di(0,0,0,0,.1,1e3):new Nu(75,0,.1,1e3);L||(ae.position.z=5,ye&&(Ka(ae,ye),ae.manual||("aspect"in ye||"left"in ye||"right"in ye||"bottom"in ye||"top"in ye)&&(ae.manual=!0,ae.updateProjectionMatrix())),!q.camera&&!(ye!=null&&ye.rotation)&&ae.lookAt(0,0,0)),q.set({camera:ae}),oe.camera=ae}if(!q.scene){let L;ne!=null&&ne.isScene?(L=ne,Bu(L,h,"",{})):(L=new qr,Bu(L,h,"",{}),ne&&Ka(L,ne)),q.set({scene:L})}K&&!q.events.handlers&&q.set({events:K(h)});const se=ov(u,F);if(ft.equ(se,q.size,Vl)||q.setSize(se.width,se.height,se.top,se.left),Z&&q.viewport.dpr!==rh(Z)&&q.setDpr(Z),q.frameloop!==k&&q.setFrameloop(k),q.onPointerMissed||q.set({onPointerMissed:_e}),G&&!ft.equ(G,q.performance,Vl)&&q.set(L=>({performance:{...L.performance,...G}})),!q.xr){var te;const L=(_,Ne)=>{const Ae=h.getState();Ae.frameloop!=="never"&&Qf(_,!0,Ae,Ne)},ae=()=>{const _=h.getState();_.gl.xr.enabled=_.gl.xr.isPresenting,_.gl.xr.setAnimationLoop(_.gl.xr.isPresenting?L:null),_.gl.xr.isPresenting||Yr(_)},be={connect(){const _=h.getState().gl;_.xr.addEventListener("sessionstart",ae),_.xr.addEventListener("sessionend",ae)},disconnect(){const _=h.getState().gl;_.xr.removeEventListener("sessionstart",ae),_.xr.removeEventListener("sessionend",ae)}};typeof((te=Q.xr)==null?void 0:te.addEventListener)=="function"&&be.connect(),q.set({xr:be})}if(Q.shadowMap){const L=Q.shadowMap.enabled,ae=Q.shadowMap.type;if(Q.shadowMap.enabled=!!T,ft.boo(T))Q.shadowMap.type=pr;else if(ft.str(T)){var P;const be={basic:Hm,percentage:Um,soft:pr,variance:wm};Q.shadowMap.type=(P=be[T])!=null?P:pr}else ft.obj(T)&&Object.assign(Q.shadowMap,T);(L!==Q.shadowMap.enabled||ae!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}return jm.enabled=!J,M||(Q.outputColorSpace=W?Uu:Gr,Q.toneMapping=$?Bm:Ym),q.legacy!==J&&q.set(()=>({legacy:J})),q.linear!==W&&q.set(()=>({linear:W})),q.flat!==$&&q.set(()=>({flat:$})),x&&!ft.fun(x)&&!jf(x)&&!ft.equ(x,Q,Vl)&&Ka(Q,x),d=D,M=!0,A(),this},render(g){return!M&&!b&&this.configure(),b.then(()=>{Xu.updateContainer(Te.jsx(fv,{store:h,children:g,onCreated:d,rootElement:u}),y,null,()=>{})}),h},unmount(){yh(u)}}}function fv({store:u,children:l,onCreated:o,rootElement:s}){return Yi(()=>{const c=u.getState();c.set(h=>({internal:{...h.internal,active:!0}})),o&&o(c),u.getState().events.connected||c.events.connect==null||c.events.connect(s)},[]),Te.jsx(Ir.Provider,{value:u,children:l})}function yh(u,l){const o=dl.get(u),s=o?.fiber;if(s){const c=o?.store.getState();c&&(c.internal.active=!1),Xu.updateContainer(null,s,null,()=>{c&&setTimeout(()=>{try{var h,y,d,v;c.events.disconnect==null||c.events.disconnect(),(h=c.gl)==null||(y=h.renderLists)==null||y.dispose==null||y.dispose(),(d=c.gl)==null||d.forceContextLoss==null||d.forceContextLoss(),(v=c.gl)!=null&&v.xr&&c.xr.disconnect(),qd(c.scene),dl.delete(u)}catch{}},500)})}}function hv(u,l,o){return Te.jsx(pv,{children:u,container:l,state:o})}function pv({state:u={},children:l,container:o}){const{events:s,size:c,...h}=u,y=Wr(),[d]=H.useState(()=>new Qr),[v]=H.useState(()=>new ca),M=Fr((g,A)=>{let x;if(A.camera&&c){const F=A.camera;x=g.viewport.getCurrentViewport(F,new de,c),F!==g.camera&&ch(F,c)}return{...g,...A,scene:o,raycaster:d,pointer:v,mouse:v,previousRoot:y,events:{...g.events,...A.events,...s},size:{...g.size,...c},viewport:{...g.viewport,...x},setEvents:F=>A.set(ne=>({...ne,events:{...ne.events,...F}}))}}),b=H.useMemo(()=>{const g=$f((x,F)=>({...h,set:x,get:F})),A=x=>g.setState(F=>M.current(x,F));return A(y.getState()),y.subscribe(A),g},[y,o]);return Te.jsx(Te.Fragment,{children:Xu.createPortal(Te.jsx(Ir.Provider,{value:b,children:l}),b,null)})}const mv=new Set,dv=new Set,vv=new Set;function Or(u,l){if(u.size)for(const{callback:o}of u.values())o(l)}function wi(u,l){switch(u){case"before":return Or(mv,l);case"after":return Or(dv,l);case"tail":return Or(vv,l)}}let Cr,Rr;function jr(u,l,o){let s=l.clock.getDelta();l.frameloop==="never"&&typeof u=="number"&&(s=u-l.clock.elapsedTime,l.clock.oldTime=l.clock.elapsedTime,l.clock.elapsedTime=u),Cr=l.internal.subscribers;for(let c=0;c<Cr.length;c++)Rr=Cr[c],Rr.ref.current(Rr.store.getState(),s,o);return!l.internal.priority&&l.gl.render&&l.gl.render(l.scene,l.camera),l.internal.frames=Math.max(0,l.internal.frames-1),l.frameloop==="always"?1:l.internal.frames}let Qu=!1,Br=!1,Nr,Xf,Kl;function gh(u){Xf=requestAnimationFrame(gh),Qu=!0,Nr=0,wi("before",u),Br=!0;for(const o of dl.values()){var l;Kl=o.store.getState(),Kl.internal.active&&(Kl.frameloop==="always"||Kl.internal.frames>0)&&!((l=Kl.gl.xr)!=null&&l.isPresenting)&&(Nr+=jr(u,Kl))}if(Br=!1,wi("after",u),Nr===0)return wi("tail",u),Qu=!1,cancelAnimationFrame(Xf)}function Yr(u,l=1){var o;if(!u)return dl.forEach(s=>Yr(s.store.getState(),l));(o=u.gl.xr)!=null&&o.isPresenting||!u.internal.active||u.frameloop==="never"||(l>1?u.internal.frames=Math.min(60,u.internal.frames+l):Br?u.internal.frames=2:u.internal.frames=1,Qu||(Qu=!0,requestAnimationFrame(gh)))}function Qf(u,l=!0,o,s){if(l&&wi("before",u),o)jr(u,o,s);else for(const c of dl.values())jr(u,c.store.getState());l&&wi("after",u)}const Dr={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function yv(u){const{handlePointer:l}=Fd(u);return{priority:1,enabled:!0,compute(o,s,c){s.pointer.set(o.offsetX/s.size.width*2-1,-(o.offsetY/s.size.height)*2+1),s.raycaster.setFromCamera(s.pointer,s.camera)},connected:void 0,handlers:Object.keys(Dr).reduce((o,s)=>({...o,[s]:l(s)}),{}),update:()=>{var o;const{events:s,internal:c}=u.getState();(o=c.lastEvent)!=null&&o.current&&s.handlers&&s.handlers.onPointerMove(c.lastEvent.current)},connect:o=>{const{set:s,events:c}=u.getState();if(c.disconnect==null||c.disconnect(),s(h=>({events:{...h.events,connected:o}})),c.handlers)for(const h in c.handlers){const y=c.handlers[h],[d,v]=Dr[h];o.addEventListener(d,y,{passive:v})}},disconnect:()=>{const{set:o,events:s}=u.getState();if(s.connected){if(s.handlers)for(const c in s.handlers){const h=s.handlers[c],[y]=Dr[c];s.connected.removeEventListener(y,h)}o(c=>({events:{...c.events,connected:void 0}}))}}}}function qf(u,l){let o;return(...s)=>{window.clearTimeout(o),o=window.setTimeout(()=>u(...s),l)}}function gv({debounce:u,scroll:l,polyfill:o,offsetSize:s}={debounce:0,scroll:!1,offsetSize:!1}){const c=o||(typeof window>"u"?class{}:window.ResizeObserver);if(!c)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[h,y]=H.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=H.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:h,orientationHandler:null}),v=u?typeof u=="number"?u:u.scroll:null,M=u?typeof u=="number"?u:u.resize:null,b=H.useRef(!1);H.useEffect(()=>(b.current=!0,()=>void(b.current=!1)));const[g,A,x]=H.useMemo(()=>{const D=()=>{if(!d.current.element)return;const{left:T,top:W,width:$,height:J,bottom:w,right:k,x:Z,y:G}=d.current.element.getBoundingClientRect(),I={left:T,top:W,width:$,height:J,bottom:w,right:k,x:Z,y:G};d.current.element instanceof HTMLElement&&s&&(I.height=d.current.element.offsetHeight,I.width=d.current.element.offsetWidth),Object.freeze(I),b.current&&!Mv(d.current.lastBounds,I)&&y(d.current.lastBounds=I)};return[D,M?qf(D,M):D,v?qf(D,v):D]},[y,s,v,M]);function F(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(D=>D.removeEventListener("scroll",x,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null),d.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",d.current.orientationHandler))}function ne(){d.current.element&&(d.current.resizeObserver=new c(x),d.current.resizeObserver.observe(d.current.element),l&&d.current.scrollContainers&&d.current.scrollContainers.forEach(D=>D.addEventListener("scroll",x,{capture:!0,passive:!0})),d.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",d.current.orientationHandler))}const K=D=>{!D||D===d.current.element||(F(),d.current.element=D,d.current.scrollContainers=Eh(D),ne())};return Sv(x,!!l),Ev(A),H.useEffect(()=>{F(),ne()},[l,x,A]),H.useEffect(()=>F,[]),[K,h,g]}function Ev(u){H.useEffect(()=>{const l=u;return window.addEventListener("resize",l),()=>void window.removeEventListener("resize",l)},[u])}function Sv(u,l){H.useEffect(()=>{if(l){const o=u;return window.addEventListener("scroll",o,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",o,!0)}},[u,l])}function Eh(u){const l=[];if(!u||u===document.body)return l;const{overflow:o,overflowX:s,overflowY:c}=window.getComputedStyle(u);return[o,s,c].some(h=>h==="auto"||h==="scroll")&&l.push(u),[...l,...Eh(u.parentElement)]}const bv=["x","y","top","bottom","left","right","width","height"],Mv=(u,l)=>bv.every(o=>u[o]===l[o]);function _v({ref:u,children:l,fallback:o,resize:s,style:c,gl:h,events:y=yv,eventSource:d,eventPrefix:v,shadows:M,linear:b,flat:g,legacy:A,orthographic:x,frameloop:F,dpr:ne,performance:K,raycaster:D,camera:T,scene:W,onPointerMissed:$,onCreated:J,...w}){H.useMemo(()=>kr(Xm),[]);const k=Yd(),[Z,G]=gv({scroll:!0,debounce:{scroll:50,resize:0},...s}),I=H.useRef(null),ye=H.useRef(null);H.useImperativeHandle(u,()=>I.current);const _e=Fr($),[q,Q]=H.useState(!1),[oe,j]=H.useState(!1);if(q)throw q;if(oe)throw oe;const ie=H.useRef(null);Yi(()=>{const te=I.current;if(G.width>0&&G.height>0&&te){ie.current||(ie.current=cv(te));async function P(){await ie.current.configure({gl:h,scene:W,events:y,shadows:M,linear:b,flat:g,legacy:A,orthographic:x,frameloop:F,dpr:ne,performance:K,raycaster:D,camera:T,size:G,onPointerMissed:(...L)=>_e.current==null?void 0:_e.current(...L),onCreated:L=>{L.events.connect==null||L.events.connect(d?jd(d)?d.current:d:ye.current),v&&L.setEvents({compute:(ae,be)=>{const _=ae[v+"X"],Ne=ae[v+"Y"];be.pointer.set(_/be.size.width*2-1,-(Ne/be.size.height)*2+1),be.raycaster.setFromCamera(be.pointer,be.camera)}}),J?.(L)}}),ie.current.render(Te.jsx(k,{children:Te.jsx(Xd,{set:j,children:Te.jsx(H.Suspense,{fallback:Te.jsx(Zd,{set:Q}),children:l??null})})}))}P()}}),H.useEffect(()=>{const te=I.current;if(te)return()=>yh(te)},[]);const se=d?"none":"auto";return Te.jsx("div",{ref:ye,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:se,...c},...w,children:Te.jsx("div",{ref:Z,style:{width:"100%",height:"100%"},children:Te.jsx("canvas",{ref:I,style:{display:"block"},children:o})})})}function Tv(u){return Te.jsx(lh,{children:Te.jsx(_v,{...u})})}function Qn(){return Qn=Object.assign?Object.assign.bind():function(u){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var s in o)({}).hasOwnProperty.call(o,s)&&(u[s]=o[s])}return u},Qn.apply(null,arguments)}const Sh=parseInt(Ff.replace(/\D+/g,""));var Ma=Uint8Array,Xn=Uint16Array,Zr=Uint32Array,bh=new Ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mh=new Ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zv=new Ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_h=function(u,l){for(var o=new Xn(31),s=0;s<31;++s)o[s]=l+=1<<u[s-1];for(var c=new Zr(o[30]),s=1;s<30;++s)for(var h=o[s];h<o[s+1];++h)c[h]=h-o[s]<<5|s;return[o,c]},Th=_h(bh,2),zh=Th[0],Av=Th[1];zh[28]=258,Av[258]=28;var Ov=_h(Mh,0),Cv=Ov[0],Xr=new Xn(32768);for(var ct=0;ct<32768;++ct){var Yn=(ct&43690)>>>1|(ct&21845)<<1;Yn=(Yn&52428)>>>2|(Yn&13107)<<2,Yn=(Yn&61680)>>>4|(Yn&3855)<<4,Xr[ct]=((Yn&65280)>>>8|(Yn&255)<<8)>>>1}var Ui=(function(u,l,o){for(var s=u.length,c=0,h=new Xn(l);c<s;++c)++h[u[c]-1];var y=new Xn(l);for(c=0;c<l;++c)y[c]=y[c-1]+h[c-1]<<1;var d;if(o){d=new Xn(1<<l);var v=15-l;for(c=0;c<s;++c)if(u[c])for(var M=c<<4|u[c],b=l-u[c],g=y[u[c]-1]++<<b,A=g|(1<<b)-1;g<=A;++g)d[Xr[g]>>>v]=M}else for(d=new Xn(s),c=0;c<s;++c)u[c]&&(d[c]=Xr[y[u[c]-1]++]>>>15-u[c]);return d}),Xi=new Ma(288);for(var ct=0;ct<144;++ct)Xi[ct]=8;for(var ct=144;ct<256;++ct)Xi[ct]=9;for(var ct=256;ct<280;++ct)Xi[ct]=7;for(var ct=280;ct<288;++ct)Xi[ct]=8;var Ah=new Ma(32);for(var ct=0;ct<32;++ct)Ah[ct]=5;var Rv=Ui(Xi,9,1),Nv=Ui(Ah,5,1),xr=function(u){for(var l=u[0],o=1;o<u.length;++o)u[o]>l&&(l=u[o]);return l},Da=function(u,l,o){var s=l/8|0;return(u[s]|u[s+1]<<8)>>(l&7)&o},wr=function(u,l){var o=l/8|0;return(u[o]|u[o+1]<<8|u[o+2]<<16)>>(l&7)},Dv=function(u){return(u/8|0)+(u&7&&1)},xv=function(u,l,o){(o==null||o>u.length)&&(o=u.length);var s=new(u instanceof Xn?Xn:u instanceof Zr?Zr:Ma)(o-l);return s.set(u.subarray(l,o)),s},wv=function(u,l,o){var s=u.length;if(!s||o&&!o.l&&s<5)return l||new Ma(0);var c=!l||o,h=!o||o.i;o||(o={}),l||(l=new Ma(s*3));var y=function(Ae){var Ke=l.length;if(Ae>Ke){var rt=new Ma(Math.max(Ke*2,Ae));rt.set(l),l=rt}},d=o.f||0,v=o.p||0,M=o.b||0,b=o.l,g=o.d,A=o.m,x=o.n,F=s*8;do{if(!b){o.f=d=Da(u,v,1);var ne=Da(u,v+1,3);if(v+=3,ne)if(ne==1)b=Rv,g=Nv,A=9,x=5;else if(ne==2){var W=Da(u,v,31)+257,$=Da(u,v+10,15)+4,J=W+Da(u,v+5,31)+1;v+=14;for(var w=new Ma(J),k=new Ma(19),Z=0;Z<$;++Z)k[zv[Z]]=Da(u,v+Z*3,7);v+=$*3;for(var G=xr(k),I=(1<<G)-1,ye=Ui(k,G,1),Z=0;Z<J;){var _e=ye[Da(u,v,I)];v+=_e&15;var K=_e>>>4;if(K<16)w[Z++]=K;else{var q=0,Q=0;for(K==16?(Q=3+Da(u,v,3),v+=2,q=w[Z-1]):K==17?(Q=3+Da(u,v,7),v+=3):K==18&&(Q=11+Da(u,v,127),v+=7);Q--;)w[Z++]=q}}var oe=w.subarray(0,W),j=w.subarray(W);A=xr(oe),x=xr(j),b=Ui(oe,A,1),g=Ui(j,x,1)}else throw"invalid block type";else{var K=Dv(v)+4,D=u[K-4]|u[K-3]<<8,T=K+D;if(T>s){if(h)throw"unexpected EOF";break}c&&y(M+D),l.set(u.subarray(K,T),M),o.b=M+=D,o.p=v=T*8;continue}if(v>F){if(h)throw"unexpected EOF";break}}c&&y(M+131072);for(var ie=(1<<A)-1,se=(1<<x)-1,te=v;;te=v){var q=b[wr(u,v)&ie],P=q>>>4;if(v+=q&15,v>F){if(h)throw"unexpected EOF";break}if(!q)throw"invalid length/literal";if(P<256)l[M++]=P;else if(P==256){te=v,b=null;break}else{var L=P-254;if(P>264){var Z=P-257,ae=bh[Z];L=Da(u,v,(1<<ae)-1)+zh[Z],v+=ae}var be=g[wr(u,v)&se],_=be>>>4;if(!be)throw"invalid distance";v+=be&15;var j=Cv[_];if(_>3){var ae=Mh[_];j+=wr(u,v)&(1<<ae)-1,v+=ae}if(v>F){if(h)throw"unexpected EOF";break}c&&y(M+131072);for(var Ne=M+L;M<Ne;M+=4)l[M]=l[M-j],l[M+1]=l[M+1-j],l[M+2]=l[M+2-j],l[M+3]=l[M+3-j];M=Ne}}o.l=b,o.p=te,o.b=M,b&&(d=1,o.m=A,o.d=g,o.n=x)}while(!d);return M==l.length?l:xv(l,0,M)},Uv=new Ma(0),Hv=function(u){if((u[0]&15)!=8||u[0]>>>4>7||(u[0]<<8|u[1])%31)throw"invalid zlib data";if(u[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ou(u,l){return wv((Hv(u),u.subarray(2,-4)),l)}var jv=typeof TextDecoder<"u"&&new TextDecoder,Bv=0;try{jv.decode(Uv,{stream:!0}),Bv=1}catch{}const Yv=u=>u&&u.isCubeTexture;class Zv extends Ce{constructor(l,o){var s,c;const h=Yv(l),d=((c=h?(s=l.image[0])==null?void 0:s.width:l.image.width)!=null?c:1024)/4,v=Math.floor(Math.log2(d)),M=Math.pow(2,v),b=3*Math.max(M,112),g=4*M,A=[h?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/b}`,`#define CUBEUV_TEXEL_HEIGHT ${1/g}`,`#define CUBEUV_MAX_MIP ${v}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,F=A.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Sh>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,ne={map:{value:l},height:{value:o?.height||15},radius:{value:o?.radius||100}},K=new Qm(1,16),D=new qu({uniforms:ne,fragmentShader:F,vertexShader:x,side:Gu});super(K,D)}set radius(l){this.material.uniforms.radius.value=l}get radius(){return this.material.uniforms.radius.value}set height(l){this.material.uniforms.height.value=l}get height(){return this.material.uniforms.height.value}}var Xv=Object.defineProperty,Qv=(u,l,o)=>l in u?Xv(u,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[l]=o,qv=(u,l,o)=>(Qv(u,l+"",o),o);class Gv{constructor(){qv(this,"_listeners")}addEventListener(l,o){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[l]===void 0&&(s[l]=[]),s[l].indexOf(o)===-1&&s[l].push(o)}hasEventListener(l,o){if(this._listeners===void 0)return!1;const s=this._listeners;return s[l]!==void 0&&s[l].indexOf(o)!==-1}removeEventListener(l,o){if(this._listeners===void 0)return;const c=this._listeners[l];if(c!==void 0){const h=c.indexOf(o);h!==-1&&c.splice(h,1)}}dispatchEvent(l){if(this._listeners===void 0)return;const s=this._listeners[l.type];if(s!==void 0){l.target=this;const c=s.slice(0);for(let h=0,y=c.length;h<y;h++)c[h].call(this,l);l.target=null}}}var Lv=Object.defineProperty,Vv=(u,l,o)=>l in u?Lv(u,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[l]=o,X=(u,l,o)=>(Vv(u,typeof l!="symbol"?l+"":l,o),o);let Kv=class extends Hi{constructor(l,o){super(),X(this,"isTransformControls",!0),X(this,"visible",!1),X(this,"domElement"),X(this,"raycaster",new Qr),X(this,"gizmo"),X(this,"plane"),X(this,"tempVector",new de),X(this,"tempVector2",new de),X(this,"tempQuaternion",new _t),X(this,"unit",{X:new de(1,0,0),Y:new de(0,1,0),Z:new de(0,0,1)}),X(this,"pointStart",new de),X(this,"pointEnd",new de),X(this,"offset",new de),X(this,"rotationAxis",new de),X(this,"startNorm",new de),X(this,"endNorm",new de),X(this,"rotationAngle",0),X(this,"cameraPosition",new de),X(this,"cameraQuaternion",new _t),X(this,"cameraScale",new de),X(this,"parentPosition",new de),X(this,"parentQuaternion",new _t),X(this,"parentQuaternionInv",new _t),X(this,"parentScale",new de),X(this,"worldPositionStart",new de),X(this,"worldQuaternionStart",new _t),X(this,"worldScaleStart",new de),X(this,"worldPosition",new de),X(this,"worldQuaternion",new _t),X(this,"worldQuaternionInv",new _t),X(this,"worldScale",new de),X(this,"eye",new de),X(this,"positionStart",new de),X(this,"quaternionStart",new _t),X(this,"scaleStart",new de),X(this,"camera"),X(this,"object"),X(this,"enabled",!0),X(this,"axis",null),X(this,"mode","translate"),X(this,"translationSnap",null),X(this,"rotationSnap",null),X(this,"scaleSnap",null),X(this,"space","world"),X(this,"size",1),X(this,"dragging",!1),X(this,"showX",!0),X(this,"showY",!0),X(this,"showZ",!0),X(this,"changeEvent",{type:"change"}),X(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),X(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),X(this,"objectChangeEvent",{type:"objectChange"}),X(this,"intersectObjectWithRay",(c,h,y)=>{const d=h.intersectObject(c,!0);for(let v=0;v<d.length;v++)if(d[v].object.visible||y)return d[v];return!1}),X(this,"attach",c=>(this.object=c,this.visible=!0,this)),X(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),X(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),X(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),X(this,"pointerHover",c=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(c,this.camera);const h=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);h?this.axis=h.object.name:this.axis=null}),X(this,"pointerDown",c=>{if(!(this.object===void 0||this.dragging===!0||c.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(c,this.camera);const h=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(h){let y=this.space;if(this.mode==="scale"?y="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(y="world"),y==="local"&&this.mode==="rotate"){const d=this.rotationSnap;this.axis==="X"&&d&&(this.object.rotation.x=Math.round(this.object.rotation.x/d)*d),this.axis==="Y"&&d&&(this.object.rotation.y=Math.round(this.object.rotation.y/d)*d),this.axis==="Z"&&d&&(this.object.rotation.z=Math.round(this.object.rotation.z/d)*d)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(h.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),X(this,"pointerMove",c=>{const h=this.axis,y=this.mode,d=this.object;let v=this.space;if(y==="scale"?v="local":(h==="E"||h==="XYZE"||h==="XYZ")&&(v="world"),d===void 0||h===null||this.dragging===!1||c.button!==-1)return;this.raycaster.setFromCamera(c,this.camera);const M=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(M){if(this.pointEnd.copy(M.point).sub(this.worldPositionStart),y==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),v==="local"&&h!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),h.indexOf("X")===-1&&(this.offset.x=0),h.indexOf("Y")===-1&&(this.offset.y=0),h.indexOf("Z")===-1&&(this.offset.z=0),v==="local"&&h!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),d.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(v==="local"&&(d.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),h.search("X")!==-1&&(d.position.x=Math.round(d.position.x/this.translationSnap)*this.translationSnap),h.search("Y")!==-1&&(d.position.y=Math.round(d.position.y/this.translationSnap)*this.translationSnap),h.search("Z")!==-1&&(d.position.z=Math.round(d.position.z/this.translationSnap)*this.translationSnap),d.position.applyQuaternion(this.quaternionStart)),v==="world"&&(d.parent&&d.position.add(this.tempVector.setFromMatrixPosition(d.parent.matrixWorld)),h.search("X")!==-1&&(d.position.x=Math.round(d.position.x/this.translationSnap)*this.translationSnap),h.search("Y")!==-1&&(d.position.y=Math.round(d.position.y/this.translationSnap)*this.translationSnap),h.search("Z")!==-1&&(d.position.z=Math.round(d.position.z/this.translationSnap)*this.translationSnap),d.parent&&d.position.sub(this.tempVector.setFromMatrixPosition(d.parent.matrixWorld))));else if(y==="scale"){if(h.search("XYZ")!==-1){let b=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(b*=-1),this.tempVector2.set(b,b,b)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),h.search("X")===-1&&(this.tempVector2.x=1),h.search("Y")===-1&&(this.tempVector2.y=1),h.search("Z")===-1&&(this.tempVector2.z=1);d.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(h.search("X")!==-1&&(this.object.scale.x=Math.round(d.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),h.search("Y")!==-1&&(d.scale.y=Math.round(d.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),h.search("Z")!==-1&&(d.scale.z=Math.round(d.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(y==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const b=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));h==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):h==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*b):(h==="X"||h==="Y"||h==="Z")&&(this.rotationAxis.copy(this.unit[h]),this.tempVector.copy(this.unit[h]),v==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*b),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),v==="local"&&h!=="E"&&h!=="XYZE"?(d.quaternion.copy(this.quaternionStart),d.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),d.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),d.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),X(this,"pointerUp",c=>{c.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),X(this,"getPointer",c=>{var h;if(this.domElement&&((h=this.domElement.ownerDocument)!=null&&h.pointerLockElement))return{x:0,y:0,button:c.button};{const y=c.changedTouches?c.changedTouches[0]:c,d=this.domElement.getBoundingClientRect();return{x:(y.clientX-d.left)/d.width*2-1,y:-(y.clientY-d.top)/d.height*2+1,button:c.button}}}),X(this,"onPointerHover",c=>{if(this.enabled)switch(c.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(c));break}}),X(this,"onPointerDown",c=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(c)),this.pointerDown(this.getPointer(c)))}),X(this,"onPointerMove",c=>{this.enabled&&this.pointerMove(this.getPointer(c))}),X(this,"onPointerUp",c=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(c)))}),X(this,"getMode",()=>this.mode),X(this,"setMode",c=>{this.mode=c}),X(this,"setTranslationSnap",c=>{this.translationSnap=c}),X(this,"setRotationSnap",c=>{this.rotationSnap=c}),X(this,"setScaleSnap",c=>{this.scaleSnap=c}),X(this,"setSize",c=>{this.size=c}),X(this,"setSpace",c=>{this.space=c}),X(this,"update",()=>{console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),X(this,"connect",c=>{c===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=c,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),X(this,"dispose",()=>{var c,h,y,d,v,M;(c=this.domElement)==null||c.removeEventListener("pointerdown",this.onPointerDown),(h=this.domElement)==null||h.removeEventListener("pointermove",this.onPointerHover),(d=(y=this.domElement)==null?void 0:y.ownerDocument)==null||d.removeEventListener("pointermove",this.onPointerMove),(M=(v=this.domElement)==null?void 0:v.ownerDocument)==null||M.removeEventListener("pointerup",this.onPointerUp),this.traverse(b=>{const g=b;g.geometry&&g.geometry.dispose(),g.material&&g.material.dispose()})}),this.domElement=o,this.camera=l,this.gizmo=new Pv,this.add(this.gizmo),this.plane=new Jv,this.add(this.plane);const s=(c,h)=>{let y=h;Object.defineProperty(this,c,{get:function(){return y!==void 0?y:h},set:function(d){y!==d&&(y=d,this.plane[c]=d,this.gizmo[c]=d,this.dispatchEvent({type:c+"-changed",value:d}),this.dispatchEvent(this.changeEvent))}}),this[c]=h,this.plane[c]=h,this.gizmo[c]=h};s("camera",this.camera),s("object",this.object),s("enabled",this.enabled),s("axis",this.axis),s("mode",this.mode),s("translationSnap",this.translationSnap),s("rotationSnap",this.rotationSnap),s("scaleSnap",this.scaleSnap),s("space",this.space),s("size",this.size),s("dragging",this.dragging),s("showX",this.showX),s("showY",this.showY),s("showZ",this.showZ),s("worldPosition",this.worldPosition),s("worldPositionStart",this.worldPositionStart),s("worldQuaternion",this.worldQuaternion),s("worldQuaternionStart",this.worldQuaternionStart),s("cameraPosition",this.cameraPosition),s("cameraQuaternion",this.cameraQuaternion),s("pointStart",this.pointStart),s("pointEnd",this.pointEnd),s("rotationAxis",this.rotationAxis),s("rotationAngle",this.rotationAngle),s("eye",this.eye),o!==void 0&&this.connect(o)}};class Pv extends Hi{constructor(){super(),X(this,"isTransformControlsGizmo",!0),X(this,"type","TransformControlsGizmo"),X(this,"tempVector",new de(0,0,0)),X(this,"tempEuler",new qm),X(this,"alignVector",new de(0,1,0)),X(this,"zeroVector",new de(0,0,0)),X(this,"lookAtMatrix",new xi),X(this,"tempQuaternion",new _t),X(this,"tempQuaternion2",new _t),X(this,"identityQuaternion",new _t),X(this,"unitX",new de(1,0,0)),X(this,"unitY",new de(0,1,0)),X(this,"unitZ",new de(0,0,1)),X(this,"gizmo"),X(this,"picker"),X(this,"helper"),X(this,"rotationAxis",new de),X(this,"cameraPosition",new de),X(this,"worldPositionStart",new de),X(this,"worldQuaternionStart",new _t),X(this,"worldPosition",new de),X(this,"worldQuaternion",new _t),X(this,"eye",new de),X(this,"camera",null),X(this,"enabled",!0),X(this,"axis",null),X(this,"mode","translate"),X(this,"space","world"),X(this,"size",1),X(this,"dragging",!1),X(this,"showX",!0),X(this,"showY",!0),X(this,"showZ",!0),X(this,"updateMatrixWorld",()=>{let P=this.space;this.mode==="scale"&&(P="local");const L=P==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let ae=[];ae=ae.concat(this.picker[this.mode].children),ae=ae.concat(this.gizmo[this.mode].children),ae=ae.concat(this.helper[this.mode].children);for(let be=0;be<ae.length;be++){const _=ae[be];_.visible=!0,_.rotation.set(0,0,0),_.position.copy(this.worldPosition);let Ne;if(this.camera.isOrthographicCamera?Ne=(this.camera.top-this.camera.bottom)/this.camera.zoom:Ne=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),_.scale.set(1,1,1).multiplyScalar(Ne*this.size/7),_.tag==="helper"){_.visible=!1,_.name==="AXIS"?(_.position.copy(this.worldPositionStart),_.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),_.quaternion.copy(L).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(L).dot(this.eye))>.9&&(_.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),_.quaternion.copy(L).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(L).dot(this.eye))>.9&&(_.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),_.quaternion.copy(L).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(L).dot(this.eye))>.9&&(_.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),_.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),_.quaternion.multiply(this.tempQuaternion),_.visible=this.dragging),this.axis==="E"&&(_.visible=!1)):_.name==="START"?(_.position.copy(this.worldPositionStart),_.visible=this.dragging):_.name==="END"?(_.position.copy(this.worldPosition),_.visible=this.dragging):_.name==="DELTA"?(_.position.copy(this.worldPositionStart),_.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),_.scale.copy(this.tempVector),_.visible=this.dragging):(_.quaternion.copy(L),this.dragging?_.position.copy(this.worldPositionStart):_.position.copy(this.worldPosition),this.axis&&(_.visible=this.axis.search(_.name)!==-1));continue}_.quaternion.copy(L),this.mode==="translate"||this.mode==="scale"?((_.name==="X"||_.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(L).dot(this.eye))>.99&&(_.scale.set(1e-10,1e-10,1e-10),_.visible=!1),(_.name==="Y"||_.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(L).dot(this.eye))>.99&&(_.scale.set(1e-10,1e-10,1e-10),_.visible=!1),(_.name==="Z"||_.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(L).dot(this.eye))>.99&&(_.scale.set(1e-10,1e-10,1e-10),_.visible=!1),_.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(L).dot(this.eye))<.2&&(_.scale.set(1e-10,1e-10,1e-10),_.visible=!1),_.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(L).dot(this.eye))<.2&&(_.scale.set(1e-10,1e-10,1e-10),_.visible=!1),_.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(L).dot(this.eye))<.2&&(_.scale.set(1e-10,1e-10,1e-10),_.visible=!1),_.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(L).dot(this.eye)<0?_.tag==="fwd"?_.visible=!1:_.scale.x*=-1:_.tag==="bwd"&&(_.visible=!1)),_.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(L).dot(this.eye)<0?_.tag==="fwd"?_.visible=!1:_.scale.y*=-1:_.tag==="bwd"&&(_.visible=!1)),_.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(L).dot(this.eye)<0?_.tag==="fwd"?_.visible=!1:_.scale.z*=-1:_.tag==="bwd"&&(_.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(L),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(L).invert()),_.name.search("E")!==-1&&_.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),_.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),_.quaternion.copy(this.tempQuaternion)),_.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),_.quaternion.copy(this.tempQuaternion)),_.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),_.quaternion.copy(this.tempQuaternion))),_.visible=_.visible&&(_.name.indexOf("X")===-1||this.showX),_.visible=_.visible&&(_.name.indexOf("Y")===-1||this.showY),_.visible=_.visible&&(_.name.indexOf("Z")===-1||this.showZ),_.visible=_.visible&&(_.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),_.material.tempOpacity=_.material.tempOpacity||_.material.opacity,_.material.tempColor=_.material.tempColor||_.material.color.clone(),_.material.color.copy(_.material.tempColor),_.material.opacity=_.material.tempOpacity,this.enabled?this.axis&&(_.name===this.axis?(_.material.opacity=1,_.material.color.lerp(new Pa(1,1,1),.5)):this.axis.split("").some(function(Ae){return _.name===Ae})?(_.material.opacity=1,_.material.color.lerp(new Pa(1,1,1),.5)):(_.material.opacity*=.25,_.material.color.lerp(new Pa(1,1,1),.5))):(_.material.opacity*=.5,_.material.color.lerp(new Pa(1,1,1),.5))}super.updateMatrixWorld()});const l=new Lr({depthTest:!1,depthWrite:!1,transparent:!0,side:Gu,fog:!1,toneMapped:!1}),o=new Gm({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),s=l.clone();s.opacity=.15;const c=l.clone();c.opacity=.33;const h=l.clone();h.color.set(16711680);const y=l.clone();y.color.set(65280);const d=l.clone();d.color.set(255);const v=l.clone();v.opacity=.25;const M=v.clone();M.color.set(16776960);const b=v.clone();b.color.set(65535);const g=v.clone();g.color.set(16711935),l.clone().color.set(16776960);const x=o.clone();x.color.set(16711680);const F=o.clone();F.color.set(65280);const ne=o.clone();ne.color.set(255);const K=o.clone();K.color.set(65535);const D=o.clone();D.color.set(16711935);const T=o.clone();T.color.set(16776960);const W=o.clone();W.color.set(7895160);const $=T.clone();$.opacity=.25;const J=new Na(0,.05,.2,12,1,!1),w=new hl(.125,.125,.125),k=new mr;k.setAttribute("position",new dr([0,0,0,1,0,0],3));const Z=(P,L)=>{const ae=new mr,be=[];for(let _=0;_<=64*L;++_)be.push(0,Math.cos(_/32*Math.PI)*P,Math.sin(_/32*Math.PI)*P);return ae.setAttribute("position",new dr(be,3)),ae},G=()=>{const P=new mr;return P.setAttribute("position",new dr([0,0,0,1,1,1],3)),P},I={X:[[new Ce(J,h),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new Ce(J,h),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new Pe(k,x)]],Y:[[new Ce(J,y),[0,1,0],null,null,"fwd"],[new Ce(J,y),[0,1,0],[Math.PI,0,0],null,"bwd"],[new Pe(k,F),null,[0,0,Math.PI/2]]],Z:[[new Ce(J,d),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new Ce(J,d),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new Pe(k,ne),null,[0,-Math.PI/2,0]]],XYZ:[[new Ce(new pl(.1,0),v.clone()),[0,0,0],[0,0,0]]],XY:[[new Ce(new dn(.295,.295),M.clone()),[.15,.15,0]],[new Pe(k,T),[.18,.3,0],null,[.125,1,1]],[new Pe(k,T),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new Ce(new dn(.295,.295),b.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new Pe(k,K),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new Pe(k,K),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new Ce(new dn(.295,.295),g.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new Pe(k,D),[.18,0,.3],null,[.125,1,1]],[new Pe(k,D),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},ye={X:[[new Ce(new Na(.2,0,1,4,1,!1),s),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new Ce(new Na(.2,0,1,4,1,!1),s),[0,.6,0]]],Z:[[new Ce(new Na(.2,0,1,4,1,!1),s),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new Ce(new pl(.2,0),s)]],XY:[[new Ce(new dn(.4,.4),s),[.2,.2,0]]],YZ:[[new Ce(new dn(.4,.4),s),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new Ce(new dn(.4,.4),s),[.2,0,.2],[-Math.PI/2,0,0]]]},_e={START:[[new Ce(new pl(.01,2),c),null,null,null,"helper"]],END:[[new Ce(new pl(.01,2),c),null,null,null,"helper"]],DELTA:[[new Pe(G(),c),null,null,null,"helper"]],X:[[new Pe(k,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Pe(k,c.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Pe(k,c.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},q={X:[[new Pe(Z(1,.5),x)],[new Ce(new pl(.04,0),h),[0,0,.99],null,[1,3,1]]],Y:[[new Pe(Z(1,.5),F),null,[0,0,-Math.PI/2]],[new Ce(new pl(.04,0),y),[0,0,.99],null,[3,1,1]]],Z:[[new Pe(Z(1,.5),ne),null,[0,Math.PI/2,0]],[new Ce(new pl(.04,0),d),[.99,0,0],null,[1,3,1]]],E:[[new Pe(Z(1.25,1),$),null,[0,Math.PI/2,0]],[new Ce(new Na(.03,0,.15,4,1,!1),$),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new Ce(new Na(.03,0,.15,4,1,!1),$),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new Ce(new Na(.03,0,.15,4,1,!1),$),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new Ce(new Na(.03,0,.15,4,1,!1),$),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new Pe(Z(1,1),W),null,[0,Math.PI/2,0]]]},Q={AXIS:[[new Pe(k,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},oe={X:[[new Ce(new Tu(1,.1,4,24),s),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Ce(new Tu(1,.1,4,24),s),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Ce(new Tu(1,.1,4,24),s),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Ce(new Tu(1.25,.1,2,24),s)]],XYZE:[[new Ce(new Lm(.7,10,8),s)]]},j={X:[[new Ce(w,h),[.8,0,0],[0,0,-Math.PI/2]],[new Pe(k,x),null,null,[.8,1,1]]],Y:[[new Ce(w,y),[0,.8,0]],[new Pe(k,F),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new Ce(w,d),[0,0,.8],[Math.PI/2,0,0]],[new Pe(k,ne),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new Ce(w,M),[.85,.85,0],null,[2,2,.2]],[new Pe(k,T),[.855,.98,0],null,[.125,1,1]],[new Pe(k,T),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new Ce(w,b),[0,.85,.85],null,[.2,2,2]],[new Pe(k,K),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new Pe(k,K),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new Ce(w,g),[.85,0,.85],null,[2,.2,2]],[new Pe(k,D),[.855,0,.98],null,[.125,1,1]],[new Pe(k,D),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new Ce(new hl(.125,.125,.125),v.clone()),[1.1,0,0]]],XYZY:[[new Ce(new hl(.125,.125,.125),v.clone()),[0,1.1,0]]],XYZZ:[[new Ce(new hl(.125,.125,.125),v.clone()),[0,0,1.1]]]},ie={X:[[new Ce(new Na(.2,0,.8,4,1,!1),s),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new Ce(new Na(.2,0,.8,4,1,!1),s),[0,.5,0]]],Z:[[new Ce(new Na(.2,0,.8,4,1,!1),s),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new Ce(w,s),[.85,.85,0],null,[3,3,.2]]],YZ:[[new Ce(w,s),[0,.85,.85],null,[.2,3,3]]],XZ:[[new Ce(w,s),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new Ce(new hl(.2,.2,.2),s),[1.1,0,0]]],XYZY:[[new Ce(new hl(.2,.2,.2),s),[0,1.1,0]]],XYZZ:[[new Ce(new hl(.2,.2,.2),s),[0,0,1.1]]]},se={X:[[new Pe(k,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Pe(k,c.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Pe(k,c.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},te=P=>{const L=new Hi;for(let ae in P)for(let be=P[ae].length;be--;){const _=P[ae][be][0].clone(),Ne=P[ae][be][1],Ae=P[ae][be][2],Ke=P[ae][be][3],rt=P[ae][be][4];_.name=ae,_.tag=rt,Ne&&_.position.set(Ne[0],Ne[1],Ne[2]),Ae&&_.rotation.set(Ae[0],Ae[1],Ae[2]),Ke&&_.scale.set(Ke[0],Ke[1],Ke[2]),_.updateMatrix();const zt=_.geometry.clone();zt.applyMatrix4(_.matrix),_.geometry=zt,_.renderOrder=1/0,_.position.set(0,0,0),_.rotation.set(0,0,0),_.scale.set(1,1,1),L.add(_)}return L};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=te(I)),this.add(this.gizmo.rotate=te(q)),this.add(this.gizmo.scale=te(j)),this.add(this.picker.translate=te(ye)),this.add(this.picker.rotate=te(oe)),this.add(this.picker.scale=te(ie)),this.add(this.helper.translate=te(_e)),this.add(this.helper.rotate=te(Q)),this.add(this.helper.scale=te(se)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class Jv extends Ce{constructor(){super(new dn(1e5,1e5,2,2),new Lr({visible:!1,wireframe:!0,side:Gu,transparent:!0,opacity:.1,toneMapped:!1})),X(this,"isTransformControlsPlane",!0),X(this,"type","TransformControlsPlane"),X(this,"unitX",new de(1,0,0)),X(this,"unitY",new de(0,1,0)),X(this,"unitZ",new de(0,0,1)),X(this,"tempVector",new de),X(this,"dirVector",new de),X(this,"alignVector",new de),X(this,"tempMatrix",new xi),X(this,"identityQuaternion",new _t),X(this,"cameraQuaternion",new _t),X(this,"worldPosition",new de),X(this,"worldQuaternion",new _t),X(this,"eye",new de),X(this,"axis",null),X(this,"mode","translate"),X(this,"space","world"),X(this,"updateMatrixWorld",()=>{let l=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(l="local"),this.unitX.set(1,0,0).applyQuaternion(l==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(l==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(l==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}var Fv=Object.defineProperty,Iv=(u,l,o)=>l in u?Fv(u,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[l]=o,Re=(u,l,o)=>(Iv(u,typeof l!="symbol"?l+"":l,o),o);const Cu=new Vm,Gf=new If,Wv=Math.cos(70*(Math.PI/180)),Lf=(u,l)=>(u%l+l)%l;let kv=class extends Gv{constructor(l,o){super(),Re(this,"object"),Re(this,"domElement"),Re(this,"enabled",!0),Re(this,"target",new de),Re(this,"minDistance",0),Re(this,"maxDistance",1/0),Re(this,"minZoom",0),Re(this,"maxZoom",1/0),Re(this,"minPolarAngle",0),Re(this,"maxPolarAngle",Math.PI),Re(this,"minAzimuthAngle",-1/0),Re(this,"maxAzimuthAngle",1/0),Re(this,"enableDamping",!1),Re(this,"dampingFactor",.05),Re(this,"enableZoom",!0),Re(this,"zoomSpeed",1),Re(this,"enableRotate",!0),Re(this,"rotateSpeed",1),Re(this,"enablePan",!0),Re(this,"panSpeed",1),Re(this,"screenSpacePanning",!0),Re(this,"keyPanSpeed",7),Re(this,"zoomToCursor",!1),Re(this,"autoRotate",!1),Re(this,"autoRotateSpeed",2),Re(this,"reverseOrbit",!1),Re(this,"reverseHorizontalOrbit",!1),Re(this,"reverseVerticalOrbit",!1),Re(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Re(this,"mouseButtons",{LEFT:ql.ROTATE,MIDDLE:ql.DOLLY,RIGHT:ql.PAN}),Re(this,"touches",{ONE:Gl.ROTATE,TWO:Gl.DOLLY_PAN}),Re(this,"target0"),Re(this,"position0"),Re(this,"zoom0"),Re(this,"_domElementKeyEvents",null),Re(this,"getPolarAngle"),Re(this,"getAzimuthalAngle"),Re(this,"setPolarAngle"),Re(this,"setAzimuthalAngle"),Re(this,"getDistance"),Re(this,"getZoomScale"),Re(this,"listenToKeyEvents"),Re(this,"stopListenToKeyEvents"),Re(this,"saveState"),Re(this,"reset"),Re(this,"update"),Re(this,"connect"),Re(this,"dispose"),Re(this,"dollyIn"),Re(this,"dollyOut"),Re(this,"getScale"),Re(this,"setScale"),this.object=l,this.domElement=o,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>b.phi,this.getAzimuthalAngle=()=>b.theta,this.setPolarAngle=z=>{let ue=Lf(z,2*Math.PI),Se=b.phi;Se<0&&(Se+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let Xe=Math.abs(ue-Se);2*Math.PI-Xe<Xe&&(ue<Se?ue+=2*Math.PI:Se+=2*Math.PI),g.phi=ue-Se,s.update()},this.setAzimuthalAngle=z=>{let ue=Lf(z,2*Math.PI),Se=b.theta;Se<0&&(Se+=2*Math.PI),ue<0&&(ue+=2*Math.PI);let Xe=Math.abs(ue-Se);2*Math.PI-Xe<Xe&&(ue<Se?ue+=2*Math.PI:Se+=2*Math.PI),g.theta=ue-Se,s.update()},this.getDistance=()=>s.object.position.distanceTo(s.target),this.listenToKeyEvents=z=>{z.addEventListener("keydown",gn),this._domElementKeyEvents=z},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",gn),this._domElementKeyEvents=null},this.saveState=()=>{s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=()=>{s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),v=d.NONE},this.update=(()=>{const z=new de,ue=new de(0,1,0),Se=new _t().setFromUnitVectors(l.up,ue),Xe=Se.clone().invert(),he=new de,Et=new _t,Wt=2*Math.PI;return function(){const Kn=s.object.position;Se.setFromUnitVectors(l.up,ue),Xe.copy(Se).invert(),z.copy(Kn).sub(s.target),z.applyQuaternion(Se),b.setFromVector3(z),s.autoRotate&&v===d.NONE&&Q(_e()),s.enableDamping?(b.theta+=g.theta*s.dampingFactor,b.phi+=g.phi*s.dampingFactor):(b.theta+=g.theta,b.phi+=g.phi);let Vt=s.minAzimuthAngle,wt=s.maxAzimuthAngle;isFinite(Vt)&&isFinite(wt)&&(Vt<-Math.PI?Vt+=Wt:Vt>Math.PI&&(Vt-=Wt),wt<-Math.PI?wt+=Wt:wt>Math.PI&&(wt-=Wt),Vt<=wt?b.theta=Math.max(Vt,Math.min(wt,b.theta)):b.theta=b.theta>(Vt+wt)/2?Math.max(Vt,b.theta):Math.min(wt,b.theta)),b.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,b.phi)),b.makeSafe(),s.enableDamping===!0?s.target.addScaledVector(x,s.dampingFactor):s.target.add(x),s.zoomToCursor&&G||s.object.isOrthographicCamera?b.radius=be(b.radius):b.radius=be(b.radius*A),z.setFromSpherical(b),z.applyQuaternion(Xe),Kn.copy(s.target).add(z),s.object.matrixAutoUpdate||s.object.updateMatrix(),s.object.lookAt(s.target),s.enableDamping===!0?(g.theta*=1-s.dampingFactor,g.phi*=1-s.dampingFactor,x.multiplyScalar(1-s.dampingFactor)):(g.set(0,0,0),x.set(0,0,0));let kt=!1;if(s.zoomToCursor&&G){let pa=null;if(s.object instanceof Nu&&s.object.isPerspectiveCamera){const Ya=z.length();pa=be(Ya*A);const $a=Ya-pa;s.object.position.addScaledVector(k,$a),s.object.updateMatrixWorld()}else if(s.object.isOrthographicCamera){const Ya=new de(Z.x,Z.y,0);Ya.unproject(s.object),s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/A)),s.object.updateProjectionMatrix(),kt=!0;const $a=new de(Z.x,Z.y,0);$a.unproject(s.object),s.object.position.sub($a).add(Ya),s.object.updateMatrixWorld(),pa=z.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),s.zoomToCursor=!1;pa!==null&&(s.screenSpacePanning?s.target.set(0,0,-1).transformDirection(s.object.matrix).multiplyScalar(pa).add(s.object.position):(Cu.origin.copy(s.object.position),Cu.direction.set(0,0,-1).transformDirection(s.object.matrix),Math.abs(s.object.up.dot(Cu.direction))<Wv?l.lookAt(s.target):(Gf.setFromNormalAndCoplanarPoint(s.object.up,s.target),Cu.intersectPlane(Gf,s.target))))}else s.object instanceof Di&&s.object.isOrthographicCamera&&(kt=A!==1,kt&&(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/A)),s.object.updateProjectionMatrix()));return A=1,G=!1,kt||he.distanceToSquared(s.object.position)>M||8*(1-Et.dot(s.object.quaternion))>M?(s.dispatchEvent(c),he.copy(s.object.position),Et.copy(s.object.quaternion),kt=!1,!0):!1}})(),this.connect=z=>{s.domElement=z,s.domElement.style.touchAction="none",s.domElement.addEventListener("contextmenu",En),s.domElement.addEventListener("pointerdown",vl),s.domElement.addEventListener("pointercancel",Ba),s.domElement.addEventListener("wheel",yn)},this.dispose=()=>{var z,ue,Se,Xe,he,Et;s.domElement&&(s.domElement.style.touchAction="auto"),(z=s.domElement)==null||z.removeEventListener("contextmenu",En),(ue=s.domElement)==null||ue.removeEventListener("pointerdown",vl),(Se=s.domElement)==null||Se.removeEventListener("pointercancel",Ba),(Xe=s.domElement)==null||Xe.removeEventListener("wheel",yn),(he=s.domElement)==null||he.ownerDocument.removeEventListener("pointermove",Wa),(Et=s.domElement)==null||Et.ownerDocument.removeEventListener("pointerup",Ba),s._domElementKeyEvents!==null&&s._domElementKeyEvents.removeEventListener("keydown",gn)};const s=this,c={type:"change"},h={type:"start"},y={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let v=d.NONE;const M=1e-6,b=new Ef,g=new Ef;let A=1;const x=new de,F=new ca,ne=new ca,K=new ca,D=new ca,T=new ca,W=new ca,$=new ca,J=new ca,w=new ca,k=new de,Z=new ca;let G=!1;const I=[],ye={};function _e(){return 2*Math.PI/60/60*s.autoRotateSpeed}function q(){return Math.pow(.95,s.zoomSpeed)}function Q(z){s.reverseOrbit||s.reverseHorizontalOrbit?g.theta+=z:g.theta-=z}function oe(z){s.reverseOrbit||s.reverseVerticalOrbit?g.phi+=z:g.phi-=z}const j=(()=>{const z=new de;return function(Se,Xe){z.setFromMatrixColumn(Xe,0),z.multiplyScalar(-Se),x.add(z)}})(),ie=(()=>{const z=new de;return function(Se,Xe){s.screenSpacePanning===!0?z.setFromMatrixColumn(Xe,1):(z.setFromMatrixColumn(Xe,0),z.crossVectors(s.object.up,z)),z.multiplyScalar(Se),x.add(z)}})(),se=(()=>{const z=new de;return function(Se,Xe){const he=s.domElement;if(he&&s.object instanceof Nu&&s.object.isPerspectiveCamera){const Et=s.object.position;z.copy(Et).sub(s.target);let Wt=z.length();Wt*=Math.tan(s.object.fov/2*Math.PI/180),j(2*Se*Wt/he.clientHeight,s.object.matrix),ie(2*Xe*Wt/he.clientHeight,s.object.matrix)}else he&&s.object instanceof Di&&s.object.isOrthographicCamera?(j(Se*(s.object.right-s.object.left)/s.object.zoom/he.clientWidth,s.object.matrix),ie(Xe*(s.object.top-s.object.bottom)/s.object.zoom/he.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}})();function te(z){s.object instanceof Nu&&s.object.isPerspectiveCamera||s.object instanceof Di&&s.object.isOrthographicCamera?A=z:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function P(z){te(A/z)}function L(z){te(A*z)}function ae(z){if(!s.zoomToCursor||!s.domElement)return;G=!0;const ue=s.domElement.getBoundingClientRect(),Se=z.clientX-ue.left,Xe=z.clientY-ue.top,he=ue.width,Et=ue.height;Z.x=Se/he*2-1,Z.y=-(Xe/Et)*2+1,k.set(Z.x,Z.y,1).unproject(s.object).sub(s.object.position).normalize()}function be(z){return Math.max(s.minDistance,Math.min(s.maxDistance,z))}function _(z){F.set(z.clientX,z.clientY)}function Ne(z){ae(z),$.set(z.clientX,z.clientY)}function Ae(z){D.set(z.clientX,z.clientY)}function Ke(z){ne.set(z.clientX,z.clientY),K.subVectors(ne,F).multiplyScalar(s.rotateSpeed);const ue=s.domElement;ue&&(Q(2*Math.PI*K.x/ue.clientHeight),oe(2*Math.PI*K.y/ue.clientHeight)),F.copy(ne),s.update()}function rt(z){J.set(z.clientX,z.clientY),w.subVectors(J,$),w.y>0?P(q()):w.y<0&&L(q()),$.copy(J),s.update()}function zt(z){T.set(z.clientX,z.clientY),W.subVectors(T,D).multiplyScalar(s.panSpeed),se(W.x,W.y),D.copy(T),s.update()}function xa(z){ae(z),z.deltaY<0?L(q()):z.deltaY>0&&P(q()),s.update()}function wa(z){let ue=!1;switch(z.code){case s.keys.UP:se(0,s.keyPanSpeed),ue=!0;break;case s.keys.BOTTOM:se(0,-s.keyPanSpeed),ue=!0;break;case s.keys.LEFT:se(s.keyPanSpeed,0),ue=!0;break;case s.keys.RIGHT:se(-s.keyPanSpeed,0),ue=!0;break}ue&&(z.preventDefault(),s.update())}function Ua(){if(I.length==1)F.set(I[0].pageX,I[0].pageY);else{const z=.5*(I[0].pageX+I[1].pageX),ue=.5*(I[0].pageY+I[1].pageY);F.set(z,ue)}}function Ta(){if(I.length==1)D.set(I[0].pageX,I[0].pageY);else{const z=.5*(I[0].pageX+I[1].pageX),ue=.5*(I[0].pageY+I[1].pageY);D.set(z,ue)}}function Ha(){const z=I[0].pageX-I[1].pageX,ue=I[0].pageY-I[1].pageY,Se=Math.sqrt(z*z+ue*ue);$.set(0,Se)}function Fa(){s.enableZoom&&Ha(),s.enablePan&&Ta()}function qn(){s.enableZoom&&Ha(),s.enableRotate&&Ua()}function It(z){if(I.length==1)ne.set(z.pageX,z.pageY);else{const Se=ha(z),Xe=.5*(z.pageX+Se.x),he=.5*(z.pageY+Se.y);ne.set(Xe,he)}K.subVectors(ne,F).multiplyScalar(s.rotateSpeed);const ue=s.domElement;ue&&(Q(2*Math.PI*K.x/ue.clientHeight),oe(2*Math.PI*K.y/ue.clientHeight)),F.copy(ne)}function Gn(z){if(I.length==1)T.set(z.pageX,z.pageY);else{const ue=ha(z),Se=.5*(z.pageX+ue.x),Xe=.5*(z.pageY+ue.y);T.set(Se,Xe)}W.subVectors(T,D).multiplyScalar(s.panSpeed),se(W.x,W.y),D.copy(T)}function Ia(z){const ue=ha(z),Se=z.pageX-ue.x,Xe=z.pageY-ue.y,he=Math.sqrt(Se*Se+Xe*Xe);J.set(0,he),w.set(0,Math.pow(J.y/$.y,s.zoomSpeed)),P(w.y),$.copy(J)}function Lt(z){s.enableZoom&&Ia(z),s.enablePan&&Gn(z)}function ja(z){s.enableZoom&&Ia(z),s.enableRotate&&It(z)}function vl(z){var ue,Se;s.enabled!==!1&&(I.length===0&&((ue=s.domElement)==null||ue.ownerDocument.addEventListener("pointermove",Wa),(Se=s.domElement)==null||Se.ownerDocument.addEventListener("pointerup",Ba)),Ln(z),z.pointerType==="touch"?ka(z):vn(z))}function Wa(z){s.enabled!==!1&&(z.pointerType==="touch"?ti(z):ei(z))}function Ba(z){var ue,Se,Xe;xt(z),I.length===0&&((ue=s.domElement)==null||ue.releasePointerCapture(z.pointerId),(Se=s.domElement)==null||Se.ownerDocument.removeEventListener("pointermove",Wa),(Xe=s.domElement)==null||Xe.ownerDocument.removeEventListener("pointerup",Ba)),s.dispatchEvent(y),v=d.NONE}function vn(z){let ue;switch(z.button){case 0:ue=s.mouseButtons.LEFT;break;case 1:ue=s.mouseButtons.MIDDLE;break;case 2:ue=s.mouseButtons.RIGHT;break;default:ue=-1}switch(ue){case ql.DOLLY:if(s.enableZoom===!1)return;Ne(z),v=d.DOLLY;break;case ql.ROTATE:if(z.ctrlKey||z.metaKey||z.shiftKey){if(s.enablePan===!1)return;Ae(z),v=d.PAN}else{if(s.enableRotate===!1)return;_(z),v=d.ROTATE}break;case ql.PAN:if(z.ctrlKey||z.metaKey||z.shiftKey){if(s.enableRotate===!1)return;_(z),v=d.ROTATE}else{if(s.enablePan===!1)return;Ae(z),v=d.PAN}break;default:v=d.NONE}v!==d.NONE&&s.dispatchEvent(h)}function ei(z){if(s.enabled!==!1)switch(v){case d.ROTATE:if(s.enableRotate===!1)return;Ke(z);break;case d.DOLLY:if(s.enableZoom===!1)return;rt(z);break;case d.PAN:if(s.enablePan===!1)return;zt(z);break}}function yn(z){s.enabled===!1||s.enableZoom===!1||v!==d.NONE&&v!==d.ROTATE||(z.preventDefault(),s.dispatchEvent(h),xa(z),s.dispatchEvent(y))}function gn(z){s.enabled===!1||s.enablePan===!1||wa(z)}function ka(z){switch(lt(z),I.length){case 1:switch(s.touches.ONE){case Gl.ROTATE:if(s.enableRotate===!1)return;Ua(),v=d.TOUCH_ROTATE;break;case Gl.PAN:if(s.enablePan===!1)return;Ta(),v=d.TOUCH_PAN;break;default:v=d.NONE}break;case 2:switch(s.touches.TWO){case Gl.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;Fa(),v=d.TOUCH_DOLLY_PAN;break;case Gl.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;qn(),v=d.TOUCH_DOLLY_ROTATE;break;default:v=d.NONE}break;default:v=d.NONE}v!==d.NONE&&s.dispatchEvent(h)}function ti(z){switch(lt(z),v){case d.TOUCH_ROTATE:if(s.enableRotate===!1)return;It(z),s.update();break;case d.TOUCH_PAN:if(s.enablePan===!1)return;Gn(z),s.update();break;case d.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;Lt(z),s.update();break;case d.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;ja(z),s.update();break;default:v=d.NONE}}function En(z){s.enabled!==!1&&z.preventDefault()}function Ln(z){I.push(z)}function xt(z){delete ye[z.pointerId];for(let ue=0;ue<I.length;ue++)if(I[ue].pointerId==z.pointerId){I.splice(ue,1);return}}function lt(z){let ue=ye[z.pointerId];ue===void 0&&(ue=new ca,ye[z.pointerId]=ue),ue.set(z.pageX,z.pageY)}function ha(z){const ue=z.pointerId===I[0].pointerId?I[1]:I[0];return ye[ue.pointerId]}this.dollyIn=(z=q())=>{L(z),s.update()},this.dollyOut=(z=q())=>{P(z),s.update()},this.getScale=()=>A,this.setScale=z=>{te(z),s.update()},this.getZoomScale=()=>q(),o!==void 0&&this.connect(o),this.update()}};class $v extends Wf{constructor(l){super(l),this.type=fa}parse(l){const y=function(Z,G){switch(Z){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(G||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(G||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(G||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(G||""))}},g=function(Z,G,I){G=G||1024;let _e=Z.pos,q=-1,Q=0,oe="",j=String.fromCharCode.apply(null,new Uint16Array(Z.subarray(_e,_e+128)));for(;0>(q=j.indexOf(`
`))&&Q<G&&_e<Z.byteLength;)oe+=j,Q+=j.length,_e+=128,j+=String.fromCharCode.apply(null,new Uint16Array(Z.subarray(_e,_e+128)));return-1<q?(Z.pos+=Q+q+1,oe+j.slice(0,q)):!1},A=function(Z){const G=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,ye=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,_e=/^\s*FORMAT=(\S+)\s*$/,q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Q={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let oe,j;for((Z.pos>=Z.byteLength||!(oe=g(Z)))&&y(1,"no header found"),(j=oe.match(G))||y(3,"bad initial token"),Q.valid|=1,Q.programtype=j[1],Q.string+=oe+`
`;oe=g(Z),oe!==!1;){if(Q.string+=oe+`
`,oe.charAt(0)==="#"){Q.comments+=oe+`
`;continue}if((j=oe.match(I))&&(Q.gamma=parseFloat(j[1])),(j=oe.match(ye))&&(Q.exposure=parseFloat(j[1])),(j=oe.match(_e))&&(Q.valid|=2,Q.format=j[1]),(j=oe.match(q))&&(Q.valid|=4,Q.height=parseInt(j[1],10),Q.width=parseInt(j[2],10)),Q.valid&2&&Q.valid&4)break}return Q.valid&2||y(3,"missing format specifier"),Q.valid&4||y(3,"missing image size specifier"),Q},x=function(Z,G,I){const ye=G;if(ye<8||ye>32767||Z[0]!==2||Z[1]!==2||Z[2]&128)return new Uint8Array(Z);ye!==(Z[2]<<8|Z[3])&&y(3,"wrong scanline width");const _e=new Uint8Array(4*G*I);_e.length||y(4,"unable to allocate buffer space");let q=0,Q=0;const oe=4*ye,j=new Uint8Array(4),ie=new Uint8Array(oe);let se=I;for(;se>0&&Q<Z.byteLength;){Q+4>Z.byteLength&&y(1),j[0]=Z[Q++],j[1]=Z[Q++],j[2]=Z[Q++],j[3]=Z[Q++],(j[0]!=2||j[1]!=2||(j[2]<<8|j[3])!=ye)&&y(3,"bad rgbe scanline format");let te=0,P;for(;te<oe&&Q<Z.byteLength;){P=Z[Q++];const ae=P>128;if(ae&&(P-=128),(P===0||te+P>oe)&&y(3,"bad scanline data"),ae){const be=Z[Q++];for(let _=0;_<P;_++)ie[te++]=be}else ie.set(Z.subarray(Q,Q+P),te),te+=P,Q+=P}const L=ye;for(let ae=0;ae<L;ae++){let be=0;_e[q]=ie[ae+be],be+=ye,_e[q+1]=ie[ae+be],be+=ye,_e[q+2]=ie[ae+be],be+=ye,_e[q+3]=ie[ae+be],q+=4}se--}return _e},F=function(Z,G,I,ye){const _e=Z[G+3],q=Math.pow(2,_e-128)/255;I[ye+0]=Z[G+0]*q,I[ye+1]=Z[G+1]*q,I[ye+2]=Z[G+2]*q,I[ye+3]=1},ne=function(Z,G,I,ye){const _e=Z[G+3],q=Math.pow(2,_e-128)/255;I[ye+0]=Pl.toHalfFloat(Math.min(Z[G+0]*q,65504)),I[ye+1]=Pl.toHalfFloat(Math.min(Z[G+1]*q,65504)),I[ye+2]=Pl.toHalfFloat(Math.min(Z[G+2]*q,65504)),I[ye+3]=Pl.toHalfFloat(1)},K=new Uint8Array(l);K.pos=0;const D=A(K),T=D.width,W=D.height,$=x(K.subarray(K.pos),T,W);let J,w,k;switch(this.type){case Ja:k=$.length/4;const Z=new Float32Array(k*4);for(let I=0;I<k;I++)F($,I*4,Z,I*4);J=Z,w=Ja;break;case fa:k=$.length/4;const G=new Uint16Array(k*4);for(let I=0;I<k;I++)ne($,I*4,G,I*4);J=G,w=fa;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:T,height:W,data:J,header:D.string,gamma:D.gamma,exposure:D.exposure,type:w}}setDataType(l){return this.type=l,this}load(l,o,s,c){function h(y,d){switch(y.type){case Ja:case fa:"colorSpace"in y?y.colorSpace="srgb-linear":y.encoding=3e3,y.minFilter=_a,y.magFilter=_a,y.generateMipmaps=!1,y.flipY=!0;break}o&&o(y,d)}return super.load(l,h,s,c)}}const Oi=Sh>=152;class e0 extends Wf{constructor(l){super(l),this.type=fa}parse(l){const G=Math.pow(2.7182818,2.2);function I(f,m){for(var S=0,N=0;N<65536;++N)(N==0||f[N>>3]&1<<(N&7))&&(m[S++]=N);for(var Y=S-1;S<65536;)m[S++]=0;return Y}function ye(f){for(var m=0;m<16384;m++)f[m]={},f[m].len=0,f[m].lit=0,f[m].p=null}const _e={l:0,c:0,lc:0};function q(f,m,S,N,Y){for(;S<f;)m=m<<8|ha(N,Y),S+=8;S-=f,_e.l=m>>S&(1<<f)-1,_e.c=m,_e.lc=S}const Q=new Array(59);function oe(f){for(var m=0;m<=58;++m)Q[m]=0;for(var m=0;m<65537;++m)Q[f[m]]+=1;for(var S=0,m=58;m>0;--m){var N=S+Q[m]>>1;Q[m]=S,S=N}for(var m=0;m<65537;++m){var Y=f[m];Y>0&&(f[m]=Y|Q[Y]++<<6)}}function j(f,m,S,N,Y,B,fe){for(var le=S,re=0,ee=0;Y<=B;Y++){if(le.value-S.value>N)return!1;q(6,re,ee,f,le);var ve=_e.l;if(re=_e.c,ee=_e.lc,fe[Y]=ve,ve==63){if(le.value-S.value>N)throw"Something wrong with hufUnpackEncTable";q(8,re,ee,f,le);var me=_e.l+6;if(re=_e.c,ee=_e.lc,Y+me>B+1)throw"Something wrong with hufUnpackEncTable";for(;me--;)fe[Y++]=0;Y--}else if(ve>=59){var me=ve-59+2;if(Y+me>B+1)throw"Something wrong with hufUnpackEncTable";for(;me--;)fe[Y++]=0;Y--}}oe(fe)}function ie(f){return f&63}function se(f){return f>>6}function te(f,m,S,N){for(;m<=S;m++){var Y=se(f[m]),B=ie(f[m]);if(Y>>B)throw"Invalid table entry";if(B>14){var fe=N[Y>>B-14];if(fe.len)throw"Invalid table entry";if(fe.lit++,fe.p){var le=fe.p;fe.p=new Array(fe.lit);for(var re=0;re<fe.lit-1;++re)fe.p[re]=le[re]}else fe.p=new Array(1);fe.p[fe.lit-1]=m}else if(B)for(var ee=0,re=1<<14-B;re>0;re--){var fe=N[(Y<<14-B)+ee];if(fe.len||fe.p)throw"Invalid table entry";fe.len=B,fe.lit=m,ee++}}return!0}const P={c:0,lc:0};function L(f,m,S,N){f=f<<8|ha(S,N),m+=8,P.c=f,P.lc=m}const ae={c:0,lc:0};function be(f,m,S,N,Y,B,fe,le,re,ee){if(f==m){N<8&&(L(S,N,Y,fe),S=P.c,N=P.lc),N-=8;var ve=S>>N,ve=new Uint8Array([ve])[0];if(re.value+ve>ee)return!1;for(var me=le[re.value-1];ve-- >0;)le[re.value++]=me}else if(re.value<ee)le[re.value++]=f;else return!1;ae.c=S,ae.lc=N}function _(f){return f&65535}function Ne(f){var m=_(f);return m>32767?m-65536:m}const Ae={a:0,b:0};function Ke(f,m){var S=Ne(f),N=Ne(m),Y=N,B=S+(Y&1)+(Y>>1),fe=B,le=B-Y;Ae.a=fe,Ae.b=le}function rt(f,m){var S=_(f),N=_(m),Y=S-(N>>1)&65535,B=N+Y-32768&65535;Ae.a=B,Ae.b=Y}function zt(f,m,S,N,Y,B,fe){for(var le=fe<16384,re=S>Y?Y:S,ee=1,ve;ee<=re;)ee<<=1;for(ee>>=1,ve=ee,ee>>=1;ee>=1;){for(var me=0,at=me+B*(Y-ve),Me=B*ee,ze=B*ve,xe=N*ee,He=N*ve,Je,Ie,mt,At;me<=at;me+=ze){for(var We=me,$t=me+N*(S-ve);We<=$t;We+=He){var ke=We+xe,gt=We+Me,za=gt+xe;le?(Ke(f[We+m],f[gt+m]),Je=Ae.a,mt=Ae.b,Ke(f[ke+m],f[za+m]),Ie=Ae.a,At=Ae.b,Ke(Je,Ie),f[We+m]=Ae.a,f[ke+m]=Ae.b,Ke(mt,At),f[gt+m]=Ae.a,f[za+m]=Ae.b):(rt(f[We+m],f[gt+m]),Je=Ae.a,mt=Ae.b,rt(f[ke+m],f[za+m]),Ie=Ae.a,At=Ae.b,rt(Je,Ie),f[We+m]=Ae.a,f[ke+m]=Ae.b,rt(mt,At),f[gt+m]=Ae.a,f[za+m]=Ae.b)}if(S&ee){var gt=We+Me;le?Ke(f[We+m],f[gt+m]):rt(f[We+m],f[gt+m]),Je=Ae.a,f[gt+m]=Ae.b,f[We+m]=Je}}if(Y&ee)for(var We=me,$t=me+N*(S-ve);We<=$t;We+=He){var ke=We+xe;le?Ke(f[We+m],f[ke+m]):rt(f[We+m],f[ke+m]),Je=Ae.a,f[ke+m]=Ae.b,f[We+m]=Je}ve=ee,ee>>=1}return me}function xa(f,m,S,N,Y,B,fe,le,re,ee){for(var ve=0,me=0,at=le,Me=Math.trunc(Y.value+(B+7)/8);Y.value<Me;)for(L(ve,me,S,Y),ve=P.c,me=P.lc;me>=14;){var ze=ve>>me-14&16383,xe=m[ze];if(xe.len)me-=xe.len,be(xe.lit,fe,ve,me,S,N,Y,re,ee,at),ve=ae.c,me=ae.lc;else{if(!xe.p)throw"hufDecode issues";var He;for(He=0;He<xe.lit;He++){for(var Je=ie(f[xe.p[He]]);me<Je&&Y.value<Me;)L(ve,me,S,Y),ve=P.c,me=P.lc;if(me>=Je&&se(f[xe.p[He]])==(ve>>me-Je&(1<<Je)-1)){me-=Je,be(xe.p[He],fe,ve,me,S,N,Y,re,ee,at),ve=ae.c,me=ae.lc;break}}if(He==xe.lit)throw"hufDecode issues"}}var Ie=8-B&7;for(ve>>=Ie,me-=Ie;me>0;){var xe=m[ve<<14-me&16383];if(xe.len)me-=xe.len,be(xe.lit,fe,ve,me,S,N,Y,re,ee,at),ve=ae.c,me=ae.lc;else throw"hufDecode issues"}return!0}function wa(f,m,S,N,Y,B){var fe={value:0},le=S.value,re=lt(m,S),ee=lt(m,S);S.value+=4;var ve=lt(m,S);if(S.value+=4,re<0||re>=65537||ee<0||ee>=65537)throw"Something wrong with HUF_ENCSIZE";var me=new Array(65537),at=new Array(16384);ye(at);var Me=N-(S.value-le);if(j(f,m,S,Me,re,ee,me),ve>8*(N-(S.value-le)))throw"Something wrong with hufUncompress";te(me,re,ee,at),xa(me,at,f,m,S,ve,ee,B,Y,fe)}function Ua(f,m,S){for(var N=0;N<S;++N)m[N]=f[m[N]]}function Ta(f){for(var m=1;m<f.length;m++){var S=f[m-1]+f[m]-128;f[m]=S}}function Ha(f,m){for(var S=0,N=Math.floor((f.length+1)/2),Y=0,B=f.length-1;!(Y>B||(m[Y++]=f[S++],Y>B));)m[Y++]=f[N++]}function Fa(f){for(var m=f.byteLength,S=new Array,N=0,Y=new DataView(f);m>0;){var B=Y.getInt8(N++);if(B<0){var fe=-B;m-=fe+1;for(var le=0;le<fe;le++)S.push(Y.getUint8(N++))}else{var fe=B;m-=2;for(var re=Y.getUint8(N++),le=0;le<fe+1;le++)S.push(re)}}return S}function qn(f,m,S,N,Y,B){var ke=new DataView(B.buffer),fe=S[f.idx[0]].width,le=S[f.idx[0]].height,re=3,ee=Math.floor(fe/8),ve=Math.ceil(fe/8),me=Math.ceil(le/8),at=fe-(ve-1)*8,Me=le-(me-1)*8,ze={value:0},xe=new Array(re),He=new Array(re),Je=new Array(re),Ie=new Array(re),mt=new Array(re);for(let Fe=0;Fe<re;++Fe)mt[Fe]=m[f.idx[Fe]],xe[Fe]=Fe<1?0:xe[Fe-1]+ve*me,He[Fe]=new Float32Array(64),Je[Fe]=new Uint16Array(64),Ie[Fe]=new Uint16Array(ve*64);for(let Fe=0;Fe<me;++Fe){var At=8;Fe==me-1&&(At=Me);var We=8;for(let nt=0;nt<ve;++nt){nt==ve-1&&(We=at);for(let qe=0;qe<re;++qe)Je[qe].fill(0),Je[qe][0]=Y[xe[qe]++],It(ze,N,Je[qe]),Gn(Je[qe],He[qe]),Ia(He[qe]);Lt(He);for(let qe=0;qe<re;++qe)ja(He[qe],Ie[qe],nt*64)}let St=0;for(let nt=0;nt<re;++nt){const qe=S[f.idx[nt]].type;for(let Xt=8*Fe;Xt<8*Fe+At;++Xt){St=mt[nt][Xt];for(let Xa=0;Xa<ee;++Xa){const Ut=Xa*64+(Xt&7)*8;ke.setUint16(St+0*qe,Ie[nt][Ut+0],!0),ke.setUint16(St+2*qe,Ie[nt][Ut+1],!0),ke.setUint16(St+4*qe,Ie[nt][Ut+2],!0),ke.setUint16(St+6*qe,Ie[nt][Ut+3],!0),ke.setUint16(St+8*qe,Ie[nt][Ut+4],!0),ke.setUint16(St+10*qe,Ie[nt][Ut+5],!0),ke.setUint16(St+12*qe,Ie[nt][Ut+6],!0),ke.setUint16(St+14*qe,Ie[nt][Ut+7],!0),St+=16*qe}}if(ee!=ve)for(let Xt=8*Fe;Xt<8*Fe+At;++Xt){const Xa=mt[nt][Xt]+8*ee*2*qe,Ut=ee*64+(Xt&7)*8;for(let Qa=0;Qa<We;++Qa)ke.setUint16(Xa+Qa*2*qe,Ie[nt][Ut+Qa],!0)}}}for(var $t=new Uint16Array(fe),ke=new DataView(B.buffer),gt=0;gt<re;++gt){S[f.idx[gt]].decoded=!0;var za=S[f.idx[gt]].type;if(S[gt].type==2)for(var Mn=0;Mn<le;++Mn){const Fe=mt[gt][Mn];for(var Zt=0;Zt<fe;++Zt)$t[Zt]=ke.getUint16(Fe+Zt*2*za,!0);for(var Zt=0;Zt<fe;++Zt)ke.setFloat32(Fe+Zt*2*za,he($t[Zt]),!0)}}}function It(f,m,S){for(var N,Y=1;Y<64;)N=m[f.value],N==65280?Y=64:N>>8==255?Y+=N&255:(S[Y]=N,Y++),f.value++}function Gn(f,m){m[0]=he(f[0]),m[1]=he(f[1]),m[2]=he(f[5]),m[3]=he(f[6]),m[4]=he(f[14]),m[5]=he(f[15]),m[6]=he(f[27]),m[7]=he(f[28]),m[8]=he(f[2]),m[9]=he(f[4]),m[10]=he(f[7]),m[11]=he(f[13]),m[12]=he(f[16]),m[13]=he(f[26]),m[14]=he(f[29]),m[15]=he(f[42]),m[16]=he(f[3]),m[17]=he(f[8]),m[18]=he(f[12]),m[19]=he(f[17]),m[20]=he(f[25]),m[21]=he(f[30]),m[22]=he(f[41]),m[23]=he(f[43]),m[24]=he(f[9]),m[25]=he(f[11]),m[26]=he(f[18]),m[27]=he(f[24]),m[28]=he(f[31]),m[29]=he(f[40]),m[30]=he(f[44]),m[31]=he(f[53]),m[32]=he(f[10]),m[33]=he(f[19]),m[34]=he(f[23]),m[35]=he(f[32]),m[36]=he(f[39]),m[37]=he(f[45]),m[38]=he(f[52]),m[39]=he(f[54]),m[40]=he(f[20]),m[41]=he(f[22]),m[42]=he(f[33]),m[43]=he(f[38]),m[44]=he(f[46]),m[45]=he(f[51]),m[46]=he(f[55]),m[47]=he(f[60]),m[48]=he(f[21]),m[49]=he(f[34]),m[50]=he(f[37]),m[51]=he(f[47]),m[52]=he(f[50]),m[53]=he(f[56]),m[54]=he(f[59]),m[55]=he(f[61]),m[56]=he(f[35]),m[57]=he(f[36]),m[58]=he(f[48]),m[59]=he(f[49]),m[60]=he(f[57]),m[61]=he(f[58]),m[62]=he(f[62]),m[63]=he(f[63])}function Ia(f){const m=.5*Math.cos(.7853975),S=.5*Math.cos(3.14159/16),N=.5*Math.cos(3.14159/8),Y=.5*Math.cos(3*3.14159/16),B=.5*Math.cos(5*3.14159/16),fe=.5*Math.cos(3*3.14159/8),le=.5*Math.cos(7*3.14159/16);for(var re=new Array(4),ee=new Array(4),ve=new Array(4),me=new Array(4),at=0;at<8;++at){var Me=at*8;re[0]=N*f[Me+2],re[1]=fe*f[Me+2],re[2]=N*f[Me+6],re[3]=fe*f[Me+6],ee[0]=S*f[Me+1]+Y*f[Me+3]+B*f[Me+5]+le*f[Me+7],ee[1]=Y*f[Me+1]-le*f[Me+3]-S*f[Me+5]-B*f[Me+7],ee[2]=B*f[Me+1]-S*f[Me+3]+le*f[Me+5]+Y*f[Me+7],ee[3]=le*f[Me+1]-B*f[Me+3]+Y*f[Me+5]-S*f[Me+7],ve[0]=m*(f[Me+0]+f[Me+4]),ve[3]=m*(f[Me+0]-f[Me+4]),ve[1]=re[0]+re[3],ve[2]=re[1]-re[2],me[0]=ve[0]+ve[1],me[1]=ve[3]+ve[2],me[2]=ve[3]-ve[2],me[3]=ve[0]-ve[1],f[Me+0]=me[0]+ee[0],f[Me+1]=me[1]+ee[1],f[Me+2]=me[2]+ee[2],f[Me+3]=me[3]+ee[3],f[Me+4]=me[3]-ee[3],f[Me+5]=me[2]-ee[2],f[Me+6]=me[1]-ee[1],f[Me+7]=me[0]-ee[0]}for(var ze=0;ze<8;++ze)re[0]=N*f[16+ze],re[1]=fe*f[16+ze],re[2]=N*f[48+ze],re[3]=fe*f[48+ze],ee[0]=S*f[8+ze]+Y*f[24+ze]+B*f[40+ze]+le*f[56+ze],ee[1]=Y*f[8+ze]-le*f[24+ze]-S*f[40+ze]-B*f[56+ze],ee[2]=B*f[8+ze]-S*f[24+ze]+le*f[40+ze]+Y*f[56+ze],ee[3]=le*f[8+ze]-B*f[24+ze]+Y*f[40+ze]-S*f[56+ze],ve[0]=m*(f[ze]+f[32+ze]),ve[3]=m*(f[ze]-f[32+ze]),ve[1]=re[0]+re[3],ve[2]=re[1]-re[2],me[0]=ve[0]+ve[1],me[1]=ve[3]+ve[2],me[2]=ve[3]-ve[2],me[3]=ve[0]-ve[1],f[0+ze]=me[0]+ee[0],f[8+ze]=me[1]+ee[1],f[16+ze]=me[2]+ee[2],f[24+ze]=me[3]+ee[3],f[32+ze]=me[3]-ee[3],f[40+ze]=me[2]-ee[2],f[48+ze]=me[1]-ee[1],f[56+ze]=me[0]-ee[0]}function Lt(f){for(var m=0;m<64;++m){var S=f[0][m],N=f[1][m],Y=f[2][m];f[0][m]=S+1.5747*Y,f[1][m]=S-.1873*N-.4682*Y,f[2][m]=S+1.8556*N}}function ja(f,m,S){for(var N=0;N<64;++N)m[S+N]=Pl.toHalfFloat(vl(f[N]))}function vl(f){return f<=1?Math.sign(f)*Math.pow(Math.abs(f),2.2):Math.sign(f)*Math.pow(G,Math.abs(f)-1)}function Wa(f){return new DataView(f.array.buffer,f.offset.value,f.size)}function Ba(f){var m=f.viewer.buffer.slice(f.offset.value,f.offset.value+f.size),S=new Uint8Array(Fa(m)),N=new Uint8Array(S.length);return Ta(S),Ha(S,N),new DataView(N.buffer)}function vn(f){var m=f.array.slice(f.offset.value,f.offset.value+f.size),S=Ou(m),N=new Uint8Array(S.length);return Ta(S),Ha(S,N),new DataView(N.buffer)}function ei(f){for(var m=f.viewer,S={value:f.offset.value},N=new Uint16Array(f.width*f.scanlineBlockSize*(f.channels*f.type)),Y=new Uint8Array(8192),B=0,fe=new Array(f.channels),le=0;le<f.channels;le++)fe[le]={},fe[le].start=B,fe[le].end=fe[le].start,fe[le].nx=f.width,fe[le].ny=f.lines,fe[le].size=f.type,B+=fe[le].nx*fe[le].ny*fe[le].size;var re=Et(m,S),ee=Et(m,S);if(ee>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(re<=ee)for(var le=0;le<ee-re+1;le++)Y[le+re]=z(m,S);var ve=new Uint16Array(65536),me=I(Y,ve),at=lt(m,S);wa(f.array,m,S,at,N,B);for(var le=0;le<f.channels;++le)for(var Me=fe[le],ze=0;ze<fe[le].size;++ze)zt(N,Me.start+ze,Me.nx,Me.size,Me.ny,Me.nx*Me.size,me);Ua(ve,N,B);for(var xe=0,He=new Uint8Array(N.buffer.byteLength),Je=0;Je<f.lines;Je++)for(var Ie=0;Ie<f.channels;Ie++){var Me=fe[Ie],mt=Me.nx*Me.size,At=new Uint8Array(N.buffer,Me.end*2,mt*2);He.set(At,xe),xe+=mt*2,Me.end+=mt}return new DataView(He.buffer)}function yn(f){var m=f.array.slice(f.offset.value,f.offset.value+f.size),S=Ou(m);const N=f.lines*f.channels*f.width,Y=f.type==1?new Uint16Array(N):new Uint32Array(N);let B=0,fe=0;const le=new Array(4);for(let re=0;re<f.lines;re++)for(let ee=0;ee<f.channels;ee++){let ve=0;switch(f.type){case 1:le[0]=B,le[1]=le[0]+f.width,B=le[1]+f.width;for(let me=0;me<f.width;++me){const at=S[le[0]++]<<8|S[le[1]++];ve+=at,Y[fe]=ve,fe++}break;case 2:le[0]=B,le[1]=le[0]+f.width,le[2]=le[1]+f.width,B=le[2]+f.width;for(let me=0;me<f.width;++me){const at=S[le[0]++]<<24|S[le[1]++]<<16|S[le[2]++]<<8;ve+=at,Y[fe]=ve,fe++}break}}return new DataView(Y.buffer)}function gn(f){var m=f.viewer,S={value:f.offset.value},N=new Uint8Array(f.width*f.lines*(f.channels*f.type*2)),Y={version:ue(m,S),unknownUncompressedSize:ue(m,S),unknownCompressedSize:ue(m,S),acCompressedSize:ue(m,S),dcCompressedSize:ue(m,S),rleCompressedSize:ue(m,S),rleUncompressedSize:ue(m,S),rleRawSize:ue(m,S),totalAcUncompressedCount:ue(m,S),totalDcUncompressedCount:ue(m,S),acCompression:ue(m,S)};if(Y.version<2)throw"EXRLoader.parse: "+Kt.compression+" version "+Y.version+" is unsupported";for(var B=new Array,fe=Et(m,S)-2;fe>0;){var le=ka(m.buffer,S),re=z(m,S),ee=re>>2&3,ve=(re>>4)-1,me=new Int8Array([ve])[0],at=z(m,S);B.push({name:le,index:me,type:at,compression:ee}),fe-=le.length+3}for(var Me=Kt.channels,ze=new Array(f.channels),xe=0;xe<f.channels;++xe){var He=ze[xe]={},Je=Me[xe];He.name=Je.name,He.compression=0,He.decoded=!1,He.type=Je.pixelType,He.pLinear=Je.pLinear,He.width=f.width,He.height=f.lines}for(var Ie={idx:new Array(3)},mt=0;mt<f.channels;++mt)for(var He=ze[mt],xe=0;xe<B.length;++xe){var At=B[xe];He.name==At.name&&(He.compression=At.compression,At.index>=0&&(Ie.idx[At.index]=mt),He.offset=mt)}if(Y.acCompressedSize>0)switch(Y.acCompression){case 0:var ke=new Uint16Array(Y.totalAcUncompressedCount);wa(f.array,m,S,Y.acCompressedSize,ke,Y.totalAcUncompressedCount);break;case 1:var We=f.array.slice(S.value,S.value+Y.totalAcUncompressedCount),$t=Ou(We),ke=new Uint16Array($t.buffer);S.value+=Y.totalAcUncompressedCount;break}if(Y.dcCompressedSize>0){var gt={array:f.array,offset:S,size:Y.dcCompressedSize},za=new Uint16Array(vn(gt).buffer);S.value+=Y.dcCompressedSize}if(Y.rleRawSize>0){var We=f.array.slice(S.value,S.value+Y.rleCompressedSize),$t=Ou(We),Mn=Fa($t.buffer);S.value+=Y.rleCompressedSize}for(var Zt=0,Fe=new Array(ze.length),xe=0;xe<Fe.length;++xe)Fe[xe]=new Array;for(var St=0;St<f.lines;++St)for(var nt=0;nt<ze.length;++nt)Fe[nt].push(Zt),Zt+=ze[nt].width*f.type*2;qn(Ie,Fe,ze,ke,za,N);for(var xe=0;xe<ze.length;++xe){var He=ze[xe];if(!He.decoded)switch(He.compression){case 2:for(var qe=0,Xt=0,St=0;St<f.lines;++St){for(var Xa=Fe[xe][qe],Ut=0;Ut<He.width;++Ut){for(var Qa=0;Qa<2*He.type;++Qa)N[Xa++]=Mn[Xt+Qa*He.width*He.height];Xt++}qe++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(N.buffer)}function ka(f,m){for(var S=new Uint8Array(f),N=0;S[m.value+N]!=0;)N+=1;var Y=new TextDecoder().decode(S.slice(m.value,m.value+N));return m.value=m.value+N+1,Y}function ti(f,m,S){var N=new TextDecoder().decode(new Uint8Array(f).slice(m.value,m.value+S));return m.value=m.value+S,N}function En(f,m){var S=xt(f,m),N=lt(f,m);return[S,N]}function Ln(f,m){var S=lt(f,m),N=lt(f,m);return[S,N]}function xt(f,m){var S=f.getInt32(m.value,!0);return m.value=m.value+4,S}function lt(f,m){var S=f.getUint32(m.value,!0);return m.value=m.value+4,S}function ha(f,m){var S=f[m.value];return m.value=m.value+1,S}function z(f,m){var S=f.getUint8(m.value);return m.value=m.value+1,S}const ue=function(f,m){let S;return"getBigInt64"in DataView.prototype?S=Number(f.getBigInt64(m.value,!0)):S=f.getUint32(m.value+4,!0)+Number(f.getUint32(m.value,!0)<<32),m.value+=8,S};function Se(f,m){var S=f.getFloat32(m.value,!0);return m.value+=4,S}function Xe(f,m){return Pl.toHalfFloat(Se(f,m))}function he(f){var m=(f&31744)>>10,S=f&1023;return(f>>15?-1:1)*(m?m===31?S?NaN:1/0:Math.pow(2,m-15)*(1+S/1024):6103515625e-14*(S/1024))}function Et(f,m){var S=f.getUint16(m.value,!0);return m.value+=2,S}function Wt(f,m){return he(Et(f,m))}function Vn(f,m,S,N){for(var Y=S.value,B=[];S.value<Y+N-1;){var fe=ka(m,S),le=xt(f,S),re=z(f,S);S.value+=3;var ee=xt(f,S),ve=xt(f,S);B.push({name:fe,pixelType:le,pLinear:re,xSampling:ee,ySampling:ve})}return S.value+=1,B}function Kn(f,m){var S=Se(f,m),N=Se(f,m),Y=Se(f,m),B=Se(f,m),fe=Se(f,m),le=Se(f,m),re=Se(f,m),ee=Se(f,m);return{redX:S,redY:N,greenX:Y,greenY:B,blueX:fe,blueY:le,whiteX:re,whiteY:ee}}function Vt(f,m){var S=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],N=z(f,m);return S[N]}function wt(f,m){var S=lt(f,m),N=lt(f,m),Y=lt(f,m),B=lt(f,m);return{xMin:S,yMin:N,xMax:Y,yMax:B}}function kt(f,m){var S=["INCREASING_Y"],N=z(f,m);return S[N]}function pa(f,m){var S=Se(f,m),N=Se(f,m);return[S,N]}function Ya(f,m){var S=Se(f,m),N=Se(f,m),Y=Se(f,m);return[S,N,Y]}function $a(f,m,S,N,Y){if(N==="string"||N==="stringvector"||N==="iccProfile")return ti(m,S,Y);if(N==="chlist")return Vn(f,m,S,Y);if(N==="chromaticities")return Kn(f,S);if(N==="compression")return Vt(f,S);if(N==="box2i")return wt(f,S);if(N==="lineOrder")return kt(f,S);if(N==="float")return Se(f,S);if(N==="v2f")return pa(f,S);if(N==="v3f")return Ya(f,S);if(N==="int")return xt(f,S);if(N==="rational")return En(f,S);if(N==="timecode")return Ln(f,S);if(N==="preview")return S.value+=Y,"skipped";S.value+=Y}function Qi(f,m,S){const N={};if(f.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";N.version=f.getUint8(4);const Y=f.getUint8(5);N.spec={singleTile:!!(Y&2),longName:!!(Y&4),deepFormat:!!(Y&8),multiPart:!!(Y&16)},S.value=8;for(var B=!0;B;){var fe=ka(m,S);if(fe==0)B=!1;else{var le=ka(m,S),re=lt(f,S),ee=$a(f,m,S,le,re);ee===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${le}'.`):N[fe]=ee}}if((Y&-5)!=0)throw console.error("EXRHeader:",N),"THREE.EXRLoader: provided file is currently unsupported.";return N}function ai(f,m,S,N,Y){const B={size:0,viewer:m,array:S,offset:N,width:f.dataWindow.xMax-f.dataWindow.xMin+1,height:f.dataWindow.yMax-f.dataWindow.yMin+1,channels:f.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:f.channels[0].pixelType,uncompress:null,getter:null,format:null,[Oi?"colorSpace":"encoding"]:null};switch(f.compression){case"NO_COMPRESSION":B.lines=1,B.uncompress=Wa;break;case"RLE_COMPRESSION":B.lines=1,B.uncompress=Ba;break;case"ZIPS_COMPRESSION":B.lines=1,B.uncompress=vn;break;case"ZIP_COMPRESSION":B.lines=16,B.uncompress=vn;break;case"PIZ_COMPRESSION":B.lines=32,B.uncompress=ei;break;case"PXR24_COMPRESSION":B.lines=16,B.uncompress=yn;break;case"DWAA_COMPRESSION":B.lines=32,B.uncompress=gn;break;case"DWAB_COMPRESSION":B.lines=256,B.uncompress=gn;break;default:throw"EXRLoader.parse: "+f.compression+" is unsupported"}if(B.scanlineBlockSize=B.lines,B.type==1)switch(Y){case Ja:B.getter=Wt,B.inputSize=2;break;case fa:B.getter=Et,B.inputSize=2;break}else if(B.type==2)switch(Y){case Ja:B.getter=Se,B.inputSize=4;break;case fa:B.getter=Xe,B.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+B.type+" for "+f.compression+".";B.blockCount=(f.dataWindow.yMax+1)/B.scanlineBlockSize;for(var fe=0;fe<B.blockCount;fe++)ue(m,N);B.outputChannels=B.channels==3?4:B.channels;const le=B.width*B.height*B.outputChannels;switch(Y){case Ja:B.byteArray=new Float32Array(le),B.channels<B.outputChannels&&B.byteArray.fill(1,0,le);break;case fa:B.byteArray=new Uint16Array(le),B.channels<B.outputChannels&&B.byteArray.fill(15360,0,le);break;default:console.error("THREE.EXRLoader: unsupported type: ",Y);break}return B.bytesPerLine=B.width*B.inputSize*B.channels,B.outputChannels==4?B.format=Il:B.format=Km,Oi?B.colorSpace="srgb-linear":B.encoding=3e3,B}const Sn=new DataView(l),Za=new Uint8Array(l),bn={value:0},Kt=Qi(Sn,l,bn),we=ai(Kt,Sn,Za,bn,this.type),Pn={value:0},ht={R:0,G:1,B:2,A:3,Y:0};for(let f=0;f<we.height/we.scanlineBlockSize;f++){const m=lt(Sn,bn);we.size=lt(Sn,bn),we.lines=m+we.scanlineBlockSize>we.height?we.height-m:we.scanlineBlockSize;const N=we.size<we.lines*we.bytesPerLine?we.uncompress(we):Wa(we);bn.value+=we.size;for(let Y=0;Y<we.scanlineBlockSize;Y++){const B=Y+f*we.scanlineBlockSize;if(B>=we.height)break;for(let fe=0;fe<we.channels;fe++){const le=ht[Kt.channels[fe].name];for(let re=0;re<we.width;re++){Pn.value=(Y*(we.channels*we.width)+fe*we.width+re)*we.inputSize;const ee=(we.height-1-B)*(we.width*we.outputChannels)+re*we.outputChannels+le;we.byteArray[ee]=we.getter(N,Pn)}}}}return{header:Kt,width:we.width,height:we.height,data:we.byteArray,format:we.format,[Oi?"colorSpace":"encoding"]:we[Oi?"colorSpace":"encoding"],type:this.type}}setDataType(l){return this.type=l,this}load(l,o,s,c){function h(y,d){Oi?y.colorSpace=d.colorSpace:y.encoding=d.encoding,y.minFilter=_a,y.magFilter=_a,y.generateMipmaps=!1,y.flipY=!1,o&&o(y,d)}return super.load(l,h,s,c)}}function t0(u,l,o,s){var c;return c=class extends qu{constructor(h){super({vertexShader:l,fragmentShader:o,...h});for(const y in u)this.uniforms[y]=new Pm(u[y]),Object.defineProperty(this,y,{get(){return this.uniforms[y].value},set(d){this.uniforms[y].value=d}});this.uniforms=Jm.clone(this.uniforms)}},c.key=Fm.generateUUID(),c}const a0=()=>parseInt(Ff.replace(/\D+/g,"")),n0=a0();function l0(u,l,o){const s=st(x=>x.size),c=st(x=>x.viewport),h=typeof u=="number"?u:s.width*c.dpr,y=s.height*c.dpr,d=(typeof u=="number"?o:u)||{},{samples:v=0,depth:M,...b}=d,g=M??d.depthBuffer,A=H.useMemo(()=>{const x=new Vr(h,y,{minFilter:_a,magFilter:_a,type:fa,...b});return g&&(x.depthTexture=new Im(h,y,Ja)),x.samples=v,x},[]);return H.useLayoutEffect(()=>{A.setSize(h,y),v&&(A.samples=v)},[v,A,h,y]),H.useEffect(()=>()=>A.dispose(),[]),A}const i0=u=>typeof u=="function",u0=H.forwardRef(({envMap:u,resolution:l=256,frames:o=1/0,makeDefault:s,children:c,...h},y)=>{const d=st(({set:K})=>K),v=st(({camera:K})=>K),M=st(({size:K})=>K),b=H.useRef(null);H.useImperativeHandle(y,()=>b.current,[]);const g=H.useRef(null),A=l0(l);H.useLayoutEffect(()=>{h.manual||(b.current.aspect=M.width/M.height)},[M,h]),H.useLayoutEffect(()=>{b.current.updateProjectionMatrix()});let x=0,F=null;const ne=i0(c);return Zi(K=>{ne&&(o===1/0||x<o)&&(g.current.visible=!1,K.gl.setRenderTarget(A),F=K.scene.background,u&&(K.scene.background=u),K.gl.render(K.scene,b.current),K.scene.background=F,K.gl.setRenderTarget(null),g.current.visible=!0,x++)}),H.useLayoutEffect(()=>{if(s){const K=v;return d(()=>({camera:b.current})),()=>d(()=>({camera:K}))}},[b,s,d]),H.createElement(H.Fragment,null,H.createElement("perspectiveCamera",Qn({ref:b},h),!ne&&c),H.createElement("group",{ref:g},ne&&c(A.texture)))}),s0=H.forwardRef(({makeDefault:u,camera:l,regress:o,domElement:s,enableDamping:c=!0,keyEvents:h=!1,onChange:y,onStart:d,onEnd:v,...M},b)=>{const g=st(w=>w.invalidate),A=st(w=>w.camera),x=st(w=>w.gl),F=st(w=>w.events),ne=st(w=>w.setEvents),K=st(w=>w.set),D=st(w=>w.get),T=st(w=>w.performance),W=l||A,$=s||F.connected||x.domElement,J=H.useMemo(()=>new kv(W),[W]);return Zi(()=>{J.enabled&&J.update()},-1),H.useEffect(()=>(h&&J.connect(h===!0?$:h),J.connect($),()=>void J.dispose()),[h,$,o,J,g]),H.useEffect(()=>{const w=G=>{g(),o&&T.regress(),y&&y(G)},k=G=>{d&&d(G)},Z=G=>{v&&v(G)};return J.addEventListener("change",w),J.addEventListener("start",k),J.addEventListener("end",Z),()=>{J.removeEventListener("start",k),J.removeEventListener("end",Z),J.removeEventListener("change",w)}},[y,d,v,J,g,ne]),H.useEffect(()=>{if(u){const w=D().controls;return K({controls:J}),()=>K({controls:w})}},[u,J]),H.createElement("primitive",Qn({ref:b,object:J,enableDamping:c},M))}),r0=H.forwardRef(({children:u,domElement:l,onChange:o,onMouseDown:s,onMouseUp:c,onObjectChange:h,object:y,makeDefault:d,camera:v,enabled:M,axis:b,mode:g,translationSnap:A,rotationSnap:x,scaleSnap:F,space:ne,size:K,showX:D,showY:T,showZ:W,...$},J)=>{const w=st(L=>L.controls),k=st(L=>L.gl),Z=st(L=>L.events),G=st(L=>L.camera),I=st(L=>L.invalidate),ye=st(L=>L.get),_e=st(L=>L.set),q=v||G,Q=l||Z.connected||k.domElement,oe=H.useMemo(()=>new Kv(q,Q),[q,Q]),j=H.useRef(null);H.useLayoutEffect(()=>(y?oe.attach(y instanceof Hi?y:y.current):j.current instanceof Hi&&oe.attach(j.current),()=>void oe.detach()),[y,u,oe]),H.useEffect(()=>{if(w){const L=ae=>w.enabled=!ae.value;return oe.addEventListener("dragging-changed",L),()=>oe.removeEventListener("dragging-changed",L)}},[oe,w]);const ie=H.useRef(void 0),se=H.useRef(void 0),te=H.useRef(void 0),P=H.useRef(void 0);return H.useLayoutEffect(()=>void(ie.current=o),[o]),H.useLayoutEffect(()=>void(se.current=s),[s]),H.useLayoutEffect(()=>void(te.current=c),[c]),H.useLayoutEffect(()=>void(P.current=h),[h]),H.useEffect(()=>{const L=Ne=>{I(),ie.current==null||ie.current(Ne)},ae=Ne=>se.current==null?void 0:se.current(Ne),be=Ne=>te.current==null?void 0:te.current(Ne),_=Ne=>P.current==null?void 0:P.current(Ne);return oe.addEventListener("change",L),oe.addEventListener("mouseDown",ae),oe.addEventListener("mouseUp",be),oe.addEventListener("objectChange",_),()=>{oe.removeEventListener("change",L),oe.removeEventListener("mouseDown",ae),oe.removeEventListener("mouseUp",be),oe.removeEventListener("objectChange",_)}},[I,oe]),H.useEffect(()=>{if(d){const L=ye().controls;return _e({controls:oe}),()=>_e({controls:L})}},[d,oe]),H.createElement(H.Fragment,null,H.createElement("primitive",{ref:J,object:oe,enabled:M,axis:b,mode:g,translationSnap:A,rotationSnap:x,scaleSnap:F,space:ne,size:K,showX:D,showY:T,showZ:W}),H.createElement("group",Qn({ref:j},$),u))}),o0=t0({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Pa,sectionColor:new Pa,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new de,worldPlanePosition:new de},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${n0>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),c0=H.forwardRef(({args:u,cellColor:l="#000000",sectionColor:o="#2080ff",cellSize:s=.5,sectionSize:c=1,followCamera:h=!1,infiniteGrid:y=!1,fadeDistance:d=100,fadeStrength:v=1,fadeFrom:M=1,cellThickness:b=.5,sectionThickness:g=1,side:A=Wm,...x},F)=>{kr({GridMaterial:o0});const ne=H.useRef(null);H.useImperativeHandle(F,()=>ne.current,[]);const K=new If,D=new de(0,1,0),T=new de(0,0,0);Zi(J=>{K.setFromNormalAndCoplanarPoint(D,T).applyMatrix4(ne.current.matrixWorld);const w=ne.current.material,k=w.uniforms.worldCamProjPosition,Z=w.uniforms.worldPlanePosition;K.projectPoint(J.camera.position,k.value),Z.value.set(0,0,0).applyMatrix4(ne.current.matrixWorld)});const W={cellSize:s,sectionSize:c,cellColor:l,sectionColor:o,cellThickness:b,sectionThickness:g},$={fadeDistance:d,fadeStrength:v,fadeFrom:M,infiniteGrid:y,followCamera:h};return H.createElement("mesh",Qn({ref:ne,frustumCulled:!1},x),H.createElement("gridMaterial",Qn({transparent:!0,"extensions-derivatives":!0,side:A},W,$)),H.createElement("planeGeometry",{args:u}))}),Oh=(u,l,o)=>{let s;switch(u){case Hu:s=new Uint8ClampedArray(l*o*4);break;case fa:s=new Uint16Array(l*o*4);break;case ad:s=new Uint32Array(l*o*4);break;case td:s=new Int8Array(l*o*4);break;case ed:s=new Int16Array(l*o*4);break;case $m:s=new Int32Array(l*o*4);break;case Ja:s=new Float32Array(l*o*4);break;default:throw new Error("Unsupported data type")}return s};let Ru;const f0=(u,l,o,s)=>{if(Ru!==void 0)return Ru;const c=new Vr(1,1,s);l.setRenderTarget(c);const h=new Ce(new dn,new Lr({color:16777215}));l.render(h,o),l.setRenderTarget(null);const y=Oh(u,c.width,c.height);return l.readRenderTargetPixels(c,0,0,c.width,c.height,y),c.dispose(),h.geometry.dispose(),h.material.dispose(),Ru=y[0]!==0,Ru};class eo{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(l){this._width=l.width,this._height=l.height,this._type=l.type,this._colorSpace=l.colorSpace;const o={format:Il,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:l.renderTargetOptions?.anisotropy!==void 0?l.renderTargetOptions?.anisotropy:1,generateMipmaps:l.renderTargetOptions?.generateMipmaps!==void 0?l.renderTargetOptions?.generateMipmaps:!1,magFilter:l.renderTargetOptions?.magFilter!==void 0?l.renderTargetOptions?.magFilter:_a,minFilter:l.renderTargetOptions?.minFilter!==void 0?l.renderTargetOptions?.minFilter:_a,samples:l.renderTargetOptions?.samples!==void 0?l.renderTargetOptions?.samples:void 0,wrapS:l.renderTargetOptions?.wrapS!==void 0?l.renderTargetOptions?.wrapS:Zn,wrapT:l.renderTargetOptions?.wrapT!==void 0?l.renderTargetOptions?.wrapT:Zn};if(this._material=l.material,l.renderer?this._renderer=l.renderer:(this._renderer=eo.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new qr,this._camera=new Di,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!f0(this._type,this._renderer,this._camera,o)){let s;switch(this._type){case fa:s=this._renderer.extensions.has("EXT_color_buffer_float")?Ja:void 0;break}s!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ja}`),this._type=s):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ce(new dn,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Vr(this.width,this.height,o),this._renderTarget.texture.mapping=l.renderTargetOptions?.mapping!==void 0?l.renderTargetOptions?.mapping:ju}static instantiateRenderer(){const l=new Jf;return l.setSize(128,128),l}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(l){throw this._renderer.setRenderTarget(null),l}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const l=Oh(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,l),l}toDataTexture(l){const o=new km(this.toArray(),this.width,this.height,Il,this._type,l?.mapping||ju,l?.wrapS||Zn,l?.wrapT||Zn,l?.magFilter||_a,l?.minFilter||_a,l?.anisotropy||1,Uu);return o.generateMipmaps=l?.generateMipmaps!==void 0?l?.generateMipmaps:!1,o}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(l){this.disposeOnDemandRenderer(),l&&this.renderTarget.dispose(),this.material instanceof qu&&Object.values(this.material.uniforms).forEach(o=>{o.value instanceof Jl&&o.value.dispose()}),Object.values(this.material).forEach(o=>{o instanceof Jl&&o.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(l){this._width=l,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(l){this._height=l,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(l){this._renderTarget=l,this._width=l.width,this._height=l.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class Ch extends Error{}class Rh extends Error{}const Ci=(u,l,o)=>{const s=new RegExp(`${l}="([^"]*)"`,"i").exec(u);if(s)return s[1];const c=new RegExp(`<${l}[^>]*>([\\s\\S]*?)</${l}>`,"i").exec(u);if(c){const h=c[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return h&&h.length===3?h.map(y=>y.replace(/<\/?rdf:li>/g,"")):c[1].trim()}if(o!==void 0)return o;throw new Error(`Can't find ${l} in gainmap metadata`)},h0=u=>{let l;typeof TextDecoder<"u"?l=new TextDecoder().decode(u):l=u.toString();let o=l.indexOf("<x:xmpmeta");for(;o!==-1;){const s=l.indexOf("x:xmpmeta>",o),c=l.slice(o,s+10);try{const h=Ci(c,"hdrgm:GainMapMin","0"),y=Ci(c,"hdrgm:GainMapMax"),d=Ci(c,"hdrgm:Gamma","1"),v=Ci(c,"hdrgm:OffsetSDR","0.015625"),M=Ci(c,"hdrgm:OffsetHDR","0.015625"),b=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(c),g=b?b[1]:"0",A=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(c);if(!A)throw new Error("Incomplete gainmap metadata");const x=A[1];return{gainMapMin:Array.isArray(h)?h.map(F=>parseFloat(F)):[parseFloat(h),parseFloat(h),parseFloat(h)],gainMapMax:Array.isArray(y)?y.map(F=>parseFloat(F)):[parseFloat(y),parseFloat(y),parseFloat(y)],gamma:Array.isArray(d)?d.map(F=>parseFloat(F)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetSdr:Array.isArray(v)?v.map(F=>parseFloat(F)):[parseFloat(v),parseFloat(v),parseFloat(v)],offsetHdr:Array.isArray(M)?M.map(F=>parseFloat(F)):[parseFloat(M),parseFloat(M),parseFloat(M)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(x)}}catch{}o=l.indexOf("<x:xmpmeta",s)}};class p0{options;constructor(l){this.options={debug:l&&l.debug!==void 0?l.debug:!1,extractFII:l&&l.extractFII!==void 0?l.extractFII:!0,extractNonFII:l&&l.extractNonFII!==void 0?l.extractNonFII:!0}}extract(l){return new Promise((o,s)=>{const c=this.options.debug,h=new DataView(l.buffer);if(h.getUint16(0)!==65496){s(new Error("Not a valid jpeg"));return}const y=h.byteLength;let d=2,v=0,M;for(;d<y;){if(++v>250){s(new Error(`Found no marker after ${v} loops `));return}if(h.getUint8(d)!==255){s(new Error(`Not a valid marker at offset 0x${d.toString(16)}, found: 0x${h.getUint8(d).toString(16)}`));return}if(M=h.getUint8(d+1),c&&console.log(`Marker: ${M.toString(16)}`),M===226){c&&console.log("Found APP2 marker (0xffe2)");const b=d+4;if(h.getUint32(b)===1297106432){const g=b+4;let A;if(h.getUint16(g)===18761)A=!1;else if(h.getUint16(g)===19789)A=!0;else{s(new Error("No valid endianness marker found in TIFF header"));return}if(h.getUint16(g+2,!A)!==42){s(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=h.getUint32(g+4,!A);if(x<8){s(new Error("Not valid TIFF data! (First offset less than 8)"));return}const F=g+x,ne=h.getUint16(F,!A),K=F+2;let D=0;for(let J=K;J<K+12*ne;J+=12)h.getUint16(J,!A)===45057&&(D=h.getUint32(J+8,!A));const W=F+2+ne*12+4,$=[];for(let J=W;J<W+D*16;J+=16){const w={MPType:h.getUint32(J,!A),size:h.getUint32(J+4,!A),dataOffset:h.getUint32(J+8,!A),dependantImages:h.getUint32(J+12,!A),start:-1,end:-1,isFII:!1};w.dataOffset?(w.start=g+w.dataOffset,w.isFII=!1):(w.start=0,w.isFII=!0),w.end=w.start+w.size,$.push(w)}if(this.options.extractNonFII&&$.length){const J=new Blob([h]),w=[];for(const k of $){if(k.isFII&&!this.options.extractFII)continue;const Z=J.slice(k.start,k.end+1,"image/jpeg");w.push(Z)}o(w)}}}d+=2+h.getUint16(d+2)}})}}const m0=async u=>{const l=h0(u);if(!l)throw new Rh("Gain map XMP metadata not found");const s=await new p0({extractFII:!0,extractNonFII:!0}).extract(u);if(s.length!==2)throw new Ch("Gain map recovery image not found");return{sdr:new Uint8Array(await s[0].arrayBuffer()),gainMap:new Uint8Array(await s[1].arrayBuffer()),metadata:l}},Vf=u=>new Promise((l,o)=>{const s=document.createElement("img");s.onload=()=>{l(s)},s.onerror=c=>{o(c)},s.src=URL.createObjectURL(u)});class d0 extends nd{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(l,o){super(o),this._config=l,l.renderer&&(this._renderer=l.renderer),this._internalLoadingManager=new ld}setRenderer(l){return this._renderer=l,this}setRenderTargetOptions(l){return this._renderTargetOptions=l,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const l=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Jl,sdr:new Jl});return this._config.createQuadRenderer({width:16,height:16,type:fa,colorSpace:Uu,material:l,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(l,o,s){const c=o?new Blob([o],{type:"image/jpeg"}):void 0,h=new Blob([l],{type:"image/jpeg"});let y,d,v=!1;if(typeof createImageBitmap>"u"){const M=await Promise.all([c?Vf(c):Promise.resolve(void 0),Vf(h)]);d=M[0],y=M[1],v=s==="flipY"}else{const M=await Promise.all([c?createImageBitmap(c,{imageOrientation:s||"flipY"}):Promise.resolve(void 0),createImageBitmap(h,{imageOrientation:s||"flipY"})]);d=M[0],y=M[1]}return{sdrImage:y,gainMapImage:d,needsFlip:v}}createTextures(l,o,s){const c=new Jl(o||new ImageData(2,2),ju,Zn,Zn,_a,Sf,Il,Hu,1,Uu);c.flipY=s,c.needsUpdate=!0;const h=new Jl(l,ju,Zn,Zn,_a,Sf,Il,Hu,1,Gr);return h.flipY=s,h.needsUpdate=!0,{gainMap:c,sdr:h}}updateQuadRenderer(l,o,s,c,h){l.width=o.width,l.height=o.height,l.material.gainMap=s,l.material.sdr=c,l.material.gainMapMin=h.gainMapMin,l.material.gainMapMax=h.gainMapMax,l.material.offsetHdr=h.offsetHdr,l.material.offsetSdr=h.offsetSdr,l.material.gamma=h.gamma,l.material.hdrCapacityMin=h.hdrCapacityMin,l.material.hdrCapacityMax=h.hdrCapacityMax,l.material.maxDisplayBoost=Math.pow(2,h.hdrCapacityMax),l.material.needsUpdate=!0}}const v0=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,y0=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class g0 extends qu{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:l,offsetHdr:o,offsetSdr:s,gainMapMin:c,gainMapMax:h,maxDisplayBoost:y,hdrCapacityMin:d,hdrCapacityMax:v,sdr:M,gainMap:b}){super({name:"GainMapDecoderMaterial",vertexShader:v0,fragmentShader:y0,uniforms:{sdr:{value:M},gainMap:{value:b},gamma:{value:new de(1/l[0],1/l[1],1/l[2])},offsetHdr:{value:new de().fromArray(o)},offsetSdr:{value:new de().fromArray(s)},gainMapMin:{value:new de().fromArray(c)},gainMapMax:{value:new de().fromArray(h)},weightFactor:{value:(Math.log2(y)-d)/(v-d)}},blending:id,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=y,this._hdrCapacityMin=d,this._hdrCapacityMax=v,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(l){this.uniforms.sdr.value=l}get gainMap(){return this.uniforms.gainMap.value}set gainMap(l){this.uniforms.gainMap.value=l}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(l){this.uniforms.offsetHdr.value.fromArray(l)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(l){this.uniforms.offsetSdr.value.fromArray(l)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(l){this.uniforms.gainMapMin.value.fromArray(l)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(l){this.uniforms.gainMapMax.value.fromArray(l)}get gamma(){const l=this.uniforms.gamma.value;return[1/l.x,1/l.y,1/l.z]}set gamma(l){const o=this.uniforms.gamma.value;o.x=1/l[0],o.y=1/l[1],o.z=1/l[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(l){this._hdrCapacityMin=l,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(l){this._hdrCapacityMax=l,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(l){this._maxDisplayBoost=Math.max(1,Math.min(65504,l)),this.calculateWeight()}calculateWeight(){const l=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,l))}}class Nh extends d0{constructor(l,o){super({renderer:l,createMaterial:s=>new g0(s),createQuadRenderer:s=>new eo(s)},o)}async render(l,o,s,c){const{sdrImage:h,gainMapImage:y,needsFlip:d}=await this.processImages(s,c,"flipY"),{gainMap:v,sdr:M}=this.createTextures(h,y,d);this.updateQuadRenderer(l,h,v,M,o),l.render()}}class E0 extends Nh{load([l,o,s],c,h,y){const d=this.prepareQuadRenderer();let v,M,b;const g=async()=>{if(v&&M&&b){try{await this.render(d,b,v,M)}catch(G){this.manager.itemError(l),this.manager.itemError(o),this.manager.itemError(s),typeof y=="function"&&y(G),d.disposeOnDemandRenderer();return}typeof c=="function"&&c(d),this.manager.itemEnd(l),this.manager.itemEnd(o),this.manager.itemEnd(s),d.disposeOnDemandRenderer()}};let A=!0,x=0,F=0,ne=!0,K=0,D=0,T=!0,W=0,$=0;const J=()=>{if(typeof h=="function"){const G=x+K+W,I=F+D+$,ye=A&&ne&&T;h(new ProgressEvent("progress",{lengthComputable:ye,loaded:I,total:G}))}};this.manager.itemStart(l),this.manager.itemStart(o),this.manager.itemStart(s);const w=new Du(this._internalLoadingManager);w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(l,async G=>{if(typeof G=="string")throw new Error("Invalid sdr buffer");v=G,await g()},G=>{A=G.lengthComputable,F=G.loaded,x=G.total,J()},G=>{this.manager.itemError(l),typeof y=="function"&&y(G)});const k=new Du(this._internalLoadingManager);k.setResponseType("arraybuffer"),k.setRequestHeader(this.requestHeader),k.setPath(this.path),k.setWithCredentials(this.withCredentials),k.load(o,async G=>{if(typeof G=="string")throw new Error("Invalid gainmap buffer");M=G,await g()},G=>{ne=G.lengthComputable,D=G.loaded,K=G.total,J()},G=>{this.manager.itemError(o),typeof y=="function"&&y(G)});const Z=new Du(this._internalLoadingManager);return Z.setRequestHeader(this.requestHeader),Z.setPath(this.path),Z.setWithCredentials(this.withCredentials),Z.load(s,async G=>{if(typeof G!="string")throw new Error("Invalid metadata string");b=JSON.parse(G),await g()},G=>{T=G.lengthComputable,$=G.loaded,W=G.total,J()},G=>{this.manager.itemError(s),typeof y=="function"&&y(G)}),d}}class S0 extends Nh{load(l,o,s,c){const h=this.prepareQuadRenderer(),y=new Du(this._internalLoadingManager);return y.setResponseType("arraybuffer"),y.setRequestHeader(this.requestHeader),y.setPath(this.path),y.setWithCredentials(this.withCredentials),this.manager.itemStart(l),y.load(l,async d=>{if(typeof d=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const v=new Uint8Array(d);let M,b,g;try{const A=await m0(v);M=A.sdr,b=A.gainMap,g=A.metadata}catch(A){if(A instanceof Rh||A instanceof Ch)console.warn(`Failure to reconstruct an HDR image from ${l}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),g={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},M=v;else throw A}try{await this.render(h,g,M.buffer,b?.buffer)}catch(A){this.manager.itemError(l),typeof c=="function"&&c(A),h.disposeOnDemandRenderer();return}typeof o=="function"&&o(h),this.manager.itemEnd(l),h.disposeOnDemandRenderer()},s,d=>{this.manager.itemError(l),typeof c=="function"&&c(d)}),h}}const Bi={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Dh="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Fl=u=>Array.isArray(u),to=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Vu({files:u=to,path:l="",preset:o=void 0,colorSpace:s=void 0,extensions:c}={}){o&&(ao(o),u=Bi[o],l=Dh);const h=Fl(u),{extension:y,isCubemap:d}=no(u),v=lo(y);if(!v)throw new Error("useEnvironment: Unrecognized file extension: "+u);const M=st(x=>x.gl);H.useLayoutEffect(()=>{if(y!=="webp"&&y!=="jpg"&&y!=="jpeg")return;function x(){Wl.clear(v,h?[u]:u)}M.domElement.addEventListener("webglcontextlost",x,{once:!0})},[u,M.domElement]);const b=Wl(v,h?[u]:u,x=>{(y==="webp"||y==="jpg"||y==="jpeg")&&x.setRenderer(M),x.setPath==null||x.setPath(l),c&&c(x)});let g=h?b[0]:b;if(y==="jpg"||y==="jpeg"||y==="webp"){var A;g=(A=g.renderTarget)==null?void 0:A.texture}return g.mapping=d?ud:sd,g.colorSpace=s??(d?"srgb":"srgb-linear"),g}const b0={files:to,path:"",preset:void 0,extensions:void 0};Vu.preload=u=>{const l={...b0,...u};let{files:o,path:s=""}=l;const{preset:c,extensions:h}=l;c&&(ao(c),o=Bi[c],s=Dh);const{extension:y}=no(o);if(y==="webp"||y==="jpg"||y==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const d=lo(y);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+o);Wl.preload(d,Fl(o)?[o]:o,v=>{v.setPath==null||v.setPath(s),h&&h(v)})};const M0={files:to,preset:void 0};Vu.clear=u=>{const l={...M0,...u};let{files:o}=l;const{preset:s}=l;s&&(ao(s),o=Bi[s]);const{extension:c}=no(o),h=lo(c);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+o);Wl.clear(h,Fl(o)?[o]:o)};function ao(u){if(!(u in Bi))throw new Error("Preset must be one of: "+Object.keys(Bi).join(", "))}function no(u){var l;const o=Fl(u)&&u.length===6,s=Fl(u)&&u.length===3&&u.some(y=>y.endsWith("json")),c=Fl(u)?u[0]:u;return{extension:o?"cube":s?"webp":c.startsWith("data:application/exr")?"exr":c.startsWith("data:application/hdr")?"hdr":c.startsWith("data:image/jpeg")?"jpg":(l=c.split(".").pop())==null||(l=l.split("?"))==null||(l=l.shift())==null?void 0:l.toLowerCase(),isCubemap:o,isGainmap:s}}function lo(u){return u==="cube"?rd:u==="hdr"?$v:u==="exr"?e0:u==="jpg"||u==="jpeg"?S0:u==="webp"?E0:null}const _0=u=>u.current&&u.current.isScene,T0=u=>_0(u)?u.current:u;function io(u,l,o,s,c={}){var h,y,d,v;c={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...c};const M=T0(l||o),b=M.background,g=M.environment,A={backgroundBlurriness:M.backgroundBlurriness,backgroundIntensity:M.backgroundIntensity,backgroundRotation:(h=(y=M.backgroundRotation)==null||y.clone==null?void 0:y.clone())!==null&&h!==void 0?h:[0,0,0],environmentIntensity:M.environmentIntensity,environmentRotation:(d=(v=M.environmentRotation)==null||v.clone==null?void 0:v.clone())!==null&&d!==void 0?d:[0,0,0]};return u!=="only"&&(M.environment=s),u&&(M.background=s),Ka(M,c),()=>{u!=="only"&&(M.environment=g),u&&(M.background=b),Ka(M,A)}}function uo({scene:u,background:l=!1,map:o,...s}){const c=st(h=>h.scene);return H.useLayoutEffect(()=>{if(o)return io(l,u,c,o,s)}),null}function xh({background:u=!1,scene:l,blur:o,backgroundBlurriness:s,backgroundIntensity:c,backgroundRotation:h,environmentIntensity:y,environmentRotation:d,...v}){const M=Vu(v),b=st(g=>g.scene);return H.useLayoutEffect(()=>io(u,l,b,M,{backgroundBlurriness:o??s,backgroundIntensity:c,backgroundRotation:h,environmentIntensity:y,environmentRotation:d})),H.useEffect(()=>()=>{M.dispose()},[M]),null}function z0({children:u,near:l=.1,far:o=1e3,resolution:s=256,frames:c=1,map:h,background:y=!1,blur:d,backgroundBlurriness:v,backgroundIntensity:M,backgroundRotation:b,environmentIntensity:g,environmentRotation:A,scene:x,files:F,path:ne,preset:K=void 0,extensions:D}){const T=st(Z=>Z.gl),W=st(Z=>Z.scene),$=H.useRef(null),[J]=H.useState(()=>new qr),w=H.useMemo(()=>{const Z=new od(s);return Z.texture.type=fa,Z},[s]);H.useEffect(()=>()=>{w.dispose()},[w]),H.useLayoutEffect(()=>{if(c===1){const Z=T.autoClear;T.autoClear=!0,$.current.update(T,J),T.autoClear=Z}return io(y,x,W,w.texture,{backgroundBlurriness:d??v,backgroundIntensity:M,backgroundRotation:b,environmentIntensity:g,environmentRotation:A})},[u,J,w.texture,x,W,y,c,T]);let k=1;return Zi(()=>{if(c===1/0||k<c){const Z=T.autoClear;T.autoClear=!0,$.current.update(T,J),T.autoClear=Z,k++}}),H.createElement(H.Fragment,null,hv(H.createElement(H.Fragment,null,u,H.createElement("cubeCamera",{ref:$,args:[l,o,w]}),F||K?H.createElement(xh,{background:!0,files:F,preset:K,path:ne,extensions:D}):h?H.createElement(uo,{background:!0,map:h,extensions:D}):null),J))}function A0(u){var l,o,s,c;const h=Vu(u),y=u.map||h;H.useMemo(()=>kr({GroundProjectedEnvImpl:Zv}),[]),H.useEffect(()=>()=>{h.dispose()},[h]);const d=H.useMemo(()=>[y],[y]),v=(l=u.ground)==null?void 0:l.height,M=(o=u.ground)==null?void 0:o.radius,b=(s=(c=u.ground)==null?void 0:c.scale)!==null&&s!==void 0?s:1e3;return H.createElement(H.Fragment,null,H.createElement(uo,Qn({},u,{map:y})),H.createElement("groundProjectedEnvImpl",{args:d,scale:b,height:v,radius:M}))}function O0(u){return u.ground?H.createElement(A0,u):u.map?H.createElement(uo,u):u.children?H.createElement(z0,u):H.createElement(xh,u)}const C0=({point:u,normal:l,matrix:o,brush:s})=>{const c=H.useRef(null);Zi(()=>{if(c.current){const y=u.clone().applyMatrix4(o),d=l.clone().transformDirection(o).normalize();c.current.position.lerp(y,.4);const v=new _t;v.setFromUnitVectors(new de(0,0,1),d),c.current.quaternion.slerp(v,.4)}});const h=H.useMemo(()=>s.type===mn.SMOOTH?"#4ade80":s.type===mn.PAINT?s.color:"orange",[s.type,s.color]);return Te.jsxs("group",{ref:c,children:[Te.jsxs("mesh",{children:[Te.jsx("ringGeometry",{args:[s.radius*.9,s.radius,32]}),Te.jsx("meshBasicMaterial",{color:h,transparent:!0,opacity:.5,depthTest:!1,side:Gu})]}),Te.jsxs("mesh",{children:[Te.jsx("ringGeometry",{args:[0,s.radius*.1,16]}),Te.jsx("meshBasicMaterial",{color:h,transparent:!0,opacity:.8,depthTest:!1})]})]})},Ri=new Pa,Kf=new Pa,R0=({geometry:u,brush:l,onSculptEnd:o})=>{const s=H.useRef(null),[c,h]=H.useState(null),[y,d]=H.useState(!1),[v,M]=H.useState(null),b=H.useRef(!1),g=H.useRef(new de),A=H.useRef(new de),x=H.useMemo(()=>{let T=[new xi];if(!l.symmetry?.enabled)return T;if(l.symmetry.radial){const W=new de(1,0,0);l.symmetry.axis===Ft.Y&&W.set(0,1,0),l.symmetry.axis===Ft.Z&&W.set(0,0,1);const $=l.symmetry.radialCount||8,J=Math.PI*2/$,w=[];for(let k=0;k<$;k++)w.push(new xi().makeRotationAxis(W,k*J));T=w}else{const W=l.symmetry.axis,$=new xi().makeScale(W===Ft.X?-1:1,W===Ft.Y?-1:1,W===Ft.Z?-1:1);T.push($)}return T},[l.symmetry]),F=(T,W,$)=>{if(!s.current)return;const J=1-(l.brushSmoothing||0);g.current.lerp(T,J),A.current.lerp(W,J);const w=s.current.geometry,k=w.attributes.position,Z=w.attributes.normal,G=w.attributes.color,I=k.count,ye=l.radius*l.radius,_e=l.intensity*($?-1:1);Kf.set(l.color);const q=new de,Q=new de;let oe=!1;x.forEach(j=>{const ie=g.current.clone().applyMatrix4(j),se=A.current.clone().transformDirection(j).normalize(),te=new cd().setFromCenterAndSize(ie,new de(l.radius*2,l.radius*2,l.radius*2));for(let P=0;P<I;P++){if(q.fromBufferAttribute(k,P),!te.containsPoint(q))continue;const L=q.distanceToSquared(ie);if(L<ye){const be=1-Math.sqrt(L)/l.radius,_=be*be*(3-2*be);if(Q.fromBufferAttribute(Z,P),l.type===mn.PAINT&&G)Ri.fromBufferAttribute(G,P),Ri.lerp(Kf,_*l.intensity),G.setXYZ(P,Ri.r,Ri.g,Ri.b);else{switch(l.type){case mn.DRAW:q.add(Q.clone().multiplyScalar(_e*_*.5));break;case mn.CLAY:q.add(se.clone().multiplyScalar(_e*_*.4));break;case mn.INFLATE:q.add(Q.clone().multiplyScalar(_e*_*.8));break;case mn.SMOOTH:const Ne=ie.clone().lerp(q,.9);q.lerp(Ne,l.intensity*_*.5);break;case mn.FLATTEN:const Ae=q.clone().sub(ie).dot(se);q.sub(se.clone().multiplyScalar(Ae*l.intensity*_));break;default:q.add(Q.clone().multiplyScalar(_e*_*.5))}k.setXYZ(P,q.x,q.y,q.z)}oe=!0}}}),oe&&(l.type===mn.PAINT&&G?G.needsUpdate=!0:(k.needsUpdate=!0,w.computeVertexNormals()),b.current=!0)},ne=T=>{if(T.stopPropagation(),!s.current)return;h(T.point.clone());const W=T.face?.normal?.clone()||new de(0,1,0);if(W.applyQuaternion(s.current.quaternion),M(W),y&&T.buttons===1){const $=T.altKey||l.isNegative;F(T.point,W,$)}},K=T=>{if(T.stopPropagation(),!s.current)return;d(!0),b.current=!1,g.current.copy(T.point);const W=T.face?.normal?.clone()||new de(0,1,0);W.applyQuaternion(s.current.quaternion),A.current.copy(W);const $=T.altKey||l.isNegative;F(T.point,W,$)},D=T=>{if(T.stopPropagation(),d(!1),b.current&&o&&s.current){const W=s.current.geometry.attributes.position.array;o(W)}};return H.useEffect(()=>{const T=()=>d(!1);return window.addEventListener("pointerup",T),()=>window.removeEventListener("pointerup",T)},[]),Te.jsxs(Te.Fragment,{children:[Te.jsx("mesh",{ref:s,geometry:u,onPointerMove:ne,onPointerDown:K,onPointerUp:D,onPointerOut:()=>h(null),children:Te.jsx("meshStandardMaterial",{color:"white",roughness:l.roughness,metalness:l.metalness,emissive:new Pa(l.emissiveColor),emissiveIntensity:l.emissiveIntensity,wireframe:l.wireframe,flatShading:!1,vertexColors:!0})}),c&&v&&x.map((T,W)=>Te.jsx(C0,{point:c,normal:v,matrix:T,brush:l},W))]})},N0=({start:u,end:l,radiusA:o,radiusB:s,opacity:c=1})=>{const h=new de(...u),y=new de(...l),d=new de().subVectors(y,h),v=d.length(),M=new de().addVectors(h,y).multiplyScalar(.5),b=new _t;if(v>.001){const A=new de(0,1,0);b.setFromUnitVectors(A,d.normalize())}const g=(o+s)*.35;return Te.jsxs("mesh",{position:M,quaternion:b,children:[Te.jsx("cylinderGeometry",{args:[g,g,v,8,1]}),Te.jsx("meshStandardMaterial",{color:Ni.link,roughness:.7,transparent:c<1,opacity:c})]})},D0=({node:u,isSelected:l,isHovered:o,mode:s,onPointerDown:c,onPointerOver:h,onPointerOut:y,forwardRef:d,opacity:v=1,visible:M=!0})=>{const b=H.useMemo(()=>l?Ni.sphereSelected:o?s===pn.DELETE?"#ff4444":Ni.sphereHover:Ni.sphere,[l,o,s]);return!M&&!l?null:Te.jsxs("mesh",{ref:d,position:u.position,scale:[u.radius,u.radius,u.radius],onPointerDown:g=>c(g,u),onPointerOver:g=>h(g,u),onPointerOut:g=>y(g,u),children:[Te.jsx("sphereGeometry",{args:[1,32,32]}),Te.jsx("meshStandardMaterial",{color:b,roughness:.4,metalness:.1,transparent:v<1,opacity:v,visible:M||l}),l&&Te.jsxs("mesh",{children:[Te.jsx("sphereGeometry",{args:[1.05,16,16]}),Te.jsx("meshBasicMaterial",{color:"#ffffff",wireframe:!0,transparent:!0,opacity:.3*v})]})]})},x0=({nodes:u,rootId:l,toolMode:o,appMode:s,setNodes:c,commitToHistory:h,selectedId:y,setSelectedId:d,meshGeometry:v,brush:M,hideSpheres:b=!1,symmetry:g,onSculptEnd:A})=>{const{camera:x}=st(),[F,ne]=H.useState(null),K=H.useRef(null),D=H.useRef(null),T=H.useRef({}),W=H.useCallback((q,Q)=>{const oe=[...q];return Q===Ft.X&&(oe[0]*=-1),Q===Ft.Y&&(oe[1]*=-1),Q===Ft.Z&&(oe[2]*=-1),oe},[]),$=H.useCallback((q,Q,oe)=>{const j=[],ie=new de(...q),se=new de;Q===Ft.X?se.set(1,0,0):Q===Ft.Y?se.set(0,1,0):Q===Ft.Z&&se.set(0,0,1);const te=Math.PI*2/oe;for(let P=1;P<oe;P++){const L=ie.clone().applyAxisAngle(se,te*P);j.push([L.x,L.y,L.z])}return j},[]),J=(q,Q)=>{if(s!==Ai.SCULPT&&q.button===0)if(o===pn.ADD){q.stopPropagation();const oe=q.point,j=q.face?.normal?.clone().transformDirection(q.object.matrixWorld).normalize()||new de(0,1,0),ie=Q.radius*.8,se=oe.clone().add(j.multiplyScalar(ie)),te=_u();let P={};c(L=>{let ae={...L};const be=_u(),_={id:te,parentId:Q.id,position:[se.x,se.y,se.z],radius:ie,children:[],symmetryGroupId:g.enabled?be:void 0};if(ae[Q.id]={...ae[Q.id],children:[...ae[Q.id].children,te]},ae[te]=_,g.enabled){const Ne=g.radial?$(_.position,g.axis,g.radialCount):[W(_.position,g.axis)],Ae=Object.keys(L).filter(Ke=>Ke!==Q.id&&L[Ke].symmetryGroupId&&L[Ke].symmetryGroupId===L[Q.id].symmetryGroupId);Ae.length>0?Ne.forEach((Ke,rt)=>{const zt=Ae[rt%Ae.length],xa=_u();ae[zt]={...ae[zt],children:[...ae[zt].children,xa]},ae[xa]={..._,id:xa,parentId:zt,position:Ke,children:[]}}):Ne.forEach(Ke=>{if(new de(..._.position).distanceTo(new de(...Ke))>.05){const zt=_u();ae[Q.id]={...ae[Q.id],children:[...ae[Q.id].children,zt]},ae[zt]={..._,id:zt,parentId:Q.id,position:Ke,children:[]}}})}return P=ae,ae}),h(P),d(te)}else if(o===pn.DELETE){if(q.stopPropagation(),Q.id===l){alert("No puedes borrar el nodo raz.");return}const oe=(ie,se)=>{const te=se[ie];if(!te)return se;let P={...se};return te.children.forEach(L=>{P=oe(L,P)}),te.parentId&&P[te.parentId]&&(P[te.parentId]={...P[te.parentId],children:P[te.parentId].children.filter(L=>L!==ie)}),delete P[ie],P};let j={};c(ie=>{let se=oe(Q.id,ie);return Q.symmetryGroupId&&Object.keys(ie).filter(P=>P!==Q.id&&ie[P].symmetryGroupId===Q.symmetryGroupId).forEach(P=>{se=oe(P,se)}),j=se,se}),h(j),d(null)}else d(Q.id)},w=H.useCallback(()=>{if(!y||!D.current||!D.current.object)return;const q=D.current.object,Q=q.position,oe=q.scale,j=(oe.x+oe.y+oe.z)/3;c(ie=>{const se=ie[y];if(!se)return ie;let te={...ie};if(te[y]={...te[y],position:[Q.x,Q.y,Q.z],radius:j},g.enabled&&se.symmetryGroupId){const P=Object.keys(te).filter(L=>L!==y&&te[L].symmetryGroupId===se.symmetryGroupId);if(P.length>0)if(g.radial){const L=new de;g.axis===Ft.X?L.set(1,0,0):g.axis===Ft.Y?L.set(0,1,0):g.axis===Ft.Z&&L.set(0,0,1);const ae=new de(Q.x,Q.y,Q.z),be=Math.PI*2/g.radialCount;P.forEach((_,Ne)=>{const Ae=ae.clone().applyAxisAngle(L,be*(Ne+1));te[_]={...te[_],position:[Ae.x,Ae.y,Ae.z],radius:j}})}else{const L=W([Q.x,Q.y,Q.z],g.axis);te[P[0]]={...te[P[0]],position:L,radius:j}}}return te})},[y,g,W,c]),k=H.useCallback(()=>{c(q=>(h(q),q)),K.current&&(K.current.enabled=!0)},[h,c]),Z=H.useMemo(()=>{switch(o){case pn.MOVE:return"translate";case pn.ROTATE:return"rotate";case pn.SCALE:return"scale";default:return"translate"}},[o]),G=s===Ai.STRUCTURE&&y&&(o===pn.MOVE||o===pn.ROTATE||o===pn.SCALE),I=s===Ai.STRUCTURE,ye=I&&v?b?0:.4:1,_e=!b||s===Ai.SCULPT;return Te.jsxs(Te.Fragment,{children:[Te.jsx(u0,{makeDefault:!0,position:[0,2,8]}),Te.jsx(s0,{ref:K,makeDefault:!0,dampingFactor:.1}),Te.jsx("ambientLight",{intensity:.5}),Te.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0}),Te.jsx(O0,{preset:"city"}),Te.jsx(c0,{infiniteGrid:!0,sectionColor:"#444",cellColor:"#222",fadeDistance:30,position:[0,-2,0]}),Te.jsxs("group",{children:[I&&Te.jsxs(Te.Fragment,{children:[Object.values(u).map(q=>{let Q;return q.parentId&&(Q=u[q.parentId]),Te.jsxs(Pf.Fragment,{children:[Q&&Te.jsx(N0,{start:Q.position,end:q.position,radiusA:Q.radius,radiusB:q.radius,opacity:b?0:ye}),Te.jsx(D0,{forwardRef:oe=>{oe&&(T.current[q.id]=oe)},node:q,mode:o,isSelected:y===q.id,isHovered:F===q.id,onPointerDown:J,onPointerOver:(oe,j)=>{oe.stopPropagation(),ne(j.id)},onPointerOut:()=>ne(null),opacity:ye,visible:_e})]},q.id)}),G&&T.current[y]&&Te.jsx(r0,{ref:D,object:T.current[y],mode:Z,onMouseUp:k,onObjectChange:w,onMouseDown:()=>{K.current&&(K.current.enabled=!1)}}),v&&Te.jsx("mesh",{geometry:v,raycast:()=>null,children:Te.jsx("meshStandardMaterial",{color:Ni.mesh,roughness:.6,metalness:.2,transparent:!b,opacity:b?1:.7})})]}),v&&s===Ai.SCULPT&&Te.jsx(R0,{geometry:v,brush:M,onSculptEnd:A})]})]})},Z0=u=>Te.jsx("div",{className:"w-full h-full bg-neutral-900 cursor-crosshair",children:Te.jsx(Tv,{shadows:!0,dpr:[1,2],onPointerMissed:()=>u.setSelectedId(null),children:Te.jsx(x0,{...u})})});export{Z0 as ZSphereCanvas};
